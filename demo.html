<!DOCTYPE html>
<html>
    <head>
        <title>My Demo</title>
        <script type="importmap">
          {
            "imports": {
              "ai.matey/openai": "https://cdn.jsdelivr.net/npm/ai.matey@0.0.1/openai/index.mjs",
              "ai.matey/mock": "https://cdn.jsdelivr.net/npm/ai.matey@0.0.1/mock/index.mjs",
              "ai.matey/mock/polyfill": "https://cdn.jsdelivr.net/npm/ai.matey@0.0.1/mock/polyfill.mjs",
              "ai.matey/mock/pollyfill-ovewrite": "https://cdn.jsdelivr.net/npm/ai.matey@0.0.1/mock/polyfill-overwrite.mjs"
            }
          }
        </script>
    </head>
    <body>
        <h1>AI Demo</h1>
        <p>Check console</p>
        <script type="module">
          import ai from "ai.matey/mock";
          import AI from "ai.matey/openai";
          try{
              console.log("1. Call using mock implementation.");
              const model = await ai.languageModel.create({
                  context: "You are an expert in creating poery.",
                  temperature: 0.7,
                  topK: 1,
                  maxTokens: 200,
                  seed: 1,
              });
              const poem = await model.prompt("write a poem using markdown");
              console.log("1. Mock response");
              console.log(poem);
          }catch(e){
              console.error("1. Mock error");
              console.error(e);
          }
          try {
            console.log("2. Call to Ollama via openai-compatible client.");
            const ai = new AI({
                endpoint: "http://localhost:11434/v1/chat/completions",
                credentials : {
                    apiKey: "123"
                },
                model: "llama3.2:latest"
            });
            const model = await ai.languageModel.create({
                      context: "You are an expert in creating poery.",
                      temperature: 0.7,
                      topK: 1,
                      maxTokens: 200,
                      seed: 1,
            });
            const poem = await model.prompt("write a poem");
            console.log("2. Ollama response");
            console.log(poem);
          }catch(e){
              console.error("2. Ollama error");
              console.error(e);
          }
          try{
            console.log("3. Built-in ai (if available)");
            const model = await window.ai.languageModel.create({
                      context: "You are an expert in creating poery.",
                      temperature: 0.7,
                      topK: 1,
                      maxTokens: 200,
                      seed: 1,
            });
            const poem = await model.prompt("write a poem");
            console.log("3. Built-in ai response");
            console.log(poem);
          }catch(e){
            console.error("3. Built-in ai error");
            console.error(e);
          }
        </script>
    </body>
</html>