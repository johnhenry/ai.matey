"use strict";(globalThis.webpackChunkai_matey_docs=globalThis.webpackChunkai_matey_docs||[]).push([[183],{1184:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>c});var d=r(4041);const s={},t=d.createContext(s);function i(e){const n=d.useContext(t);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),d.createElement(t.Provider,{value:n},e.children)}},5050:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>o});const d=JSON.parse('{"id":"api/bridge","title":"Bridge API","description":"Complete API reference for the Bridge class - the core component for connecting frontend and backend adapters.","source":"@site/docs/api/bridge.md","sourceDirName":"api","slug":"/api/bridge","permalink":"/ai.matey/api/bridge","draft":false,"unlisted":false,"editUrl":"https://github.com/johnhenry/ai.matey/tree/main/packages/ai.matey.docs/docs/api/bridge.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docs","previous":{"title":"API Reference","permalink":"/ai.matey/api/"},"next":{"title":"Router API","permalink":"/ai.matey/api/router"}}');var s=r(1085),t=r(1184);const i={sidebar_position:1},c="Bridge API",a={},o=[{value:"Constructor",id:"constructor",level:2},{value:"<code>new Bridge(frontendAdapter, backendAdapter, options?)</code>",id:"new-bridgefrontendadapter-backendadapter-options",level:3},{value:"Methods",id:"methods",level:2},{value:"<code>chat(request)</code>",id:"chatrequest",level:3},{value:"<code>chatStream(request)</code>",id:"chatstreamrequest",level:3},{value:"<code>use(middleware)</code>",id:"usemiddleware",level:3},{value:"<code>execute(irRequest)</code>",id:"executeirrequest",level:3},{value:"<code>executeStream(irRequest)</code>",id:"executestreamirrequest",level:3},{value:"<code>setBackend(backendAdapter)</code>",id:"setbackendbackendadapter",level:3},{value:"<code>setFrontend(frontendAdapter)</code>",id:"setfrontendfrontendadapter",level:3},{value:"<code>on(event, handler)</code>",id:"onevent-handler",level:3},{value:"Properties",id:"properties",level:2},{value:"<code>frontendAdapter</code>",id:"frontendadapter",level:3},{value:"<code>backendAdapter</code>",id:"backendadapter",level:3},{value:"<code>middlewares</code>",id:"middlewares",level:3},{value:"Types",id:"types",level:2},{value:"<code>BridgeOptions</code>",id:"bridgeoptions",level:3},{value:"<code>BridgeEvent</code>",id:"bridgeevent",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"<code>BackendError</code>",id:"backenderror",level:3},{value:"<code>ValidationError</code>",id:"validationerror",level:3},{value:"<code>TimeoutError</code>",id:"timeouterror",level:3},{value:"Advanced Usage",id:"advanced-usage",level:2},{value:"Custom Backend Adapter",id:"custom-backend-adapter",level:3},{value:"Middleware Stack",id:"middleware-stack",level:3},{value:"See Also",id:"see-also",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"bridge-api",children:"Bridge API"})}),"\n",(0,s.jsxs)(n.p,{children:["Complete API reference for the ",(0,s.jsx)(n.code,{children:"Bridge"})," class - the core component for connecting frontend and backend adapters."]}),"\n",(0,s.jsx)(n.h2,{id:"constructor",children:"Constructor"}),"\n",(0,s.jsx)(n.h3,{id:"new-bridgefrontendadapter-backendadapter-options",children:(0,s.jsx)(n.code,{children:"new Bridge(frontendAdapter, backendAdapter, options?)"})}),"\n",(0,s.jsx)(n.p,{children:"Creates a new Bridge instance."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"frontendAdapter: FrontendAdapter"})," - Adapter for parsing input format"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"backendAdapter: BackendAdapter"})," - Adapter for executing requests with AI provider"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"options?: BridgeOptions"})," - Optional configuration"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"Bridge"})," instance"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { Bridge } from 'ai.matey.core';\nimport { OpenAIFrontendAdapter } from 'ai.matey.frontend/openai';\nimport { AnthropicBackendAdapter } from 'ai.matey.backend/anthropic';\n\nconst bridge = new Bridge(\n  new OpenAIFrontendAdapter(),\n  new AnthropicBackendAdapter({\n    apiKey: process.env.ANTHROPIC_API_KEY\n  }),\n  {\n    timeout: 30000,\n    retryCount: 3\n  }\n);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(n.h3,{id:"chatrequest",children:(0,s.jsx)(n.code,{children:"chat(request)"})}),"\n",(0,s.jsx)(n.p,{children:"Execute a chat completion request."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"request: any"})," - Request in frontend adapter format"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"Promise<any>"})," - Response in frontend adapter format"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Throws:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"BackendError"})," - If backend request fails"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ValidationError"})," - If request validation fails"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TimeoutError"})," - If request times out"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const response = await bridge.chat({\n  model: 'gpt-4',\n  messages: [\n    { role: 'user', content: 'Hello!' }\n  ]\n});\n\nconsole.log(response.choices[0].message.content);\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"chatstreamrequest",children:(0,s.jsx)(n.code,{children:"chatStream(request)"})}),"\n",(0,s.jsx)(n.p,{children:"Execute a streaming chat completion request."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"request: any"})," - Request in frontend adapter format (with ",(0,s.jsx)(n.code,{children:"stream: true"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"AsyncIterable<any>"})," - Stream of chunks in frontend adapter format"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Throws:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"BackendError"})," - If backend request fails"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ValidationError"})," - If request validation fails"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const stream = await bridge.chatStream({\n  model: 'gpt-4',\n  messages: [{ role: 'user', content: 'Count to 10' }],\n  stream: true\n});\n\nfor await (const chunk of stream) {\n  const content = chunk.choices?.[0]?.delta?.content;\n  if (content) {\n    process.stdout.write(content);\n  }\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"usemiddleware",children:(0,s.jsx)(n.code,{children:"use(middleware)"})}),"\n",(0,s.jsx)(n.p,{children:"Add middleware to the bridge."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"middleware: Middleware"})," - Middleware to add to the chain"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"this"})," (for chaining)"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { createLoggingMiddleware, createCachingMiddleware } from 'ai.matey.middleware';\n\nbridge\n  .use(createLoggingMiddleware({ level: 'info' }))\n  .use(createCachingMiddleware({ ttl: 3600 }));\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"executeirrequest",children:(0,s.jsx)(n.code,{children:"execute(irRequest)"})}),"\n",(0,s.jsx)(n.p,{children:"Execute a request using the IR format directly (bypassing frontend adapter)."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"irRequest: IRChatCompletionRequest"})," - Request in IR format"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"Promise<IRChatCompletionResponse>"})," - Response in IR format"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const irResponse = await bridge.execute({\n  model: 'claude-3-5-sonnet-20241022',\n  messages: [{ role: 'user', content: 'Hello' }],\n  temperature: 0.7\n});\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"executestreamirrequest",children:(0,s.jsx)(n.code,{children:"executeStream(irRequest)"})}),"\n",(0,s.jsx)(n.p,{children:"Execute a streaming request using IR format directly."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"irRequest: IRChatCompletionRequest"})," - Request in IR format with streaming enabled"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"AsyncIterable<IRChatCompletionChunk>"})," - Stream of IR chunks"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const stream = await bridge.executeStream({\n  model: 'claude-3-5-sonnet-20241022',\n  messages: [{ role: 'user', content: 'Hello' }],\n  stream: true\n});\n\nfor await (const chunk of stream) {\n  console.log(chunk.delta?.content);\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"setbackendbackendadapter",children:(0,s.jsx)(n.code,{children:"setBackend(backendAdapter)"})}),"\n",(0,s.jsx)(n.p,{children:"Replace the backend adapter."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"backendAdapter: BackendAdapter"})," - New backend adapter"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"void"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { OpenAIBackendAdapter } from 'ai.matey.backend/openai';\n\n// Switch from Anthropic to OpenAI\nbridge.setBackend(new OpenAIBackendAdapter({\n  apiKey: process.env.OPENAI_API_KEY\n}));\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"setfrontendfrontendadapter",children:(0,s.jsx)(n.code,{children:"setFrontend(frontendAdapter)"})}),"\n",(0,s.jsx)(n.p,{children:"Replace the frontend adapter."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"frontendAdapter: FrontendAdapter"})," - New frontend adapter"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"void"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { AnthropicFrontendAdapter } from 'ai.matey.frontend/anthropic';\n\n// Switch input format to Anthropic\nbridge.setFrontend(new AnthropicFrontendAdapter());\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"onevent-handler",children:(0,s.jsx)(n.code,{children:"on(event, handler)"})}),"\n",(0,s.jsx)(n.p,{children:"Subscribe to bridge events."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"event: BridgeEvent"})," - Event name"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"handler: Function"})," - Event handler function"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"void"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Events:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"request"})," - Fired before request is sent"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"response"})," - Fired after response is received"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"error"})," - Fired when an error occurs"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"stream:start"})," - Fired when streaming starts"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"stream:chunk"})," - Fired for each stream chunk"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"stream:end"})," - Fired when streaming ends"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"bridge.on('request', (req) => {\n  console.log('Request:', req.messages);\n});\n\nbridge.on('response', (res) => {\n  console.log('Response tokens:', res.usage?.total_tokens);\n});\n\nbridge.on('error', (err) => {\n  console.error('Error:', err.message);\n});\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,s.jsx)(n.h3,{id:"frontendadapter",children:(0,s.jsx)(n.code,{children:"frontendAdapter"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Type:"})," ",(0,s.jsx)(n.code,{children:"FrontendAdapter"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Read-only"})}),"\n",(0,s.jsx)(n.p,{children:"The current frontend adapter instance."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"backendadapter",children:(0,s.jsx)(n.code,{children:"backendAdapter"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Type:"})," ",(0,s.jsx)(n.code,{children:"BackendAdapter"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Read-only"})}),"\n",(0,s.jsx)(n.p,{children:"The current backend adapter instance."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"middlewares",children:(0,s.jsx)(n.code,{children:"middlewares"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Type:"})," ",(0,s.jsx)(n.code,{children:"Middleware[]"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Read-only"})}),"\n",(0,s.jsx)(n.p,{children:"Array of registered middleware in execution order."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"types",children:"Types"}),"\n",(0,s.jsx)(n.h3,{id:"bridgeoptions",children:(0,s.jsx)(n.code,{children:"BridgeOptions"})}),"\n",(0,s.jsx)(n.p,{children:"Configuration options for Bridge."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface BridgeOptions {\n  /** Request timeout in milliseconds (default: 30000) */\n  timeout?: number;\n\n  /** Number of retry attempts (default: 0) */\n  retryCount?: number;\n\n  /** Delay between retries in ms (default: 1000) */\n  retryDelay?: number;\n\n  /** Enable request validation (default: true) */\n  validateRequest?: boolean;\n\n  /** Enable response validation (default: true) */\n  validateResponse?: boolean;\n\n  /** Custom error handler */\n  onError?: (error: Error) => void;\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"bridgeevent",children:(0,s.jsx)(n.code,{children:"BridgeEvent"})}),"\n",(0,s.jsx)(n.p,{children:"Event types emitted by Bridge."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type BridgeEvent =\n  | 'request'\n  | 'response'\n  | 'error'\n  | 'stream:start'\n  | 'stream:chunk'\n  | 'stream:end';\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(n.p,{children:"Bridge can throw the following errors:"}),"\n",(0,s.jsx)(n.h3,{id:"backenderror",children:(0,s.jsx)(n.code,{children:"BackendError"})}),"\n",(0,s.jsx)(n.p,{children:"Thrown when the backend adapter fails to execute a request."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"try {\n  await bridge.chat({ ... });\n} catch (error) {\n  if (error instanceof BackendError) {\n    console.log('Backend failed:', error.backend);\n    console.log('Status:', error.statusCode);\n    console.log('Message:', error.message);\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"validationerror",children:(0,s.jsx)(n.code,{children:"ValidationError"})}),"\n",(0,s.jsx)(n.p,{children:"Thrown when request or response validation fails."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"try {\n  await bridge.chat({ model: null }); // Invalid request\n} catch (error) {\n  if (error instanceof ValidationError) {\n    console.log('Validation failed:', error.errors);\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"timeouterror",children:(0,s.jsx)(n.code,{children:"TimeoutError"})}),"\n",(0,s.jsx)(n.p,{children:"Thrown when a request exceeds the timeout limit."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const bridge = new Bridge(frontend, backend, { timeout: 5000 });\n\ntry {\n  await bridge.chat({ ... });\n} catch (error) {\n  if (error instanceof TimeoutError) {\n    console.log('Request timed out after 5s');\n  }\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"advanced-usage",children:"Advanced Usage"}),"\n",(0,s.jsx)(n.h3,{id:"custom-backend-adapter",children:"Custom Backend Adapter"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { BackendAdapter, IRChatCompletionRequest, IRChatCompletionResponse } from 'ai.matey.types';\n\nclass CustomBackend implements BackendAdapter {\n  name = 'custom';\n\n  async execute(request: IRChatCompletionRequest): Promise<IRChatCompletionResponse> {\n    // Custom implementation\n    return {\n      id: 'custom-id',\n      model: request.model,\n      choices: [{\n        index: 0,\n        message: {\n          role: 'assistant',\n          content: 'Custom response'\n        },\n        finish_reason: 'stop'\n      }],\n      usage: { total_tokens: 10, prompt_tokens: 5, completion_tokens: 5 }\n    };\n  }\n\n  async *executeStream(request: IRChatCompletionRequest) {\n    yield {\n      id: 'custom-id',\n      model: request.model,\n      choices: [{\n        index: 0,\n        delta: { content: 'Custom' },\n        finish_reason: null\n      }]\n    };\n  }\n}\n\nconst bridge = new Bridge(\n  new OpenAIFrontendAdapter(),\n  new CustomBackend()\n);\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"middleware-stack",children:"Middleware Stack"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import {\n  createLoggingMiddleware,\n  createCachingMiddleware,\n  createRetryMiddleware,\n  createCostTrackingMiddleware\n} from 'ai.matey.middleware';\n\nconst bridge = new Bridge(frontend, backend);\n\n// Add middleware in order\nbridge\n  .use(createLoggingMiddleware({ level: 'info' }))\n  .use(createRetryMiddleware({ maxAttempts: 3 }))\n  .use(createCachingMiddleware({ ttl: 3600 }))\n  .use(createCostTrackingMiddleware({ budgetLimit: 100 }));\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/api/router",children:"Router API"})," - Multi-backend routing"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/api/middleware",children:"Middleware API"})," - Middleware reference"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/api/errors",children:"Error Handling"})," - Error types"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/tutorials/beginner/simple-bridge",children:"Tutorial: Simple Bridge"})," - Getting started"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/johnhenry/ai.matey/tree/main/packages/ai.matey.docs/examples/01-basics",children:"Examples"})," - Code examples"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);