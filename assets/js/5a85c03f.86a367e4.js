"use strict";(globalThis.webpackChunkai_matey_docs=globalThis.webpackChunkai_matey_docs||[]).push([[1402],{1184:(e,r,s)=>{s.d(r,{R:()=>c,x:()=>a});var d=s(4041);const n={},i=d.createContext(n);function c(e){const r=d.useContext(i);return d.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),d.createElement(i.Provider,{value:r},e.children)}},8521:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>t,contentTitle:()=>a,default:()=>o,frontMatter:()=>c,metadata:()=>d,toc:()=>l});const d=JSON.parse('{"id":"api/generated/ai.matey.middleware/README","title":"README","description":"ai.matey API Documentation v0.0.0","source":"@site/docs/api/generated/ai.matey.middleware/README.md","sourceDirName":"api/generated/ai.matey.middleware","slug":"/api/generated/ai.matey.middleware/","permalink":"/ai.matey/api/generated/ai.matey.middleware/","draft":false,"unlisted":false,"editUrl":"https://github.com/johnhenry/ai.matey/tree/main/packages/ai.matey.docs/docs/api/generated/ai.matey.middleware/README.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"-internal-","permalink":"/ai.matey/api/generated/ai.matey.http/-internal-"},"next":{"title":"-internal-","permalink":"/ai.matey/api/generated/ai.matey.middleware/-internal-"}}');var n=s(1085),i=s(1184);const c={},a=void 0,t={},l=[{value:"Functions",id:"functions",level:2},{value:"createCachingMiddleware()",id:"createcachingmiddleware",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Returns",id:"returns",level:4},{value:"Example",id:"example",level:4},{value:"createConversationHistoryMiddleware()",id:"createconversationhistorymiddleware",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Returns",id:"returns-1",level:4},{value:"Examples",id:"examples",level:4},{value:"simpleConversationHistory()",id:"simpleconversationhistory",level:3},{value:"Parameters",id:"parameters-2",level:4},{value:"Returns",id:"returns-2",level:4},{value:"Example",id:"example-1",level:4},{value:"statelessConversation()",id:"statelessconversation",level:3},{value:"Returns",id:"returns-3",level:4},{value:"Example",id:"example-2",level:4},{value:"conversationOnlyHistory()",id:"conversationonlyhistory",level:3},{value:"Parameters",id:"parameters-3",level:4},{value:"Returns",id:"returns-4",level:4},{value:"Example",id:"example-3",level:4},{value:"calculateCost()",id:"calculatecost",level:3},{value:"Parameters",id:"parameters-4",level:4},{value:"Returns",id:"returns-5",level:4},{value:"createCostTrackingMiddleware()",id:"createcosttrackingmiddleware",level:3},{value:"Parameters",id:"parameters-5",level:4},{value:"Returns",id:"returns-6",level:4},{value:"Examples",id:"examples-1",level:4},{value:"createStreamingCostTrackingMiddleware()",id:"createstreamingcosttrackingmiddleware",level:3},{value:"Parameters",id:"parameters-6",level:4},{value:"Returns",id:"returns-7",level:4},{value:"getCostStats()",id:"getcoststats",level:3},{value:"Parameters",id:"parameters-7",level:4},{value:"Returns",id:"returns-8",level:4},{value:"createLoggingMiddleware()",id:"createloggingmiddleware",level:3},{value:"Parameters",id:"parameters-8",level:4},{value:"Returns",id:"returns-9",level:4},{value:"Example",id:"example-4",level:4},{value:"createOpenTelemetryMiddleware()",id:"createopentelemetrymiddleware",level:3},{value:"Parameters",id:"parameters-9",level:4},{value:"Returns",id:"returns-10",level:4},{value:"Throws",id:"throws",level:4},{value:"Example",id:"example-5",level:4},{value:"isOpenTelemetryAvailable()",id:"isopentelemetryavailable",level:3},{value:"Returns",id:"returns-11",level:4},{value:"Example",id:"example-6",level:4},{value:"isOpenTelemetryLoaded()",id:"isopentelemetryloaded",level:3},{value:"Returns",id:"returns-12",level:4},{value:"Example",id:"example-7",level:4},{value:"shutdownOpenTelemetry()",id:"shutdownopentelemetry",level:3},{value:"Returns",id:"returns-13",level:4},{value:"Example",id:"example-8",level:4},{value:"createRetryMiddleware()",id:"createretrymiddleware",level:3},{value:"Parameters",id:"parameters-10",level:4},{value:"Returns",id:"returns-14",level:4},{value:"Example",id:"example-9",level:4},{value:"isRateLimitError()",id:"isratelimiterror",level:3},{value:"Parameters",id:"parameters-11",level:4},{value:"Returns",id:"returns-15",level:4},{value:"isNetworkError()",id:"isnetworkerror",level:3},{value:"Parameters",id:"parameters-12",level:4},{value:"Returns",id:"returns-16",level:4},{value:"isServerError()",id:"isservererror",level:3},{value:"Parameters",id:"parameters-13",level:4},{value:"Returns",id:"returns-17",level:4},{value:"createRetryPredicate()",id:"createretrypredicate",level:3},{value:"Parameters",id:"parameters-14",level:4},{value:"Returns",id:"returns-18",level:4},{value:"Parameters",id:"parameters-15",level:5},{value:"Returns",id:"returns-19",level:5},{value:"createSecurityMiddleware()",id:"createsecuritymiddleware",level:3},{value:"Parameters",id:"parameters-16",level:4},{value:"Returns",id:"returns-20",level:4},{value:"Examples",id:"examples-2",level:4},{value:"createProductionSecurityMiddleware()",id:"createproductionsecuritymiddleware",level:3},{value:"Returns",id:"returns-21",level:4},{value:"Example",id:"example-10",level:4},{value:"createDevelopmentSecurityMiddleware()",id:"createdevelopmentsecuritymiddleware",level:3},{value:"Returns",id:"returns-22",level:4},{value:"Example",id:"example-11",level:4},{value:"createTelemetryMiddleware()",id:"createtelemetrymiddleware",level:3},{value:"Parameters",id:"parameters-17",level:4},{value:"Returns",id:"returns-23",level:4},{value:"Example",id:"example-12",level:4},{value:"createTransformMiddleware()",id:"createtransformmiddleware",level:3},{value:"Parameters",id:"parameters-18",level:4},{value:"Returns",id:"returns-24",level:4},{value:"Example",id:"example-13",level:4},{value:"createPromptRewriter()",id:"createpromptrewriter",level:3},{value:"Parameters",id:"parameters-19",level:4},{value:"Returns",id:"returns-25",level:4},{value:"Example",id:"example-14",level:4},{value:"createParameterModifier()",id:"createparametermodifier",level:3},{value:"Parameters",id:"parameters-20",level:4},{value:"Returns",id:"returns-26",level:4},{value:"Example",id:"example-15",level:4},{value:"createResponseFilter()",id:"createresponsefilter",level:3},{value:"Parameters",id:"parameters-21",level:4},{value:"Returns",id:"returns-27",level:4},{value:"Example",id:"example-16",level:4},{value:"createSystemMessageInjector()",id:"createsystemmessageinjector",level:3},{value:"Parameters",id:"parameters-22",level:4},{value:"Returns",id:"returns-28",level:4},{value:"Example",id:"example-17",level:4},{value:"createMessageFilter()",id:"createmessagefilter",level:3},{value:"Parameters",id:"parameters-23",level:4},{value:"Returns",id:"returns-29",level:4},{value:"Example",id:"example-18",level:4},{value:"createContentSanitizer()",id:"createcontentsanitizer",level:3},{value:"Parameters",id:"parameters-24",level:4},{value:"Returns",id:"returns-30",level:4},{value:"Example",id:"example-19",level:4},{value:"composeRequestTransformers()",id:"composerequesttransformers",level:3},{value:"Parameters",id:"parameters-25",level:4},{value:"Returns",id:"returns-31",level:4},{value:"Example",id:"example-20",level:4},{value:"composeResponseTransformers()",id:"composeresponsetransformers",level:3},{value:"Parameters",id:"parameters-26",level:4},{value:"Returns",id:"returns-32",level:4},{value:"composeMessageTransformers()",id:"composemessagetransformers",level:3},{value:"Parameters",id:"parameters-27",level:4},{value:"Returns",id:"returns-33",level:4},{value:"detectPII()",id:"detectpii",level:3},{value:"Parameters",id:"parameters-28",level:4},{value:"Returns",id:"returns-34",level:4},{value:"redactPII()",id:"redactpii",level:3},{value:"Parameters",id:"parameters-29",level:4},{value:"Returns",id:"returns-35",level:4},{value:"detectPromptInjection()",id:"detectpromptinjection",level:3},{value:"Parameters",id:"parameters-30",level:4},{value:"Returns",id:"returns-36",level:4},{value:"sanitizeText()",id:"sanitizetext",level:3},{value:"Parameters",id:"parameters-31",level:4},{value:"Returns",id:"returns-37",level:4},{value:"validateRequest()",id:"validaterequest",level:3},{value:"Parameters",id:"parameters-32",level:4},{value:"Returns",id:"returns-38",level:4},{value:"sanitizeRequest()",id:"sanitizerequest",level:3},{value:"Parameters",id:"parameters-33",level:4},{value:"Returns",id:"returns-39",level:4},{value:"createValidationMiddleware()",id:"createvalidationmiddleware",level:3},{value:"Parameters",id:"parameters-34",level:4},{value:"Returns",id:"returns-40",level:4},{value:"Examples",id:"examples-3",level:4},{value:"createProductionValidationMiddleware()",id:"createproductionvalidationmiddleware",level:3},{value:"Returns",id:"returns-41",level:4},{value:"Example",id:"example-21",level:4},{value:"createDevelopmentValidationMiddleware()",id:"createdevelopmentvalidationmiddleware",level:3},{value:"Returns",id:"returns-42",level:4},{value:"Example",id:"example-22",level:4},{value:"Classes",id:"classes",level:2},{value:"InMemoryCacheStorage",id:"inmemorycachestorage",level:3},{value:"Implements",id:"implements",level:4},{value:"Constructors",id:"constructors",level:4},{value:"Constructor",id:"constructor",level:5},{value:"Parameters",id:"parameters-35",level:6},{value:"Returns",id:"returns-43",level:6},{value:"Methods",id:"methods",level:4},{value:"get()",id:"get",level:5},{value:"Parameters",id:"parameters-36",level:6},{value:"Returns",id:"returns-44",level:6},{value:"Implementation of",id:"implementation-of",level:6},{value:"set()",id:"set",level:5},{value:"Parameters",id:"parameters-37",level:6},{value:"Returns",id:"returns-45",level:6},{value:"Implementation of",id:"implementation-of-1",level:6},{value:"has()",id:"has",level:5},{value:"Parameters",id:"parameters-38",level:6},{value:"Returns",id:"returns-46",level:6},{value:"Implementation of",id:"implementation-of-2",level:6},{value:"delete()",id:"delete",level:5},{value:"Parameters",id:"parameters-39",level:6},{value:"Returns",id:"returns-47",level:6},{value:"Implementation of",id:"implementation-of-3",level:6},{value:"clear()",id:"clear",level:5},{value:"Returns",id:"returns-48",level:6},{value:"Implementation of",id:"implementation-of-4",level:6},{value:"getStats()",id:"getstats",level:5},{value:"Returns",id:"returns-49",level:6},{value:"cleanup()",id:"cleanup",level:5},{value:"Returns",id:"returns-50",level:6},{value:"InMemoryCostStorage",id:"inmemorycoststorage",level:3},{value:"Implements",id:"implements-1",level:4},{value:"Constructors",id:"constructors-1",level:4},{value:"Constructor",id:"constructor-1",level:5},{value:"Returns",id:"returns-51",level:6},{value:"Methods",id:"methods-1",level:4},{value:"record()",id:"record",level:5},{value:"Parameters",id:"parameters-40",level:6},{value:"Returns",id:"returns-52",level:6},{value:"Implementation of",id:"implementation-of-5",level:6},{value:"getTotal()",id:"gettotal",level:5},{value:"Parameters",id:"parameters-41",level:6},{value:"Returns",id:"returns-53",level:6},{value:"Implementation of",id:"implementation-of-6",level:6},{value:"getByProvider()",id:"getbyprovider",level:5},{value:"Parameters",id:"parameters-42",level:6},{value:"Returns",id:"returns-54",level:6},{value:"Implementation of",id:"implementation-of-7",level:6},{value:"getByModel()",id:"getbymodel",level:5},{value:"Parameters",id:"parameters-43",level:6},{value:"Returns",id:"returns-55",level:6},{value:"Implementation of",id:"implementation-of-8",level:6},{value:"clear()",id:"clear-1",level:5},{value:"Returns",id:"returns-56",level:6},{value:"Implementation of",id:"implementation-of-9",level:6},{value:"getAllCosts()",id:"getallcosts",level:5},{value:"Returns",id:"returns-57",level:6},{value:"OpenTelemetryTelemetrySink",id:"opentelemetrytelemetrysink",level:3},{value:"Implements",id:"implements-2",level:4},{value:"Methods",id:"methods-2",level:4},{value:"create()",id:"create",level:5},{value:"Parameters",id:"parameters-44",level:6},{value:"Returns",id:"returns-58",level:6},{value:"Throws",id:"throws-1",level:6},{value:"recordMetric()",id:"recordmetric",level:5},{value:"Parameters",id:"parameters-45",level:6},{value:"Returns",id:"returns-59",level:6},{value:"Implementation of",id:"implementation-of-10",level:6},{value:"recordEvent()",id:"recordevent",level:5},{value:"Parameters",id:"parameters-46",level:6},{value:"Returns",id:"returns-60",level:6},{value:"Implementation of",id:"implementation-of-11",level:6},{value:"ConsoleTelemetrySink",id:"consoletelemetrysink",level:3},{value:"Implements",id:"implements-3",level:4},{value:"Constructors",id:"constructors-2",level:4},{value:"Constructor",id:"constructor-2",level:5},{value:"Returns",id:"returns-61",level:6},{value:"Methods",id:"methods-3",level:4},{value:"recordMetric()",id:"recordmetric-1",level:5},{value:"Parameters",id:"parameters-47",level:6},{value:"Returns",id:"returns-62",level:6},{value:"Implementation of",id:"implementation-of-12",level:6},{value:"recordEvent()",id:"recordevent-1",level:5},{value:"Parameters",id:"parameters-48",level:6},{value:"Returns",id:"returns-63",level:6},{value:"Implementation of",id:"implementation-of-13",level:6},{value:"InMemoryTelemetrySink",id:"inmemorytelemetrysink",level:3},{value:"Implements",id:"implements-4",level:4},{value:"Constructors",id:"constructors-3",level:4},{value:"Constructor",id:"constructor-3",level:5},{value:"Returns",id:"returns-64",level:6},{value:"Methods",id:"methods-4",level:4},{value:"recordMetric()",id:"recordmetric-2",level:5},{value:"Parameters",id:"parameters-49",level:6},{value:"Returns",id:"returns-65",level:6},{value:"Implementation of",id:"implementation-of-14",level:6},{value:"recordEvent()",id:"recordevent-2",level:5},{value:"Parameters",id:"parameters-50",level:6},{value:"Returns",id:"returns-66",level:6},{value:"Implementation of",id:"implementation-of-15",level:6},{value:"getMetrics()",id:"getmetrics",level:5},{value:"Returns",id:"returns-67",level:6},{value:"getEvents()",id:"getevents",level:5},{value:"Returns",id:"returns-68",level:6},{value:"clear()",id:"clear-2",level:5},{value:"Returns",id:"returns-69",level:6},{value:"Interfaces",id:"interfaces",level:2},{value:"CachingConfig",id:"cachingconfig",level:3},{value:"Properties",id:"properties",level:4},{value:"ConversationHistoryConfig",id:"conversationhistoryconfig",level:3},{value:"Properties",id:"properties-1",level:4},{value:"ConversationHistoryManager",id:"conversationhistorymanager",level:3},{value:"Methods",id:"methods-5",level:4},{value:"getHistory()",id:"gethistory",level:5},{value:"Returns",id:"returns-70",level:6},{value:"addMessage()",id:"addmessage",level:5},{value:"Parameters",id:"parameters-51",level:6},{value:"Returns",id:"returns-71",level:6},{value:"addMessages()",id:"addmessages",level:5},{value:"Parameters",id:"parameters-52",level:6},{value:"Returns",id:"returns-72",level:6},{value:"clear()",id:"clear-3",level:5},{value:"Returns",id:"returns-73",level:6},{value:"setHistory()",id:"sethistory",level:5},{value:"Parameters",id:"parameters-53",level:6},{value:"Returns",id:"returns-74",level:6},{value:"getPairCount()",id:"getpaircount",level:5},{value:"Returns",id:"returns-75",level:6},{value:"trim()",id:"trim",level:5},{value:"Returns",id:"returns-76",level:6},{value:"ProviderPricing",id:"providerpricing",level:3},{value:"Properties",id:"properties-2",level:4},{value:"ModelPricing",id:"modelpricing",level:3},{value:"Properties",id:"properties-3",level:4},{value:"CostCalculation",id:"costcalculation",level:3},{value:"Properties",id:"properties-4",level:4},{value:"CostStorage",id:"coststorage",level:3},{value:"Methods",id:"methods-6",level:4},{value:"record()",id:"record-1",level:5},{value:"Parameters",id:"parameters-54",level:6},{value:"Returns",id:"returns-77",level:6},{value:"getTotal()",id:"gettotal-1",level:5},{value:"Parameters",id:"parameters-55",level:6},{value:"Returns",id:"returns-78",level:6},{value:"getByProvider()",id:"getbyprovider-1",level:5},{value:"Parameters",id:"parameters-56",level:6},{value:"Returns",id:"returns-79",level:6},{value:"getByModel()",id:"getbymodel-1",level:5},{value:"Parameters",id:"parameters-57",level:6},{value:"Returns",id:"returns-80",level:6},{value:"clear()",id:"clear-4",level:5},{value:"Returns",id:"returns-81",level:6},{value:"CostTrackingConfig",id:"costtrackingconfig",level:3},{value:"Properties",id:"properties-5",level:4},{value:"Logger",id:"logger",level:3},{value:"Methods",id:"methods-7",level:4},{value:"debug()",id:"debug",level:5},{value:"Parameters",id:"parameters-58",level:6},{value:"Returns",id:"returns-82",level:6},{value:"info()",id:"info",level:5},{value:"Parameters",id:"parameters-59",level:6},{value:"Returns",id:"returns-83",level:6},{value:"warn()",id:"warn",level:5},{value:"Parameters",id:"parameters-60",level:6},{value:"Returns",id:"returns-84",level:6},{value:"error()",id:"error",level:5},{value:"Parameters",id:"parameters-61",level:6},{value:"Returns",id:"returns-85",level:6},{value:"LoggingConfig",id:"loggingconfig",level:3},{value:"Properties",id:"properties-6",level:4},{value:"BatchSpanProcessorConfig",id:"batchspanprocessorconfig",level:3},{value:"Properties",id:"properties-7",level:4},{value:"OpenTelemetryConfig",id:"opentelemetryconfig",level:3},{value:"Properties",id:"properties-8",level:4},{value:"RetryConfig",id:"retryconfig",level:3},{value:"Properties",id:"properties-9",level:4},{value:"SecurityConfig",id:"securityconfig",level:3},{value:"Properties",id:"properties-10",level:4},{value:"TelemetryConfig",id:"telemetryconfig",level:3},{value:"Properties",id:"properties-11",level:4},{value:"TransformConfig",id:"transformconfig",level:3},{value:"Properties",id:"properties-12",level:4},{value:"ValidationResult",id:"validationresult",level:3},{value:"Properties",id:"properties-13",level:4},{value:"PIIDetectionResult",id:"piidetectionresult",level:3},{value:"Properties",id:"properties-14",level:4},{value:"ModerationResult",id:"moderationresult",level:3},{value:"Properties",id:"properties-15",level:4},{value:"ValidationConfig",id:"validationconfig",level:3},{value:"Properties",id:"properties-16",level:4},{value:"Type Aliases",id:"type-aliases",level:2},{value:"LogLevel",id:"loglevel",level:3},{value:"RequestTransformer()",id:"requesttransformer",level:3},{value:"Parameters",id:"parameters-62",level:4},{value:"Returns",id:"returns-86",level:4},{value:"ResponseTransformer()",id:"responsetransformer",level:3},{value:"Parameters",id:"parameters-63",level:4},{value:"Returns",id:"returns-87",level:4},{value:"MessageTransformer()",id:"messagetransformer",level:3},{value:"Parameters",id:"parameters-64",level:4},{value:"Returns",id:"returns-88",level:4},{value:"Variables",id:"variables",level:2},{value:"DEFAULT_PRICING",id:"default_pricing",level:3},{value:"OpenTelemetryAttributes",id:"opentelemetryattributes",level:3},{value:"Type Declaration",id:"type-declaration",level:4},{value:"DEFAULT_SECURITY_CONFIG",id:"default_security_config",level:3},{value:"MetricNames",id:"metricnames",level:3},{value:"Type Declaration",id:"type-declaration-1",level:4},{value:"EventNames",id:"eventnames",level:3},{value:"Type Declaration",id:"type-declaration-2",level:4},{value:"DEFAULT_PII_PATTERNS",id:"default_pii_patterns",level:3},{value:"DEFAULT_INJECTION_PATTERNS",id:"default_injection_patterns",level:3},{value:"Modules",id:"modules",level:2}];function h(e){const r={a:"a",code:"code",del:"del",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/",children:(0,n.jsx)(r.strong,{children:"ai.matey API Documentation v0.0.0"})})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/",children:"ai.matey API Documentation"})," / ai.matey.middleware"]}),"\n",(0,n.jsx)(r.h1,{id:"aimateymiddleware",children:"ai.matey.middleware"}),"\n",(0,n.jsx)(r.p,{children:"AI Matey Middleware"}),"\n",(0,n.jsx)(r.p,{children:"Consolidated package containing all middleware components.\nMiddleware provides cross-cutting concerns like caching, retry,\nlogging, and security for the AI adapter system."}),"\n",(0,n.jsx)(r.h2,{id:"functions",children:"Functions"}),"\n",(0,n.jsx)(r.h3,{id:"createcachingmiddleware",children:"createCachingMiddleware()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createCachingMiddleware(config: CachingConfig): Middleware;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L260",children:"packages/middleware/src/caching.ts:260"})]}),"\n",(0,n.jsx)(r.p,{children:"Create caching middleware."}),"\n",(0,n.jsx)(r.p,{children:"Caches responses with TTL-based expiration and LRU eviction."}),"\n",(0,n.jsx)(r.h4,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#cachingconfig",children:(0,n.jsx)(r.code,{children:"CachingConfig"})})}),(0,n.jsx)(r.td,{children:"Caching configuration"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})})}),"\n",(0,n.jsx)(r.p,{children:"Caching middleware"}),"\n",(0,n.jsx)(r.h4,{id:"example",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const caching = createCachingMiddleware({\n  ttl: 3600000, // 1 hour\n  maxSize: 1000,\n  cacheStreaming: false\n});\n\nbridge.use(caching);\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createconversationhistorymiddleware",children:"createConversationHistoryMiddleware()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createConversationHistoryMiddleware(config: ConversationHistoryConfig): {\n  middleware: Middleware;\n  manager: ConversationHistoryManager;\n};\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L167",children:"packages/middleware/src/conversation-history.ts:167"})]}),"\n",(0,n.jsx)(r.p,{children:"Create conversation history middleware."}),"\n",(0,n.jsx)(r.p,{children:"Maintains a global conversation history across requests. Automatically prepends\nhistory to requests and appends responses to history after completion."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#conversationhistoryconfig",children:(0,n.jsx)(r.code,{children:"ConversationHistoryConfig"})})}),(0,n.jsx)(r.td,{children:"Conversation history configuration"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-1",children:"Returns"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"{\n  middleware: Middleware;\n  manager: ConversationHistoryManager;\n}\n"})}),"\n",(0,n.jsx)(r.p,{children:"Conversation history middleware and manager"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Name"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"middleware"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L168",children:"packages/middleware/src/conversation-history.ts:168"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"manager"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#conversationhistorymanager",children:(0,n.jsx)(r.code,{children:"ConversationHistoryManager"})})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L169",children:"packages/middleware/src/conversation-history.ts:169"})})]})]})]}),"\n",(0,n.jsx)(r.h4,{id:"examples",children:"Examples"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const { middleware, manager } = createConversationHistoryMiddleware({\n  maxHistorySize: 10,\n  strategy: 'smart'\n});\n\nbridge.use(middleware);\n\n// Access history\nconsole.log('Pairs:', manager.getPairCount());\nconsole.log('History:', manager.getHistory());\n\n// Clear history when needed\nmanager.clear();\n"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const { middleware } = createConversationHistoryMiddleware({\n  initialHistory: [\n    { role: 'system', content: 'You are a helpful assistant.' }\n  ],\n  maxHistorySize: 5,\n  strategy: 'smart' // Preserves system message\n});\n"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const { middleware } = createConversationHistoryMiddleware({\n  maxHistorySize: 0 // No history tracking\n});\n"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const { middleware } = createConversationHistoryMiddleware({\n  maxHistorySize: 10,\n  // Only track user and assistant messages, ignore system\n  messageFilter: (msg) => msg.role !== 'system'\n});\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"simpleconversationhistory",children:"simpleConversationHistory()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function simpleConversationHistory(maxHistorySize: number): Middleware;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L310",children:"packages/middleware/src/conversation-history.ts:310"})]}),"\n",(0,n.jsx)(r.p,{children:"Create a simple conversation history middleware with minimal config."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"maxHistorySize"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"10"})}),(0,n.jsx)(r.td,{children:"Maximum number of message pairs to keep"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-2",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})})}),"\n",(0,n.jsx)(r.p,{children:"Conversation history middleware"}),"\n",(0,n.jsx)(r.h4,{id:"example-1",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"// Keep last 5 message pairs\nbridge.use(simpleConversationHistory(5));\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"statelessconversation",children:"statelessConversation()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function statelessConversation(): Middleware;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L327",children:"packages/middleware/src/conversation-history.ts:327"})]}),"\n",(0,n.jsx)(r.p,{children:"Create a stateless conversation history middleware.\nUseful for explicitly disabling history in a pipeline."}),"\n",(0,n.jsx)(r.h4,{id:"returns-3",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})})}),"\n",(0,n.jsx)(r.p,{children:"Stateless middleware"}),"\n",(0,n.jsx)(r.h4,{id:"example-2",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"// Explicitly disable history\nbridge.use(statelessConversation());\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"conversationonlyhistory",children:"conversationOnlyHistory()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function conversationOnlyHistory(maxHistorySize: number): Middleware;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L345",children:"packages/middleware/src/conversation-history.ts:345"})]}),"\n",(0,n.jsx)(r.p,{children:"Create a conversation history middleware that only tracks user/assistant pairs.\nSystem messages from requests are passed through but not tracked."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-3",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"maxHistorySize"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"10"})}),(0,n.jsx)(r.td,{children:"Maximum number of message pairs"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-4",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})})}),"\n",(0,n.jsx)(r.p,{children:"Conversation history middleware"}),"\n",(0,n.jsx)(r.h4,{id:"example-3",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"// Track conversation but not system messages\nbridge.use(conversationOnlyHistory(10));\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"calculatecost",children:"calculateCost()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function calculateCost(\n   usage: IRUsage, \n   provider: string, \n   model: string, \n   config: CostTrackingConfig): CostCalculation;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L341",children:"packages/middleware/src/cost-tracking.ts:341"})]}),"\n",(0,n.jsx)(r.p,{children:"Calculate cost for a request/response"}),"\n",(0,n.jsx)(r.h4,{id:"parameters-4",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"usage"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irusage",children:(0,n.jsx)(r.code,{children:"IRUsage"})})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"provider"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"model"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#costtrackingconfig",children:(0,n.jsx)(r.code,{children:"CostTrackingConfig"})})})]})]})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-5",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#costcalculation",children:(0,n.jsx)(r.code,{children:"CostCalculation"})})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createcosttrackingmiddleware",children:"createCostTrackingMiddleware()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createCostTrackingMiddleware(config: CostTrackingConfig): Middleware;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L456",children:"packages/middleware/src/cost-tracking.ts:456"})]}),"\n",(0,n.jsx)(r.p,{children:"Create cost tracking middleware"}),"\n",(0,n.jsx)(r.h4,{id:"parameters-5",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#costtrackingconfig",children:(0,n.jsx)(r.code,{children:"CostTrackingConfig"})})}),(0,n.jsx)(r.td,{children:"Cost tracking configuration"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-6",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})})}),"\n",(0,n.jsx)(r.p,{children:"Middleware function"}),"\n",(0,n.jsx)(r.h4,{id:"examples-1",children:"Examples"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"import { createCostTrackingMiddleware } from 'ai.matey';\n\nconst costTracking = createCostTrackingMiddleware({\n  logCosts: true,\n  onCost: (cost) => {\n    console.log(`Request cost: $${cost.totalCost.toFixed(6)}`);\n  }\n});\n\nbridge.use(costTracking);\n"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const costTracking = createCostTrackingMiddleware({\n  providers: {\n    'anthropic': {\n      inputCostPer1M: 3.0,\n      outputCostPer1M: 15.0\n    }\n  },\n  models: [\n    {\n      model: /gpt-4-turbo/,\n      pricing: {\n        inputCostPer1M: 10.0,\n        outputCostPer1M: 30.0\n      }\n    }\n  ]\n});\n"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const costTracking = createCostTrackingMiddleware({\n  requestThreshold: 0.10,  // Warn if request costs > $0.10\n  hourlyThreshold: 10.00,  // Warn if hourly cost > $10\n  dailyThreshold: 100.00,  // Warn if daily cost > $100\n  onThresholdExceeded: (cost, threshold) => {\n    console.warn(`Cost threshold exceeded: $${cost.totalCost} > $${threshold}`);\n  }\n});\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createstreamingcosttrackingmiddleware",children:"createStreamingCostTrackingMiddleware()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createStreamingCostTrackingMiddleware(config: CostTrackingConfig): StreamingMiddleware;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L531",children:"packages/middleware/src/cost-tracking.ts:531"})]}),"\n",(0,n.jsx)(r.p,{children:"Create streaming cost tracking middleware"}),"\n",(0,n.jsx)(r.p,{children:"Note: For streaming, cost is calculated at the end when usage is available"}),"\n",(0,n.jsx)(r.h4,{id:"parameters-6",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#costtrackingconfig",children:(0,n.jsx)(r.code,{children:"CostTrackingConfig"})})})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-7",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#streamingmiddleware",children:(0,n.jsx)(r.code,{children:"StreamingMiddleware"})})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"getcoststats",children:"getCostStats()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function getCostStats(storage: CostStorage, hours: number): Promise<{\n  period: string;\n  total: number;\n  byProvider: {\n   [k: string]: number;\n  };\n  byModel: {\n   [k: string]: number;\n  };\n}>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L581",children:"packages/middleware/src/cost-tracking.ts:581"})]}),"\n",(0,n.jsx)(r.p,{children:"Get cost statistics from storage"}),"\n",(0,n.jsx)(r.h4,{id:"parameters-7",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Default value"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"storage"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#coststorage",children:(0,n.jsx)(r.code,{children:"CostStorage"})})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"undefined"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"hours"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"24"})})]})]})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-8",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<{\n",(0,n.jsx)(r.code,{children:"period"}),": ",(0,n.jsx)(r.code,{children:"string"}),";\n",(0,n.jsx)(r.code,{children:"total"}),": ",(0,n.jsx)(r.code,{children:"number"}),";\n",(0,n.jsx)(r.code,{children:"byProvider"}),": {\n[",(0,n.jsx)(r.code,{children:"k"}),": ",(0,n.jsx)(r.code,{children:"string"}),"]: ",(0,n.jsx)(r.code,{children:"number"}),";\n};\n",(0,n.jsx)(r.code,{children:"byModel"}),": {\n[",(0,n.jsx)(r.code,{children:"k"}),": ",(0,n.jsx)(r.code,{children:"string"}),"]: ",(0,n.jsx)(r.code,{children:"number"}),";\n};\n}>"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createloggingmiddleware",children:"createLoggingMiddleware()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createLoggingMiddleware(config: LoggingConfig): Middleware;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/logging.ts#L199",children:"packages/middleware/src/logging.ts:199"})]}),"\n",(0,n.jsx)(r.p,{children:"Create logging middleware."}),"\n",(0,n.jsx)(r.p,{children:"Logs requests, responses, and errors at configurable levels."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-8",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#loggingconfig",children:(0,n.jsx)(r.code,{children:"LoggingConfig"})})}),(0,n.jsx)(r.td,{children:"Logging configuration"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-9",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})})}),"\n",(0,n.jsx)(r.p,{children:"Logging middleware"}),"\n",(0,n.jsx)(r.h4,{id:"example-4",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const logging = createLoggingMiddleware({\n  level: 'info',\n  logRequests: true,\n  logResponses: true,\n  sanitize: true\n});\n\nbridge.use(logging);\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createopentelemetrymiddleware",children:"createOpenTelemetryMiddleware()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createOpenTelemetryMiddleware(config: OpenTelemetryConfig): Promise<Middleware>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L351",children:"packages/middleware/src/opentelemetry.ts:351"})]}),"\n",(0,n.jsx)(r.p,{children:"Create OpenTelemetry middleware."}),"\n",(0,n.jsx)(r.p,{children:"Provides distributed tracing with span creation, context propagation,\nand metrics export via OpenTelemetry."}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Note:"})," This middleware requires optional OpenTelemetry packages to be installed:"]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.code,{children:"@opentelemetry/api"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.code,{children:"@opentelemetry/sdk-trace-base"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.code,{children:"@opentelemetry/exporter-trace-otlp-http"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.code,{children:"@opentelemetry/resources"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.code,{children:"@opentelemetry/semantic-conventions"})}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:"Install with:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"npm install @opentelemetry/api @opentelemetry/sdk-trace-base \\\n  @opentelemetry/exporter-trace-otlp-http @opentelemetry/resources \\\n  @opentelemetry/semantic-conventions\n"})}),"\n",(0,n.jsx)(r.h4,{id:"parameters-9",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#opentelemetryconfig",children:(0,n.jsx)(r.code,{children:"OpenTelemetryConfig"})})}),(0,n.jsx)(r.td,{children:"OpenTelemetry configuration"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-10",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})}),">"]}),"\n",(0,n.jsx)(r.p,{children:"Promise that resolves to OpenTelemetry middleware"}),"\n",(0,n.jsx)(r.h4,{id:"throws",children:"Throws"}),"\n",(0,n.jsx)(r.p,{children:"Error if OpenTelemetry packages are not installed"}),"\n",(0,n.jsx)(r.h4,{id:"example-5",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"import { createOpenTelemetryMiddleware } from 'ai.matey.middleware';\n\nconst otel = await createOpenTelemetryMiddleware({\n  serviceName: 'my-ai-service',\n  endpoint: 'http://localhost:4318/v1/traces',\n  samplingRate: 1.0\n});\n\nbridge.use(otel);\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"isopentelemetryavailable",children:"isOpenTelemetryAvailable()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function isOpenTelemetryAvailable(): Promise<boolean>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L601",children:"packages/middleware/src/opentelemetry.ts:601"})]}),"\n",(0,n.jsx)(r.p,{children:"Check if OpenTelemetry packages are installed and available."}),"\n",(0,n.jsx)(r.h4,{id:"returns-11",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"boolean"}),">"]}),"\n",(0,n.jsx)(r.p,{children:"Promise that resolves to true if OpenTelemetry is available"}),"\n",(0,n.jsx)(r.h4,{id:"example-6",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"import { isOpenTelemetryAvailable } from 'ai.matey.middleware';\n\nif (await isOpenTelemetryAvailable()) {\n  console.log('OpenTelemetry is available!');\n} else {\n  console.log('OpenTelemetry packages not installed.');\n}\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"isopentelemetryloaded",children:"isOpenTelemetryLoaded()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function isOpenTelemetryLoaded(): boolean;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L620",children:"packages/middleware/src/opentelemetry.ts:620"})]}),"\n",(0,n.jsx)(r.p,{children:"Synchronously check if OpenTelemetry is already loaded.\nUse isOpenTelemetryAvailable() for async check with dynamic import."}),"\n",(0,n.jsx)(r.h4,{id:"returns-12",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"boolean"})}),"\n",(0,n.jsx)(r.p,{children:"True if OpenTelemetry is already loaded"}),"\n",(0,n.jsx)(r.h4,{id:"example-7",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"import { isOpenTelemetryLoaded } from 'ai.matey.middleware';\n\nif (isOpenTelemetryLoaded()) {\n  console.log('OpenTelemetry is already loaded!');\n}\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"shutdownopentelemetry",children:"shutdownOpenTelemetry()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function shutdownOpenTelemetry(): Promise<void>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L640",children:"packages/middleware/src/opentelemetry.ts:640"})]}),"\n",(0,n.jsx)(r.p,{children:"Force shutdown of the global tracer provider.\nUseful for graceful shutdown in server applications."}),"\n",(0,n.jsx)(r.h4,{id:"returns-13",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"void"}),">"]}),"\n",(0,n.jsx)(r.p,{children:"Promise that resolves when shutdown is complete"}),"\n",(0,n.jsx)(r.h4,{id:"example-8",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"import { shutdownOpenTelemetry } from 'ai.matey.middleware';\n\nprocess.on('SIGTERM', async () => {\n  await shutdownOpenTelemetry();\n  process.exit(0);\n});\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createretrymiddleware",children:"createRetryMiddleware()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createRetryMiddleware(config: RetryConfig): Middleware;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/retry.ts#L143",children:"packages/middleware/src/retry.ts:143"})]}),"\n",(0,n.jsx)(r.p,{children:"Create retry middleware."}),"\n",(0,n.jsx)(r.p,{children:"Retries failed requests with exponential backoff."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-10",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#retryconfig",children:(0,n.jsx)(r.code,{children:"RetryConfig"})})}),(0,n.jsx)(r.td,{children:"Retry configuration"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-14",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})})}),"\n",(0,n.jsx)(r.p,{children:"Retry middleware"}),"\n",(0,n.jsx)(r.h4,{id:"example-9",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const retry = createRetryMiddleware({\n  maxAttempts: 3,\n  initialDelay: 1000,\n  backoffMultiplier: 2,\n  maxDelay: 30000\n});\n\nbridge.use(retry);\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"isratelimiterror",children:"isRateLimitError()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function isRateLimitError(error: unknown): boolean;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/retry.ts#L243",children:"packages/middleware/src/retry.ts:243"})]}),"\n",(0,n.jsx)(r.p,{children:"Check if an error is a rate limit error."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-11",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"error"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"unknown"})})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-15",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"boolean"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"isnetworkerror",children:"isNetworkError()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function isNetworkError(error: unknown): boolean;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/retry.ts#L254",children:"packages/middleware/src/retry.ts:254"})]}),"\n",(0,n.jsx)(r.p,{children:"Check if an error is a network error."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-12",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"error"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"unknown"})})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-16",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"boolean"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"isservererror",children:"isServerError()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function isServerError(error: unknown): boolean;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/retry.ts#L265",children:"packages/middleware/src/retry.ts:265"})]}),"\n",(0,n.jsx)(r.p,{children:"Check if an error is a server error (5xx)."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-13",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"error"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"unknown"})})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-17",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"boolean"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createretrypredicate",children:"createRetryPredicate()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:'function createRetryPredicate(errorTypes: ("rate_limit" | "network" | "server")[]): (error: unknown, attempt: number) => boolean;\n'})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/retry.ts#L277",children:"packages/middleware/src/retry.ts:277"})]}),"\n",(0,n.jsx)(r.p,{children:"Create a retry predicate that only retries specific error types.\nNote: maxAttempts is enforced by the middleware loop, not this function."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-14",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"errorTypes"})}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:'"rate_limit"'})," | ",(0,n.jsx)(r.code,{children:'"network"'})," | ",(0,n.jsx)(r.code,{children:'"server"'}),")[]"]})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-18",children:"Returns"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"(error: unknown, attempt: number): boolean;\n"})}),"\n",(0,n.jsx)(r.h5,{id:"parameters-15",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"error"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"unknown"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"attempt"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})})]})]})]}),"\n",(0,n.jsx)(r.h5,{id:"returns-19",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"boolean"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createsecuritymiddleware",children:"createSecurityMiddleware()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createSecurityMiddleware(config: SecurityConfig): Middleware;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/security.ts#L123",children:"packages/middleware/src/security.ts:123"})]}),"\n",(0,n.jsx)(r.p,{children:"Create security headers middleware"}),"\n",(0,n.jsx)(r.p,{children:"Adds security headers to responses to protect against common vulnerabilities."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-16",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#securityconfig",children:(0,n.jsx)(r.code,{children:"SecurityConfig"})})}),(0,n.jsx)(r.td,{children:"Security configuration"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-20",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})})}),"\n",(0,n.jsx)(r.p,{children:"Middleware function"}),"\n",(0,n.jsx)(r.h4,{id:"examples-2",children:"Examples"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"import { createSecurityMiddleware } from 'ai.matey';\n\nconst security = createSecurityMiddleware({\n  contentSecurityPolicy: \"default-src 'self'\",\n  hsts: 'max-age=31536000',\n});\n\nbridge.use(security);\n"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const productionSecurity = createSecurityMiddleware({\n  contentSecurityPolicy: \"default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'\",\n  frameOptions: 'DENY',\n  hsts: 'max-age=31536000; includeSubDomains; preload',\n  referrerPolicy: 'strict-origin-when-cross-origin',\n  permissionsPolicy: 'geolocation=(), microphone=(), camera=(), payment=()',\n});\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createproductionsecuritymiddleware",children:"createProductionSecurityMiddleware()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createProductionSecurityMiddleware(): Middleware;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/security.ts#L217",children:"packages/middleware/src/security.ts:217"})]}),"\n",(0,n.jsx)(r.p,{children:"Create production-ready security middleware with strict settings"}),"\n",(0,n.jsx)(r.h4,{id:"returns-21",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})})}),"\n",(0,n.jsx)(r.p,{children:"Middleware with production security settings"}),"\n",(0,n.jsx)(r.h4,{id:"example-10",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"import { createProductionSecurityMiddleware } from 'ai.matey';\n\nbridge.use(createProductionSecurityMiddleware());\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createdevelopmentsecuritymiddleware",children:"createDevelopmentSecurityMiddleware()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createDevelopmentSecurityMiddleware(): Middleware;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/security.ts#L243",children:"packages/middleware/src/security.ts:243"})]}),"\n",(0,n.jsx)(r.p,{children:"Create development-friendly security middleware with relaxed settings"}),"\n",(0,n.jsx)(r.h4,{id:"returns-22",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})})}),"\n",(0,n.jsx)(r.p,{children:"Middleware with development security settings"}),"\n",(0,n.jsx)(r.h4,{id:"example-11",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"import { createDevelopmentSecurityMiddleware } from 'ai.matey';\n\nbridge.use(createDevelopmentSecurityMiddleware());\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createtelemetrymiddleware",children:"createTelemetryMiddleware()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createTelemetryMiddleware(config: TelemetryConfig): Middleware;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L124",children:"packages/middleware/src/telemetry.ts:124"})]}),"\n",(0,n.jsx)(r.p,{children:"Create telemetry middleware."}),"\n",(0,n.jsx)(r.p,{children:"Tracks metrics and events for monitoring and observability."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-17",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#telemetryconfig",children:(0,n.jsx)(r.code,{children:"TelemetryConfig"})})}),(0,n.jsx)(r.td,{children:"Telemetry configuration"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-23",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})})}),"\n",(0,n.jsx)(r.p,{children:"Telemetry middleware"}),"\n",(0,n.jsx)(r.h4,{id:"example-12",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const telemetry = createTelemetryMiddleware({\n  sink: {\n    recordMetric: (name, value, tags) => {\n      console.log(`Metric: ${name} = ${value}`, tags);\n    },\n    recordEvent: (name, data) => {\n      console.log(`Event: ${name}`, data);\n    }\n  },\n  trackCounts: true,\n  trackLatencies: true,\n  trackTokens: true\n});\n\nbridge.use(telemetry);\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createtransformmiddleware",children:"createTransformMiddleware()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createTransformMiddleware(config: TransformConfig): Middleware;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L81",children:"packages/middleware/src/transform.ts:81"})]}),"\n",(0,n.jsx)(r.p,{children:"Create transform middleware."}),"\n",(0,n.jsx)(r.p,{children:"Applies custom transformations to requests and responses."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-18",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#transformconfig",children:(0,n.jsx)(r.code,{children:"TransformConfig"})})}),(0,n.jsx)(r.td,{children:"Transform configuration"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-24",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})})}),"\n",(0,n.jsx)(r.p,{children:"Transform middleware"}),"\n",(0,n.jsx)(r.h4,{id:"example-13",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"// Add system message prefix\nconst transform = createTransformMiddleware({\n  transformRequest: (request) => ({\n    ...request,\n    messages: [\n      { role: 'system', content: 'You are helpful.' },\n      ...request.messages\n    ]\n  })\n});\n\nbridge.use(transform);\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createpromptrewriter",children:"createPromptRewriter()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createPromptRewriter(rewriter: (text: string) => string | Promise<string>): MessageTransformer;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L136",children:"packages/middleware/src/transform.ts:136"})]}),"\n",(0,n.jsx)(r.p,{children:"Create a prompt rewriting transformer."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-19",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"rewriter"})}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:"text"}),": ",(0,n.jsx)(r.code,{children:"string"}),") => ",(0,n.jsx)(r.code,{children:"string"})," | ",(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"string"}),">"]}),(0,n.jsx)(r.td,{children:"Function to rewrite prompt text"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-25",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#messagetransformer",children:(0,n.jsx)(r.code,{children:"MessageTransformer"})})}),"\n",(0,n.jsx)(r.p,{children:"Message transformer"}),"\n",(0,n.jsx)(r.h4,{id:"example-14",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const transformer = createPromptRewriter((text) => {\n  return text.replace(/foo/g, 'bar');\n});\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createparametermodifier",children:"createParameterModifier()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createParameterModifier(modifier: (params: IRParameters) => \n  | IRParameters\n  | Promise<IRParameters>): RequestTransformer;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L186",children:"packages/middleware/src/transform.ts:186"})]}),"\n",(0,n.jsx)(r.p,{children:"Create a parameter modifier transformer."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-20",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"modifier"})}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:"params"}),": ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irparameters",children:(0,n.jsx)(r.code,{children:"IRParameters"})}),") => | ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irparameters",children:(0,n.jsx)(r.code,{children:"IRParameters"})})," | ",(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irparameters",children:(0,n.jsx)(r.code,{children:"IRParameters"})}),">"]}),(0,n.jsx)(r.td,{children:"Function to modify parameters"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-26",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#requesttransformer",children:(0,n.jsx)(r.code,{children:"RequestTransformer"})})}),"\n",(0,n.jsx)(r.p,{children:"Request transformer"}),"\n",(0,n.jsx)(r.h4,{id:"example-15",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const transformer = createParameterModifier((params) => ({\n  ...params,\n  temperature: Math.min(params.temperature ?? 0.7, 0.9)\n}));\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createresponsefilter",children:"createResponseFilter()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createResponseFilter(filter: (response: IRChatResponse) => \n  | IRChatResponse\n  | Promise<IRChatResponse>): ResponseTransformer;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L214",children:"packages/middleware/src/transform.ts:214"})]}),"\n",(0,n.jsx)(r.p,{children:"Create a response filter transformer."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-21",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"filter"})}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:"response"}),": ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irchatresponse",children:(0,n.jsx)(r.code,{children:"IRChatResponse"})}),") => | ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irchatresponse",children:(0,n.jsx)(r.code,{children:"IRChatResponse"})})," | ",(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irchatresponse",children:(0,n.jsx)(r.code,{children:"IRChatResponse"})}),">"]}),(0,n.jsx)(r.td,{children:"Function to filter/modify response"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-27",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#responsetransformer",children:(0,n.jsx)(r.code,{children:"ResponseTransformer"})})}),"\n",(0,n.jsx)(r.p,{children:"Response transformer"}),"\n",(0,n.jsx)(r.h4,{id:"example-16",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const transformer = createResponseFilter((response) => {\n  // Remove custom metadata\n  const { custom, ...metadata } = response.metadata;\n  return { ...response, metadata };\n});\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createsystemmessageinjector",children:"createSystemMessageInjector()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:'function createSystemMessageInjector(systemMessage: string, position: "start" | "end"): RequestTransformer;\n'})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L235",children:"packages/middleware/src/transform.ts:235"})]}),"\n",(0,n.jsx)(r.p,{children:"Create a system message injector."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-22",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"systemMessage"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"undefined"})}),(0,n.jsx)(r.td,{children:"System message to inject"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"position"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:'"start"'})," | ",(0,n.jsx)(r.code,{children:'"end"'})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'start'"})}),(0,n.jsx)(r.td,{children:"Where to inject ('start' or 'end')"})]})]})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-28",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#requesttransformer",children:(0,n.jsx)(r.code,{children:"RequestTransformer"})})}),"\n",(0,n.jsx)(r.p,{children:"Request transformer"}),"\n",(0,n.jsx)(r.h4,{id:"example-17",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const transformer = createSystemMessageInjector(\n  'You are a helpful assistant.',\n  'start'\n);\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createmessagefilter",children:"createMessageFilter()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createMessageFilter(predicate: (message: IRMessage) => boolean | Promise<boolean>): RequestTransformer;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L269",children:"packages/middleware/src/transform.ts:269"})]}),"\n",(0,n.jsx)(r.p,{children:"Create a message filter transformer."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-23",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"predicate"})}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:"message"}),": ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irmessage",children:(0,n.jsx)(r.code,{children:"IRMessage"})}),") => ",(0,n.jsx)(r.code,{children:"boolean"})," | ",(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"boolean"}),">"]}),(0,n.jsx)(r.td,{children:"Function to determine if message should be kept"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-29",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#requesttransformer",children:(0,n.jsx)(r.code,{children:"RequestTransformer"})})}),"\n",(0,n.jsx)(r.p,{children:"Request transformer"}),"\n",(0,n.jsx)(r.h4,{id:"example-18",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"// Remove all system messages\nconst transformer = createMessageFilter(\n  (msg) => msg.role !== 'system'\n);\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createcontentsanitizer",children:"createContentSanitizer()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createContentSanitizer(sanitizer: (text: string) => string | Promise<string>): MessageTransformer;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L302",children:"packages/middleware/src/transform.ts:302"})]}),"\n",(0,n.jsx)(r.p,{children:"Create a content sanitizer transformer."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-24",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"sanitizer"})}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:"text"}),": ",(0,n.jsx)(r.code,{children:"string"}),") => ",(0,n.jsx)(r.code,{children:"string"})," | ",(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"string"}),">"]}),(0,n.jsx)(r.td,{children:"Function to sanitize message content"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-30",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#messagetransformer",children:(0,n.jsx)(r.code,{children:"MessageTransformer"})})}),"\n",(0,n.jsx)(r.p,{children:"Message transformer"}),"\n",(0,n.jsx)(r.h4,{id:"example-19",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"// Remove sensitive data\nconst transformer = createContentSanitizer((text) => {\n  return text.replace(/\\b\\d{3}-\\d{2}-\\d{4}\\b/g, '[SSN]');\n});\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"composerequesttransformers",children:"composeRequestTransformers()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function composeRequestTransformers(...transformers: RequestTransformer[]): RequestTransformer;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L322",children:"packages/middleware/src/transform.ts:322"})]}),"\n",(0,n.jsx)(r.p,{children:"Compose multiple request transformers."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-25",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:["...",(0,n.jsx)(r.code,{children:"transformers"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#requesttransformer",children:(0,n.jsx)(r.code,{children:"RequestTransformer"})}),"[]"]}),(0,n.jsx)(r.td,{children:"Request transformers to compose"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-31",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#requesttransformer",children:(0,n.jsx)(r.code,{children:"RequestTransformer"})})}),"\n",(0,n.jsx)(r.p,{children:"Composed request transformer"}),"\n",(0,n.jsx)(r.h4,{id:"example-20",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const composed = composeRequestTransformers(\n  createSystemMessageInjector('Be helpful'),\n  createParameterModifier(params => ({ ...params, temperature: 0.7 }))\n);\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"composeresponsetransformers",children:"composeResponseTransformers()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function composeResponseTransformers(...transformers: ResponseTransformer[]): ResponseTransformer;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L342",children:"packages/middleware/src/transform.ts:342"})]}),"\n",(0,n.jsx)(r.p,{children:"Compose multiple response transformers."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-26",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:["...",(0,n.jsx)(r.code,{children:"transformers"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#responsetransformer",children:(0,n.jsx)(r.code,{children:"ResponseTransformer"})}),"[]"]}),(0,n.jsx)(r.td,{children:"Response transformers to compose"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-32",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#responsetransformer",children:(0,n.jsx)(r.code,{children:"ResponseTransformer"})})}),"\n",(0,n.jsx)(r.p,{children:"Composed response transformer"}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"composemessagetransformers",children:"composeMessageTransformers()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function composeMessageTransformers(...transformers: MessageTransformer[]): MessageTransformer;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L362",children:"packages/middleware/src/transform.ts:362"})]}),"\n",(0,n.jsx)(r.p,{children:"Compose multiple message transformers."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-27",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:["...",(0,n.jsx)(r.code,{children:"transformers"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#messagetransformer",children:(0,n.jsx)(r.code,{children:"MessageTransformer"})}),"[]"]}),(0,n.jsx)(r.td,{children:"Message transformers to compose"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-33",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#messagetransformer",children:(0,n.jsx)(r.code,{children:"MessageTransformer"})})}),"\n",(0,n.jsx)(r.p,{children:"Composed message transformer"}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"detectpii",children:"detectPII()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function detectPII(text: string, patterns: Record<string, RegExp>): PIIDetectionResult;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L313",children:"packages/middleware/src/validation.ts:313"})]}),"\n",(0,n.jsx)(r.p,{children:"Detect PII in text"}),"\n",(0,n.jsx)(r.h4,{id:"parameters-28",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Default value"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"text"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"undefined"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"patterns"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"RegExp"}),">"]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"DEFAULT_PII_PATTERNS"})})]})]})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-34",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#piidetectionresult",children:(0,n.jsx)(r.code,{children:"PIIDetectionResult"})})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"redactpii",children:"redactPII()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function redactPII(text: string, patterns: Record<string, RegExp>): string;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L340",children:"packages/middleware/src/validation.ts:340"})]}),"\n",(0,n.jsx)(r.p,{children:"Redact PII from text"}),"\n",(0,n.jsx)(r.h4,{id:"parameters-29",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Default value"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"text"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"undefined"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"patterns"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"RegExp"}),">"]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"DEFAULT_PII_PATTERNS"})})]})]})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-35",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"string"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"detectpromptinjection",children:"detectPromptInjection()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function detectPromptInjection(text: string, patterns: RegExp[]): boolean;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L356",children:"packages/middleware/src/validation.ts:356"})]}),"\n",(0,n.jsx)(r.p,{children:"Detect prompt injection attempts"}),"\n",(0,n.jsx)(r.h4,{id:"parameters-30",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Default value"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"text"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"undefined"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"patterns"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"RegExp"}),"[]"]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"DEFAULT_INJECTION_PATTERNS"})})]})]})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-36",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"boolean"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"sanitizetext",children:"sanitizeText()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function sanitizeText(text: string): string;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L366",children:"packages/middleware/src/validation.ts:366"})]}),"\n",(0,n.jsx)(r.p,{children:"Sanitize text content"}),"\n",(0,n.jsx)(r.h4,{id:"parameters-31",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"text"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-37",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"string"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"validaterequest",children:"validateRequest()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function validateRequest(request: IRChatRequest, config: ValidationConfig): Promise<ValidationResult>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L404",children:"packages/middleware/src/validation.ts:404"})]}),"\n",(0,n.jsx)(r.p,{children:"Validate request"}),"\n",(0,n.jsx)(r.h4,{id:"parameters-32",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"request"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irchatrequest",children:(0,n.jsx)(r.code,{children:"IRChatRequest"})})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#validationconfig",children:(0,n.jsx)(r.code,{children:"ValidationConfig"})})})]})]})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-38",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#validationresult",children:(0,n.jsx)(r.code,{children:"ValidationResult"})}),">"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"sanitizerequest",children:"sanitizeRequest()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function sanitizeRequest(request: IRChatRequest, config: ValidationConfig): IRChatRequest;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L596",children:"packages/middleware/src/validation.ts:596"})]}),"\n",(0,n.jsx)(r.p,{children:"Sanitize request"}),"\n",(0,n.jsx)(r.h4,{id:"parameters-33",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"request"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irchatrequest",children:(0,n.jsx)(r.code,{children:"IRChatRequest"})})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#validationconfig",children:(0,n.jsx)(r.code,{children:"ValidationConfig"})})})]})]})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-39",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irchatrequest",children:(0,n.jsx)(r.code,{children:"IRChatRequest"})})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createvalidationmiddleware",children:"createValidationMiddleware()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createValidationMiddleware(config: ValidationConfig): Middleware;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L752",children:"packages/middleware/src/validation.ts:752"})]}),"\n",(0,n.jsx)(r.p,{children:"Create input validation middleware"}),"\n",(0,n.jsx)(r.p,{children:"Validates and sanitizes requests to prevent security issues and ensure data quality."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-34",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#validationconfig",children:(0,n.jsx)(r.code,{children:"ValidationConfig"})})}),(0,n.jsx)(r.td,{children:"Validation configuration"})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-40",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})})}),"\n",(0,n.jsx)(r.p,{children:"Middleware function"}),"\n",(0,n.jsx)(r.h4,{id:"examples-3",children:"Examples"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"import { createValidationMiddleware } from 'ai.matey';\n\nconst validation = createValidationMiddleware({\n  maxMessages: 100,\n  maxTotalTokens: 128000,\n  preventPromptInjection: true,\n});\n\nbridge.use(validation);\n"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const validation = createValidationMiddleware({\n  detectPII: true,\n  piiAction: 'redact', // or 'block', 'warn', 'log'\n  piiPatterns: {\n    email: /\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b/g,\n    ssn: /\\b\\d{3}-\\d{2}-\\d{4}\\b/g,\n  },\n});\n"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const validation = createValidationMiddleware({\n  moderationCallback: async (content) => {\n    // Call external moderation API\n    const result = await moderationAPI.check(content);\n    return {\n      flagged: result.flagged,\n      categories: result.categories,\n      scores: result.scores,\n    };\n  },\n  blockFlaggedContent: true,\n});\n"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const validation = createValidationMiddleware({\n  customValidator: async (request) => {\n    const errors: ValidationError[] = [];\n\n    // Custom business logic\n    if (request.messages.some(m => m.content.includes('forbidden'))) {\n      errors.push(new ValidationError(\n        'Forbidden content detected',\n        'messages',\n        'forbidden'\n      ));\n    }\n\n    return errors;\n  },\n});\n"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"const validation = createValidationMiddleware({\n  maxMessages: 100,\n  maxTotalTokens: 128000,\n  maxTokensPerMessage: 32000,\n  maxMessageLength: 100000,\n  blockEmptyMessages: true,\n  detectPII: true,\n  piiAction: 'redact',\n  preventPromptInjection: true,\n  sanitizeMessages: true,\n  validateModel: true,\n  allowedModels: ['gpt-4', 'claude-3-sonnet', 'gemini-pro'],\n  validateTemperature: true,\n  temperatureRange: [0, 2],\n  throwOnError: true,\n  logWarnings: true,\n});\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createproductionvalidationmiddleware",children:"createProductionValidationMiddleware()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createProductionValidationMiddleware(): Middleware;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L800",children:"packages/middleware/src/validation.ts:800"})]}),"\n",(0,n.jsx)(r.p,{children:"Create production-ready validation middleware with strict settings"}),"\n",(0,n.jsx)(r.h4,{id:"returns-41",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})})}),"\n",(0,n.jsx)(r.p,{children:"Middleware with production validation settings"}),"\n",(0,n.jsx)(r.h4,{id:"example-21",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"import { createProductionValidationMiddleware } from 'ai.matey';\n\nbridge.use(createProductionValidationMiddleware());\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"createdevelopmentvalidationmiddleware",children:"createDevelopmentValidationMiddleware()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"function createDevelopmentValidationMiddleware(): Middleware;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L828",children:"packages/middleware/src/validation.ts:828"})]}),"\n",(0,n.jsx)(r.p,{children:"Create development-friendly validation middleware with relaxed settings"}),"\n",(0,n.jsx)(r.h4,{id:"returns-42",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#middleware-1",children:(0,n.jsx)(r.code,{children:"Middleware"})})}),"\n",(0,n.jsx)(r.p,{children:"Middleware with development validation settings"}),"\n",(0,n.jsx)(r.h4,{id:"example-22",children:"Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"import { createDevelopmentValidationMiddleware } from 'ai.matey';\n\nbridge.use(createDevelopmentValidationMiddleware());\n"})}),"\n",(0,n.jsx)(r.h2,{id:"classes",children:"Classes"}),"\n",(0,n.jsx)(r.h3,{id:"inmemorycachestorage",children:"InMemoryCacheStorage"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L93",children:"packages/middleware/src/caching.ts:93"})]}),"\n",(0,n.jsx)(r.p,{children:"In-memory cache storage with LRU eviction."}),"\n",(0,n.jsx)(r.h4,{id:"implements",children:"Implements"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#cachestorage",children:(0,n.jsx)(r.code,{children:"CacheStorage"})})}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"constructors",children:"Constructors"}),"\n",(0,n.jsx)(r.h5,{id:"constructor",children:"Constructor"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"new InMemoryCacheStorage(maxSize: number): InMemoryCacheStorage;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L98",children:"packages/middleware/src/caching.ts:98"})]}),"\n",(0,n.jsx)(r.h6,{id:"parameters-35",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Default value"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"maxSize"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"1000"})})]})})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-43",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#inmemorycachestorage",children:(0,n.jsx)(r.code,{children:"InMemoryCacheStorage"})})}),"\n",(0,n.jsx)(r.h4,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(r.h5,{id:"get",children:"get()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"get(key: string): Promise<IRChatResponse>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L102",children:"packages/middleware/src/caching.ts:102"})]}),"\n",(0,n.jsx)(r.h6,{id:"parameters-36",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"key"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})})]})})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-44",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irchatresponse",children:(0,n.jsx)(r.code,{children:"IRChatResponse"})}),">"]}),"\n",(0,n.jsx)(r.h6,{id:"implementation-of",children:"Implementation of"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#cachestorage",children:(0,n.jsx)(r.code,{children:"CacheStorage"})}),".",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#get",children:(0,n.jsx)(r.code,{children:"get"})})]}),"\n",(0,n.jsx)(r.h5,{id:"set",children:"set()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"set(\n   key: string, \n   value: IRChatResponse, \nttl: number): Promise<void>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L122",children:"packages/middleware/src/caching.ts:122"})]}),"\n",(0,n.jsx)(r.h6,{id:"parameters-37",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Default value"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"key"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"undefined"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"value"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irchatresponse",children:(0,n.jsx)(r.code,{children:"IRChatResponse"})})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"undefined"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"ttl"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"3600000"})})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-45",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"void"}),">"]}),"\n",(0,n.jsx)(r.h6,{id:"implementation-of-1",children:"Implementation of"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#cachestorage",children:(0,n.jsx)(r.code,{children:"CacheStorage"})}),".",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#set",children:(0,n.jsx)(r.code,{children:"set"})})]}),"\n",(0,n.jsx)(r.h5,{id:"has",children:"has()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"has(key: string): Promise<boolean>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L140",children:"packages/middleware/src/caching.ts:140"})]}),"\n",(0,n.jsx)(r.h6,{id:"parameters-38",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"key"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})})]})})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-46",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"boolean"}),">"]}),"\n",(0,n.jsx)(r.h6,{id:"implementation-of-2",children:"Implementation of"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#cachestorage",children:(0,n.jsx)(r.code,{children:"CacheStorage"})}),".",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#has",children:(0,n.jsx)(r.code,{children:"has"})})]}),"\n",(0,n.jsx)(r.h5,{id:"delete",children:"delete()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"delete(key: string): Promise<boolean>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L157",children:"packages/middleware/src/caching.ts:157"})]}),"\n",(0,n.jsx)(r.h6,{id:"parameters-39",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"key"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})})]})})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-47",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"boolean"}),">"]}),"\n",(0,n.jsx)(r.h6,{id:"implementation-of-3",children:"Implementation of"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#cachestorage",children:(0,n.jsx)(r.code,{children:"CacheStorage"})}),".",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#delete",children:(0,n.jsx)(r.code,{children:"delete"})})]}),"\n",(0,n.jsx)(r.h5,{id:"clear",children:"clear()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"clear(): Promise<void>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L162",children:"packages/middleware/src/caching.ts:162"})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-48",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"void"}),">"]}),"\n",(0,n.jsx)(r.h6,{id:"implementation-of-4",children:"Implementation of"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#cachestorage",children:(0,n.jsx)(r.code,{children:"CacheStorage"})}),".",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#clear",children:(0,n.jsx)(r.code,{children:"clear"})})]}),"\n",(0,n.jsx)(r.h5,{id:"getstats",children:"getStats()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"getStats(): {\n  size: number;\n  maxSize: number;\n  hitRate?: number;\n};\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L171",children:"packages/middleware/src/caching.ts:171"})]}),"\n",(0,n.jsx)(r.p,{children:"Get cache statistics."}),"\n",(0,n.jsx)(r.h6,{id:"returns-49",children:"Returns"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"{\n  size: number;\n  maxSize: number;\n  hitRate?: number;\n}\n"})}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Name"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"size"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L171",children:"packages/middleware/src/caching.ts:171"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"maxSize"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L171",children:"packages/middleware/src/caching.ts:171"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"hitRate?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L171",children:"packages/middleware/src/caching.ts:171"})})]})]})]}),"\n",(0,n.jsx)(r.h5,{id:"cleanup",children:"cleanup()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"cleanup(): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L219",children:"packages/middleware/src/caching.ts:219"})]}),"\n",(0,n.jsx)(r.p,{children:"Clean up expired entries."}),"\n",(0,n.jsx)(r.h6,{id:"returns-50",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"inmemorycoststorage",children:"InMemoryCostStorage"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L146",children:"packages/middleware/src/cost-tracking.ts:146"})]}),"\n",(0,n.jsx)(r.p,{children:"In-memory cost storage"}),"\n",(0,n.jsx)(r.h4,{id:"implements-1",children:"Implements"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#coststorage",children:(0,n.jsx)(r.code,{children:"CostStorage"})})}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"constructors-1",children:"Constructors"}),"\n",(0,n.jsx)(r.h5,{id:"constructor-1",children:"Constructor"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"new InMemoryCostStorage(): InMemoryCostStorage;\n"})}),"\n",(0,n.jsx)(r.h6,{id:"returns-51",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#inmemorycoststorage",children:(0,n.jsx)(r.code,{children:"InMemoryCostStorage"})})}),"\n",(0,n.jsx)(r.h4,{id:"methods-1",children:"Methods"}),"\n",(0,n.jsx)(r.h5,{id:"record",children:"record()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"record(cost: CostCalculation): Promise<void>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L149",children:"packages/middleware/src/cost-tracking.ts:149"})]}),"\n",(0,n.jsx)(r.p,{children:"Record a cost calculation"}),"\n",(0,n.jsx)(r.h6,{id:"parameters-40",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"cost"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#costcalculation",children:(0,n.jsx)(r.code,{children:"CostCalculation"})})})]})})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-52",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"void"}),">"]}),"\n",(0,n.jsx)(r.h6,{id:"implementation-of-5",children:"Implementation of"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#coststorage",children:(0,n.jsx)(r.code,{children:"CostStorage"})}),".",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#record",children:(0,n.jsx)(r.code,{children:"record"})})]}),"\n",(0,n.jsx)(r.h5,{id:"gettotal",children:"getTotal()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"getTotal(startTime?: number, endTime?: number): Promise<number>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L154",children:"packages/middleware/src/cost-tracking.ts:154"})]}),"\n",(0,n.jsx)(r.p,{children:"Get total cost for a time period"}),"\n",(0,n.jsx)(r.h6,{id:"parameters-41",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"startTime?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"endTime?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-53",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"number"}),">"]}),"\n",(0,n.jsx)(r.h6,{id:"implementation-of-6",children:"Implementation of"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#coststorage",children:(0,n.jsx)(r.code,{children:"CostStorage"})}),".",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#gettotal",children:(0,n.jsx)(r.code,{children:"getTotal"})})]}),"\n",(0,n.jsx)(r.h5,{id:"getbyprovider",children:"getByProvider()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"getByProvider(startTime?: number, endTime?: number): Promise<Map<string, number>>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L160",children:"packages/middleware/src/cost-tracking.ts:160"})]}),"\n",(0,n.jsx)(r.p,{children:"Get costs grouped by provider"}),"\n",(0,n.jsx)(r.h6,{id:"parameters-42",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"startTime?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"endTime?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-54",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"Map"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"number"}),">>"]}),"\n",(0,n.jsx)(r.h6,{id:"implementation-of-7",children:"Implementation of"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#coststorage",children:(0,n.jsx)(r.code,{children:"CostStorage"})}),".",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#getbyprovider",children:(0,n.jsx)(r.code,{children:"getByProvider"})})]}),"\n",(0,n.jsx)(r.h5,{id:"getbymodel",children:"getByModel()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"getByModel(startTime?: number, endTime?: number): Promise<Map<string, number>>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L169",children:"packages/middleware/src/cost-tracking.ts:169"})]}),"\n",(0,n.jsx)(r.p,{children:"Get costs grouped by model"}),"\n",(0,n.jsx)(r.h6,{id:"parameters-43",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"startTime?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"endTime?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-55",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"Map"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"number"}),">>"]}),"\n",(0,n.jsx)(r.h6,{id:"implementation-of-8",children:"Implementation of"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#coststorage",children:(0,n.jsx)(r.code,{children:"CostStorage"})}),".",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#getbymodel",children:(0,n.jsx)(r.code,{children:"getByModel"})})]}),"\n",(0,n.jsx)(r.h5,{id:"clear-1",children:"clear()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"clear(): Promise<void>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L178",children:"packages/middleware/src/cost-tracking.ts:178"})]}),"\n",(0,n.jsx)(r.p,{children:"Clear all cost data"}),"\n",(0,n.jsx)(r.h6,{id:"returns-56",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"void"}),">"]}),"\n",(0,n.jsx)(r.h6,{id:"implementation-of-9",children:"Implementation of"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#coststorage",children:(0,n.jsx)(r.code,{children:"CostStorage"})}),".",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#clear-4",children:(0,n.jsx)(r.code,{children:"clear"})})]}),"\n",(0,n.jsx)(r.h5,{id:"getallcosts",children:"getAllCosts()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"getAllCosts(): CostCalculation[];\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L198",children:"packages/middleware/src/cost-tracking.ts:198"})]}),"\n",(0,n.jsx)(r.p,{children:"Get all cost records (for debugging/export)"}),"\n",(0,n.jsx)(r.h6,{id:"returns-57",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#costcalculation",children:(0,n.jsx)(r.code,{children:"CostCalculation"})}),"[]"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"opentelemetrytelemetrysink",children:"OpenTelemetryTelemetrySink"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L506",children:"packages/middleware/src/opentelemetry.ts:506"})]}),"\n",(0,n.jsx)(r.p,{children:"OpenTelemetry-based telemetry sink."}),"\n",(0,n.jsx)(r.p,{children:"Implements the TelemetrySink interface using OpenTelemetry metrics.\nThis allows you to use the existing telemetry middleware with OpenTelemetry."}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Note:"})," Currently uses spans for metrics as the OpenTelemetry metrics API\nis still evolving. Consider using createOpenTelemetryMiddleware for full\ntracing support."]}),"\n",(0,n.jsx)(r.h4,{id:"implements-2",children:"Implements"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#telemetrysink",children:(0,n.jsx)(r.code,{children:"TelemetrySink"})})}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"methods-2",children:"Methods"}),"\n",(0,n.jsx)(r.h5,{id:"create",children:"create()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"static create(config: OpenTelemetryConfig): Promise<OpenTelemetryTelemetrySink>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L520",children:"packages/middleware/src/opentelemetry.ts:520"})]}),"\n",(0,n.jsx)(r.p,{children:"Create a new OpenTelemetryTelemetrySink instance."}),"\n",(0,n.jsx)(r.h6,{id:"parameters-44",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#opentelemetryconfig",children:(0,n.jsx)(r.code,{children:"OpenTelemetryConfig"})})}),(0,n.jsx)(r.td,{children:"OpenTelemetry configuration"})]})})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-58",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#opentelemetrytelemetrysink",children:(0,n.jsx)(r.code,{children:"OpenTelemetryTelemetrySink"})}),">"]}),"\n",(0,n.jsx)(r.p,{children:"Promise that resolves to a new sink instance"}),"\n",(0,n.jsx)(r.h6,{id:"throws-1",children:"Throws"}),"\n",(0,n.jsx)(r.p,{children:"Error if OpenTelemetry packages are not installed"}),"\n",(0,n.jsx)(r.h5,{id:"recordmetric",children:"recordMetric()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"recordMetric(\n   name: string, \n   value: number, \n   tags?: Record<string, string>): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L541",children:"packages/middleware/src/opentelemetry.ts:541"})]}),"\n",(0,n.jsx)(r.p,{children:"Record a metric."}),"\n",(0,n.jsx)(r.h6,{id:"parameters-45",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"name"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"value"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"tags?"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"string"}),">"]})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-59",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.h6,{id:"implementation-of-10",children:"Implementation of"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#telemetrysink",children:(0,n.jsx)(r.code,{children:"TelemetrySink"})}),".",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#recordmetric",children:(0,n.jsx)(r.code,{children:"recordMetric"})})]}),"\n",(0,n.jsx)(r.h5,{id:"recordevent",children:"recordEvent()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"recordEvent(name: string, data?: Record<string, unknown>): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L553",children:"packages/middleware/src/opentelemetry.ts:553"})]}),"\n",(0,n.jsx)(r.p,{children:"Record an event."}),"\n",(0,n.jsx)(r.h6,{id:"parameters-46",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"name"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"data?"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"unknown"}),">"]})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-60",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.h6,{id:"implementation-of-11",children:"Implementation of"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#telemetrysink",children:(0,n.jsx)(r.code,{children:"TelemetrySink"})}),".",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#recordevent",children:(0,n.jsx)(r.code,{children:"recordEvent"})})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"consoletelemetrysink",children:"ConsoleTelemetrySink"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L268",children:"packages/middleware/src/telemetry.ts:268"})]}),"\n",(0,n.jsx)(r.p,{children:"Console telemetry sink for development/debugging."}),"\n",(0,n.jsx)(r.h4,{id:"implements-3",children:"Implements"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#telemetrysink",children:(0,n.jsx)(r.code,{children:"TelemetrySink"})})}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"constructors-2",children:"Constructors"}),"\n",(0,n.jsx)(r.h5,{id:"constructor-2",children:"Constructor"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"new ConsoleTelemetrySink(): ConsoleTelemetrySink;\n"})}),"\n",(0,n.jsx)(r.h6,{id:"returns-61",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#consoletelemetrysink",children:(0,n.jsx)(r.code,{children:"ConsoleTelemetrySink"})})}),"\n",(0,n.jsx)(r.h4,{id:"methods-3",children:"Methods"}),"\n",(0,n.jsx)(r.h5,{id:"recordmetric-1",children:"recordMetric()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"recordMetric(\n   name: string, \n   value: number, \n   tags?: Record<string, string>): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L269",children:"packages/middleware/src/telemetry.ts:269"})]}),"\n",(0,n.jsx)(r.p,{children:"Record a metric."}),"\n",(0,n.jsx)(r.h6,{id:"parameters-47",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"name"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"value"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"tags?"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"string"}),">"]})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-62",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.h6,{id:"implementation-of-12",children:"Implementation of"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#telemetrysink",children:(0,n.jsx)(r.code,{children:"TelemetrySink"})}),".",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#recordmetric",children:(0,n.jsx)(r.code,{children:"recordMetric"})})]}),"\n",(0,n.jsx)(r.h5,{id:"recordevent-1",children:"recordEvent()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"recordEvent(name: string, data?: Record<string, unknown>): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L273",children:"packages/middleware/src/telemetry.ts:273"})]}),"\n",(0,n.jsx)(r.p,{children:"Record an event."}),"\n",(0,n.jsx)(r.h6,{id:"parameters-48",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"name"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"data?"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"unknown"}),">"]})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-63",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.h6,{id:"implementation-of-13",children:"Implementation of"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#telemetrysink",children:(0,n.jsx)(r.code,{children:"TelemetrySink"})}),".",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#recordevent",children:(0,n.jsx)(r.code,{children:"recordEvent"})})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"inmemorytelemetrysink",children:"InMemoryTelemetrySink"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L281",children:"packages/middleware/src/telemetry.ts:281"})]}),"\n",(0,n.jsx)(r.p,{children:"In-memory telemetry sink for testing."}),"\n",(0,n.jsx)(r.h4,{id:"implements-4",children:"Implements"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#telemetrysink",children:(0,n.jsx)(r.code,{children:"TelemetrySink"})})}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"constructors-3",children:"Constructors"}),"\n",(0,n.jsx)(r.h5,{id:"constructor-3",children:"Constructor"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"new InMemoryTelemetrySink(): InMemoryTelemetrySink;\n"})}),"\n",(0,n.jsx)(r.h6,{id:"returns-64",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#inmemorytelemetrysink",children:(0,n.jsx)(r.code,{children:"InMemoryTelemetrySink"})})}),"\n",(0,n.jsx)(r.h4,{id:"methods-4",children:"Methods"}),"\n",(0,n.jsx)(r.h5,{id:"recordmetric-2",children:"recordMetric()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"recordMetric(\n   name: string, \n   value: number, \n   tags?: Record<string, string>): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L285",children:"packages/middleware/src/telemetry.ts:285"})]}),"\n",(0,n.jsx)(r.p,{children:"Record a metric."}),"\n",(0,n.jsx)(r.h6,{id:"parameters-49",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"name"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"value"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"tags?"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"string"}),">"]})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-65",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.h6,{id:"implementation-of-14",children:"Implementation of"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#telemetrysink",children:(0,n.jsx)(r.code,{children:"TelemetrySink"})}),".",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#recordmetric",children:(0,n.jsx)(r.code,{children:"recordMetric"})})]}),"\n",(0,n.jsx)(r.h5,{id:"recordevent-2",children:"recordEvent()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"recordEvent(name: string, data?: Record<string, unknown>): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L289",children:"packages/middleware/src/telemetry.ts:289"})]}),"\n",(0,n.jsx)(r.p,{children:"Record an event."}),"\n",(0,n.jsx)(r.h6,{id:"parameters-50",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"name"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"data?"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"unknown"}),">"]})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-66",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.h6,{id:"implementation-of-15",children:"Implementation of"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#telemetrysink",children:(0,n.jsx)(r.code,{children:"TelemetrySink"})}),".",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#recordevent",children:(0,n.jsx)(r.code,{children:"recordEvent"})})]}),"\n",(0,n.jsx)(r.h5,{id:"getmetrics",children:"getMetrics()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"getMetrics(): {\n  name: string;\n  value: number;\n  tags?: Record<string, string>;\n}[];\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L293",children:"packages/middleware/src/telemetry.ts:293"})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-67",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:["{\n",(0,n.jsx)(r.code,{children:"name"}),": ",(0,n.jsx)(r.code,{children:"string"}),";\n",(0,n.jsx)(r.code,{children:"value"}),": ",(0,n.jsx)(r.code,{children:"number"}),";\n",(0,n.jsx)(r.code,{children:"tags?"}),": ",(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"string"}),">;\n}[]"]}),"\n",(0,n.jsx)(r.h5,{id:"getevents",children:"getEvents()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"getEvents(): {\n  name: string;\n  data?: Record<string, unknown>;\n}[];\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L297",children:"packages/middleware/src/telemetry.ts:297"})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-68",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:["{\n",(0,n.jsx)(r.code,{children:"name"}),": ",(0,n.jsx)(r.code,{children:"string"}),";\n",(0,n.jsx)(r.code,{children:"data?"}),": ",(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"unknown"}),">;\n}[]"]}),"\n",(0,n.jsx)(r.h5,{id:"clear-2",children:"clear()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"clear(): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L301",children:"packages/middleware/src/telemetry.ts:301"})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-69",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.h2,{id:"interfaces",children:"Interfaces"}),"\n",(0,n.jsx)(r.h3,{id:"cachingconfig",children:"CachingConfig"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L20",children:"packages/middleware/src/caching.ts:20"})]}),"\n",(0,n.jsx)(r.p,{children:"Configuration for caching middleware."}),"\n",(0,n.jsx)(r.h4,{id:"properties",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"keygenerator"})," ",(0,n.jsx)(r.code,{children:"keyGenerator?"})]}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:"request"}),": ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irchatrequest",children:(0,n.jsx)(r.code,{children:"IRChatRequest"})}),") => ",(0,n.jsx)(r.code,{children:"string"})]}),(0,n.jsxs)(r.td,{children:["Cache key generator function. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"Default implementation based on request hash"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L25",children:"packages/middleware/src/caching.ts:25"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"ttl"})," ",(0,n.jsx)(r.code,{children:"ttl?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Cache TTL in milliseconds. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"3600000 (1 hour)"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L31",children:"packages/middleware/src/caching.ts:31"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"maxsize"})," ",(0,n.jsx)(r.code,{children:"maxSize?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Maximum cache size (number of entries). ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"1000"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L37",children:"packages/middleware/src/caching.ts:37"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"storage"})," ",(0,n.jsx)(r.code,{children:"storage?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#cachestorage",children:(0,n.jsx)(r.code,{children:"CacheStorage"})})}),(0,n.jsxs)(r.td,{children:["Cache storage implementation. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"InMemoryCacheStorage"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L43",children:"packages/middleware/src/caching.ts:43"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"cachestreaming"})," ",(0,n.jsx)(r.code,{children:"cacheStreaming?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Whether to cache streaming responses. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"false"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/caching.ts#L49",children:"packages/middleware/src/caching.ts:49"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"conversationhistoryconfig",children:"ConversationHistoryConfig"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L21",children:"packages/middleware/src/conversation-history.ts:21"})]}),"\n",(0,n.jsx)(r.p,{children:"Configuration for conversation history middleware."}),"\n",(0,n.jsx)(r.h4,{id:"properties-1",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"maxhistorysize"})," ",(0,n.jsx)(r.code,{children:"maxHistorySize?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Maximum number of message pairs to keep. - 0: No history (stateless) - -1: Unlimited history - N > 0: Keep last N user/assistant pairs ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"-1 (unlimited)"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L29",children:"packages/middleware/src/conversation-history.ts:29"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"strategy"})," ",(0,n.jsx)(r.code,{children:"strategy?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#trimstrategy",children:(0,n.jsx)(r.code,{children:"TrimStrategy"})})}),(0,n.jsxs)(r.td,{children:["Trimming strategy. - 'fifo': First-in-first-out, remove oldest messages - 'smart': Preserve system messages, trim user/assistant pairs ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"'smart'"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L37",children:"packages/middleware/src/conversation-history.ts:37"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"prependhistory"})," ",(0,n.jsx)(r.code,{children:"prependHistory?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Whether to prepend history to each request. If false, history is maintained but not automatically added to requests. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L44",children:"packages/middleware/src/conversation-history.ts:44"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"trackresponses"})," ",(0,n.jsx)(r.code,{children:"trackResponses?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Whether to append responses to history after each request. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L50",children:"packages/middleware/src/conversation-history.ts:50"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"initialhistory"})," ",(0,n.jsx)(r.code,{children:"initialHistory?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irmessage",children:(0,n.jsx)(r.code,{children:"IRMessage"})}),"[]"]}),(0,n.jsxs)(r.td,{children:["Initial conversation history. Useful for seeding with system messages or previous conversation. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"[]"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L57",children:"packages/middleware/src/conversation-history.ts:57"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"messagefilter"})," ",(0,n.jsx)(r.code,{children:"messageFilter?"})]}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:"message"}),": ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irmessage",children:(0,n.jsx)(r.code,{children:"IRMessage"})}),") => ",(0,n.jsx)(r.code,{children:"boolean"})]}),(0,n.jsxs)(r.td,{children:["Custom filter to determine which messages should be added to history. Return true to include message in history, false to exclude. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"(msg) => true (include all messages)"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L64",children:"packages/middleware/src/conversation-history.ts:64"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"conversationhistorymanager",children:"ConversationHistoryManager"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L70",children:"packages/middleware/src/conversation-history.ts:70"})]}),"\n",(0,n.jsx)(r.p,{children:"Conversation history manager for accessing and manipulating history."}),"\n",(0,n.jsx)(r.h4,{id:"methods-5",children:"Methods"}),"\n",(0,n.jsx)(r.h5,{id:"gethistory",children:"getHistory()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"getHistory(): readonly IRMessage[];\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L74",children:"packages/middleware/src/conversation-history.ts:74"})]}),"\n",(0,n.jsx)(r.p,{children:"Get the current conversation history."}),"\n",(0,n.jsx)(r.h6,{id:"returns-70",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:["readonly ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irmessage",children:(0,n.jsx)(r.code,{children:"IRMessage"})}),"[]"]}),"\n",(0,n.jsx)(r.h5,{id:"addmessage",children:"addMessage()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"addMessage(message: IRMessage): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L80",children:"packages/middleware/src/conversation-history.ts:80"})]}),"\n",(0,n.jsx)(r.p,{children:"Add a message to the history."}),"\n",(0,n.jsx)(r.h6,{id:"parameters-51",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"message"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irmessage",children:(0,n.jsx)(r.code,{children:"IRMessage"})})}),(0,n.jsx)(r.td,{children:"Message to add"})]})})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-71",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.h5,{id:"addmessages",children:"addMessages()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"addMessages(messages: IRMessage[]): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L86",children:"packages/middleware/src/conversation-history.ts:86"})]}),"\n",(0,n.jsx)(r.p,{children:"Add multiple messages to the history."}),"\n",(0,n.jsx)(r.h6,{id:"parameters-52",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"messages"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irmessage",children:(0,n.jsx)(r.code,{children:"IRMessage"})}),"[]"]}),(0,n.jsx)(r.td,{children:"Messages to add"})]})})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-72",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.h5,{id:"clear-3",children:"clear()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"clear(): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L91",children:"packages/middleware/src/conversation-history.ts:91"})]}),"\n",(0,n.jsx)(r.p,{children:"Clear the conversation history."}),"\n",(0,n.jsx)(r.h6,{id:"returns-73",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.h5,{id:"sethistory",children:"setHistory()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"setHistory(history: IRMessage[]): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L97",children:"packages/middleware/src/conversation-history.ts:97"})]}),"\n",(0,n.jsx)(r.p,{children:"Set the conversation history to a specific state."}),"\n",(0,n.jsx)(r.h6,{id:"parameters-53",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"history"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irmessage",children:(0,n.jsx)(r.code,{children:"IRMessage"})}),"[]"]}),(0,n.jsx)(r.td,{children:"New history state"})]})})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-74",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.h5,{id:"getpaircount",children:"getPairCount()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"getPairCount(): number;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L102",children:"packages/middleware/src/conversation-history.ts:102"})]}),"\n",(0,n.jsx)(r.p,{children:"Get the number of message pairs in history (excluding system messages)."}),"\n",(0,n.jsx)(r.h6,{id:"returns-75",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"number"})}),"\n",(0,n.jsx)(r.h5,{id:"trim",children:"trim()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"trim(): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/conversation-history.ts#L107",children:"packages/middleware/src/conversation-history.ts:107"})]}),"\n",(0,n.jsx)(r.p,{children:"Manually trigger history trimming based on config."}),"\n",(0,n.jsx)(r.h6,{id:"returns-76",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"providerpricing",children:"ProviderPricing"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L16",children:"packages/middleware/src/cost-tracking.ts:16"})]}),"\n",(0,n.jsx)(r.p,{children:"Provider pricing configuration"}),"\n",(0,n.jsx)(r.h4,{id:"properties-2",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"inputcostper1m"})," ",(0,n.jsx)(r.code,{children:"inputCostPer1M"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:"Cost per 1M input tokens (in USD)"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L20",children:"packages/middleware/src/cost-tracking.ts:20"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"outputcostper1m"})," ",(0,n.jsx)(r.code,{children:"outputCostPer1M"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:"Cost per 1M output tokens (in USD)"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L25",children:"packages/middleware/src/cost-tracking.ts:25"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"cachedinputcostper1m"})," ",(0,n.jsx)(r.code,{children:"cachedInputCostPer1M?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:"Optional: Different pricing for cached tokens"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L30",children:"packages/middleware/src/cost-tracking.ts:30"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"imageinputcostper1m"})," ",(0,n.jsx)(r.code,{children:"imageInputCostPer1M?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:"Optional: Different pricing based on request type"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L35",children:"packages/middleware/src/cost-tracking.ts:35"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"modelpricing",children:"ModelPricing"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L41",children:"packages/middleware/src/cost-tracking.ts:41"})]}),"\n",(0,n.jsx)(r.p,{children:"Model-specific pricing"}),"\n",(0,n.jsx)(r.h4,{id:"properties-3",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"model"})," ",(0,n.jsx)(r.code,{children:"model"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"string"})," | ",(0,n.jsx)(r.code,{children:"RegExp"})]}),(0,n.jsx)(r.td,{children:"Model identifier or pattern (supports wildcards)"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L45",children:"packages/middleware/src/cost-tracking.ts:45"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"pricing"})," ",(0,n.jsx)(r.code,{children:"pricing"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#providerpricing",children:(0,n.jsx)(r.code,{children:"ProviderPricing"})})}),(0,n.jsx)(r.td,{children:"Pricing for this model"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L50",children:"packages/middleware/src/cost-tracking.ts:50"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"costcalculation",children:"CostCalculation"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L56",children:"packages/middleware/src/cost-tracking.ts:56"})]}),"\n",(0,n.jsx)(r.p,{children:"Cost calculation result"}),"\n",(0,n.jsx)(r.h4,{id:"properties-4",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"provider"})," ",(0,n.jsx)(r.code,{children:"provider"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})}),(0,n.jsx)(r.td,{children:"Provider name"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L60",children:"packages/middleware/src/cost-tracking.ts:60"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"model-1"})," ",(0,n.jsx)(r.code,{children:"model"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})}),(0,n.jsx)(r.td,{children:"Model used"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L65",children:"packages/middleware/src/cost-tracking.ts:65"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"inputtokens"})," ",(0,n.jsx)(r.code,{children:"inputTokens"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:"Input tokens"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L70",children:"packages/middleware/src/cost-tracking.ts:70"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"outputtokens"})," ",(0,n.jsx)(r.code,{children:"outputTokens"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:"Output tokens"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L75",children:"packages/middleware/src/cost-tracking.ts:75"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"totaltokens"})," ",(0,n.jsx)(r.code,{children:"totalTokens"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:"Total tokens"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L80",children:"packages/middleware/src/cost-tracking.ts:80"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"inputcost"})," ",(0,n.jsx)(r.code,{children:"inputCost"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:"Input cost in USD"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L85",children:"packages/middleware/src/cost-tracking.ts:85"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"outputcost"})," ",(0,n.jsx)(r.code,{children:"outputCost"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:"Output cost in USD"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L90",children:"packages/middleware/src/cost-tracking.ts:90"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"totalcost"})," ",(0,n.jsx)(r.code,{children:"totalCost"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:"Total cost in USD"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L95",children:"packages/middleware/src/cost-tracking.ts:95"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"timestamp"})," ",(0,n.jsx)(r.code,{children:"timestamp"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:"Request timestamp"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L100",children:"packages/middleware/src/cost-tracking.ts:100"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"requestid"})," ",(0,n.jsx)(r.code,{children:"requestId"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})}),(0,n.jsx)(r.td,{children:"Request ID"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L105",children:"packages/middleware/src/cost-tracking.ts:105"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"metadata"})," ",(0,n.jsx)(r.code,{children:"metadata?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"unknown"}),">"]}),(0,n.jsx)(r.td,{children:"Additional metadata"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L110",children:"packages/middleware/src/cost-tracking.ts:110"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"coststorage",children:"CostStorage"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L116",children:"packages/middleware/src/cost-tracking.ts:116"})]}),"\n",(0,n.jsx)(r.p,{children:"Cost tracking storage interface"}),"\n",(0,n.jsx)(r.h4,{id:"methods-6",children:"Methods"}),"\n",(0,n.jsx)(r.h5,{id:"record-1",children:"record()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"record(cost: CostCalculation): Promise<void>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L120",children:"packages/middleware/src/cost-tracking.ts:120"})]}),"\n",(0,n.jsx)(r.p,{children:"Record a cost calculation"}),"\n",(0,n.jsx)(r.h6,{id:"parameters-54",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"cost"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#costcalculation",children:(0,n.jsx)(r.code,{children:"CostCalculation"})})})]})})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-77",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"void"}),">"]}),"\n",(0,n.jsx)(r.h5,{id:"gettotal-1",children:"getTotal()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"getTotal(startTime?: number, endTime?: number): Promise<number>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L125",children:"packages/middleware/src/cost-tracking.ts:125"})]}),"\n",(0,n.jsx)(r.p,{children:"Get total cost for a time period"}),"\n",(0,n.jsx)(r.h6,{id:"parameters-55",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"startTime?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"endTime?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-78",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"number"}),">"]}),"\n",(0,n.jsx)(r.h5,{id:"getbyprovider-1",children:"getByProvider()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"getByProvider(startTime?: number, endTime?: number): Promise<Map<string, number>>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L130",children:"packages/middleware/src/cost-tracking.ts:130"})]}),"\n",(0,n.jsx)(r.p,{children:"Get costs grouped by provider"}),"\n",(0,n.jsx)(r.h6,{id:"parameters-56",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"startTime?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"endTime?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-79",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"Map"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"number"}),">>"]}),"\n",(0,n.jsx)(r.h5,{id:"getbymodel-1",children:"getByModel()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"getByModel(startTime?: number, endTime?: number): Promise<Map<string, number>>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L135",children:"packages/middleware/src/cost-tracking.ts:135"})]}),"\n",(0,n.jsx)(r.p,{children:"Get costs grouped by model"}),"\n",(0,n.jsx)(r.h6,{id:"parameters-57",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"startTime?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"endTime?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-80",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"Map"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"number"}),">>"]}),"\n",(0,n.jsx)(r.h5,{id:"clear-4",children:"clear()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"clear(): Promise<void>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L140",children:"packages/middleware/src/cost-tracking.ts:140"})]}),"\n",(0,n.jsx)(r.p,{children:"Clear all cost data"}),"\n",(0,n.jsx)(r.h6,{id:"returns-81",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"void"}),">"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"costtrackingconfig",children:"CostTrackingConfig"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L206",children:"packages/middleware/src/cost-tracking.ts:206"})]}),"\n",(0,n.jsx)(r.p,{children:"Cost tracking configuration"}),"\n",(0,n.jsx)(r.h4,{id:"properties-5",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"providers"})," ",(0,n.jsx)(r.code,{children:"providers?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#providerpricing",children:(0,n.jsx)(r.code,{children:"ProviderPricing"})}),">"]}),(0,n.jsx)(r.td,{children:"Provider-specific pricing"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L210",children:"packages/middleware/src/cost-tracking.ts:210"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"models"})," ",(0,n.jsx)(r.code,{children:"models?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#modelpricing",children:(0,n.jsx)(r.code,{children:"ModelPricing"})}),"[]"]}),(0,n.jsx)(r.td,{children:"Model-specific pricing (overrides provider pricing)"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L215",children:"packages/middleware/src/cost-tracking.ts:215"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"storage-1"})," ",(0,n.jsx)(r.code,{children:"storage?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#coststorage",children:(0,n.jsx)(r.code,{children:"CostStorage"})})}),(0,n.jsx)(r.td,{children:"Cost storage implementation"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L220",children:"packages/middleware/src/cost-tracking.ts:220"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"oncost"})," ",(0,n.jsx)(r.code,{children:"onCost?"})]}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:"cost"}),": ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#costcalculation",children:(0,n.jsx)(r.code,{children:"CostCalculation"})}),") => ",(0,n.jsx)(r.code,{children:"void"})," | ",(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"void"}),">"]}),(0,n.jsx)(r.td,{children:"Callback when cost is calculated"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L225",children:"packages/middleware/src/cost-tracking.ts:225"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"onthresholdexceeded"})," ",(0,n.jsx)(r.code,{children:"onThresholdExceeded?"})]}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:"cost"}),": ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#costcalculation",children:(0,n.jsx)(r.code,{children:"CostCalculation"})}),", ",(0,n.jsx)(r.code,{children:"threshold"}),": ",(0,n.jsx)(r.code,{children:"number"}),") => ",(0,n.jsx)(r.code,{children:"void"})," | ",(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.code,{children:"void"}),">"]}),(0,n.jsx)(r.td,{children:"Callback when cost threshold is exceeded"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L230",children:"packages/middleware/src/cost-tracking.ts:230"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"requestthreshold"})," ",(0,n.jsx)(r.code,{children:"requestThreshold?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:"Cost threshold per request (in USD)"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L235",children:"packages/middleware/src/cost-tracking.ts:235"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"hourlythreshold"})," ",(0,n.jsx)(r.code,{children:"hourlyThreshold?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:"Cost threshold per hour (in USD)"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L240",children:"packages/middleware/src/cost-tracking.ts:240"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"dailythreshold"})," ",(0,n.jsx)(r.code,{children:"dailyThreshold?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsx)(r.td,{children:"Cost threshold per day (in USD)"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L245",children:"packages/middleware/src/cost-tracking.ts:245"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"logcosts"})," ",(0,n.jsx)(r.code,{children:"logCosts?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsx)(r.td,{children:"Whether to log costs to console"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L250",children:"packages/middleware/src/cost-tracking.ts:250"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"includeinmetadata"})," ",(0,n.jsx)(r.code,{children:"includeInMetadata?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsx)(r.td,{children:"Whether to include cost in response metadata"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L255",children:"packages/middleware/src/cost-tracking.ts:255"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"logger",children:"Logger"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/logging.ts#L24",children:"packages/middleware/src/logging.ts:24"})]}),"\n",(0,n.jsx)(r.p,{children:"Logger interface."}),"\n",(0,n.jsx)(r.h4,{id:"methods-7",children:"Methods"}),"\n",(0,n.jsx)(r.h5,{id:"debug",children:"debug()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"debug(message: string, data?: unknown): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/logging.ts#L25",children:"packages/middleware/src/logging.ts:25"})]}),"\n",(0,n.jsx)(r.h6,{id:"parameters-58",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"message"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"data?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"unknown"})})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-82",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.h5,{id:"info",children:"info()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"info(message: string, data?: unknown): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/logging.ts#L26",children:"packages/middleware/src/logging.ts:26"})]}),"\n",(0,n.jsx)(r.h6,{id:"parameters-59",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"message"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"data?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"unknown"})})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-83",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.h5,{id:"warn",children:"warn()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"warn(message: string, data?: unknown): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/logging.ts#L27",children:"packages/middleware/src/logging.ts:27"})]}),"\n",(0,n.jsx)(r.h6,{id:"parameters-60",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"message"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"data?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"unknown"})})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-84",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.h5,{id:"error",children:"error()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"error(message: string, data?: unknown): void;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/logging.ts#L28",children:"packages/middleware/src/logging.ts:28"})]}),"\n",(0,n.jsx)(r.h6,{id:"parameters-61",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"message"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"data?"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"unknown"})})]})]})]}),"\n",(0,n.jsx)(r.h6,{id:"returns-85",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"void"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"loggingconfig",children:"LoggingConfig"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/logging.ts#L34",children:"packages/middleware/src/logging.ts:34"})]}),"\n",(0,n.jsx)(r.p,{children:"Configuration for logging middleware."}),"\n",(0,n.jsx)(r.h4,{id:"properties-6",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"level"})," ",(0,n.jsx)(r.code,{children:"level?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#loglevel",children:(0,n.jsx)(r.code,{children:"LogLevel"})})}),(0,n.jsxs)(r.td,{children:["Minimum log level. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"'info'"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/logging.ts#L39",children:"packages/middleware/src/logging.ts:39"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"logrequests"})," ",(0,n.jsx)(r.code,{children:"logRequests?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Whether to log request bodies. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/logging.ts#L45",children:"packages/middleware/src/logging.ts:45"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"logresponses"})," ",(0,n.jsx)(r.code,{children:"logResponses?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Whether to log response bodies. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/logging.ts#L51",children:"packages/middleware/src/logging.ts:51"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"logerrors"})," ",(0,n.jsx)(r.code,{children:"logErrors?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Whether to log errors. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/logging.ts#L57",children:"packages/middleware/src/logging.ts:57"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"sanitize"})," ",(0,n.jsx)(r.code,{children:"sanitize?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Whether to sanitize sensitive data (API keys, tokens). ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/logging.ts#L63",children:"packages/middleware/src/logging.ts:63"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"logger-1"})," ",(0,n.jsx)(r.code,{children:"logger?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#logger",children:(0,n.jsx)(r.code,{children:"Logger"})})}),(0,n.jsxs)(r.td,{children:["Custom logger implementation. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"console"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/logging.ts#L69",children:"packages/middleware/src/logging.ts:69"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"prefix"})," ",(0,n.jsx)(r.code,{children:"prefix?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})}),(0,n.jsx)(r.td,{children:"Custom log prefix."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/logging.ts#L74",children:"packages/middleware/src/logging.ts:74"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"batchspanprocessorconfig",children:"BatchSpanProcessorConfig"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L80",children:"packages/middleware/src/opentelemetry.ts:80"})]}),"\n",(0,n.jsx)(r.p,{children:"Batch span processor configuration."}),"\n",(0,n.jsx)(r.h4,{id:"properties-7",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"maxqueuesize"})," ",(0,n.jsx)(r.code,{children:"maxQueueSize?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Maximum queue size for buffering spans. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"2048"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L85",children:"packages/middleware/src/opentelemetry.ts:85"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"maxexportbatchsize"})," ",(0,n.jsx)(r.code,{children:"maxExportBatchSize?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Maximum batch size per export. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"512"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L91",children:"packages/middleware/src/opentelemetry.ts:91"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"scheduleddelaymillis"})," ",(0,n.jsx)(r.code,{children:"scheduledDelayMillis?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Scheduled delay (in milliseconds) for batching. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"5000"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L97",children:"packages/middleware/src/opentelemetry.ts:97"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"exporttimeoutmillis"})," ",(0,n.jsx)(r.code,{children:"exportTimeoutMillis?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Export timeout (in milliseconds). ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"30000"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L103",children:"packages/middleware/src/opentelemetry.ts:103"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"opentelemetryconfig",children:"OpenTelemetryConfig"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L109",children:"packages/middleware/src/opentelemetry.ts:109"})]}),"\n",(0,n.jsx)(r.p,{children:"Configuration for OpenTelemetry middleware."}),"\n",(0,n.jsx)(r.h4,{id:"properties-8",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"servicename"})," ",(0,n.jsx)(r.code,{children:"serviceName?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})}),(0,n.jsxs)(r.td,{children:["Service name for OpenTelemetry. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"'ai-matey'"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L114",children:"packages/middleware/src/opentelemetry.ts:114"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"serviceversion"})," ",(0,n.jsx)(r.code,{children:"serviceVersion?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})}),(0,n.jsxs)(r.td,{children:["Service version for OpenTelemetry. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"'0.1.0'"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L120",children:"packages/middleware/src/opentelemetry.ts:120"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"endpoint"})," ",(0,n.jsx)(r.code,{children:"endpoint?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})}),(0,n.jsxs)(r.td,{children:["OTLP endpoint URL. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"'http://localhost:4318/v1/traces'"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L126",children:"packages/middleware/src/opentelemetry.ts:126"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"headers"})," ",(0,n.jsx)(r.code,{children:"headers?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"string"}),">"]}),(0,n.jsx)(r.td,{children:"Custom headers for OTLP export."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L131",children:"packages/middleware/src/opentelemetry.ts:131"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"samplingrate"})," ",(0,n.jsx)(r.code,{children:"samplingRate?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Sampling rate (0.0 to 1.0). ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"1.0 (100%)"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L137",children:"packages/middleware/src/opentelemetry.ts:137"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"resourceattributes"})," ",(0,n.jsx)(r.code,{children:"resourceAttributes?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"string"}),">"]}),(0,n.jsx)(r.td,{children:"Custom resource attributes."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L142",children:"packages/middleware/src/opentelemetry.ts:142"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"exportspans"})," ",(0,n.jsx)(r.code,{children:"exportSpans?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Whether to export spans. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L148",children:"packages/middleware/src/opentelemetry.ts:148"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"tracername"})," ",(0,n.jsx)(r.code,{children:"tracerName?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})}),(0,n.jsxs)(r.td,{children:["Custom tracer name. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"'ai-matey-tracer'"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L154",children:"packages/middleware/src/opentelemetry.ts:154"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"batchspanprocessorconfig-1"})," ",(0,n.jsx)(r.code,{children:"batchSpanProcessorConfig?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#batchspanprocessorconfig",children:(0,n.jsx)(r.code,{children:"BatchSpanProcessorConfig"})})}),(0,n.jsx)(r.td,{children:"Batch span processor configuration."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L159",children:"packages/middleware/src/opentelemetry.ts:159"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"exportertimeoutmillis"})," ",(0,n.jsx)(r.code,{children:"exporterTimeoutMillis?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["OTLP exporter timeout (in milliseconds). ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"10000"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L165",children:"packages/middleware/src/opentelemetry.ts:165"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"retryconfig",children:"RetryConfig"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/retry.ts#L20",children:"packages/middleware/src/retry.ts:20"})]}),"\n",(0,n.jsx)(r.p,{children:"Configuration for retry middleware."}),"\n",(0,n.jsx)(r.h4,{id:"properties-9",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"maxattempts"})," ",(0,n.jsx)(r.code,{children:"maxAttempts?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Maximum number of retry attempts. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"3"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/retry.ts#L25",children:"packages/middleware/src/retry.ts:25"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"initialdelay"})," ",(0,n.jsx)(r.code,{children:"initialDelay?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Initial delay before first retry (milliseconds). ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"1000"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/retry.ts#L31",children:"packages/middleware/src/retry.ts:31"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"backoffmultiplier"})," ",(0,n.jsx)(r.code,{children:"backoffMultiplier?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Backoff multiplier for exponential backoff. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"2"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/retry.ts#L37",children:"packages/middleware/src/retry.ts:37"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"maxdelay"})," ",(0,n.jsx)(r.code,{children:"maxDelay?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Maximum delay between retries (milliseconds). ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"30000 (30 seconds)"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/retry.ts#L43",children:"packages/middleware/src/retry.ts:43"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"usejitter"})," ",(0,n.jsx)(r.code,{children:"useJitter?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Whether to add jitter to retry delays. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/retry.ts#L49",children:"packages/middleware/src/retry.ts:49"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"shouldretry"})," ",(0,n.jsx)(r.code,{children:"shouldRetry?"})]}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:"error"}),": ",(0,n.jsx)(r.code,{children:"unknown"}),", ",(0,n.jsx)(r.code,{children:"attempt"}),": ",(0,n.jsx)(r.code,{children:"number"}),") => ",(0,n.jsx)(r.code,{children:"boolean"})]}),(0,n.jsxs)(r.td,{children:["Custom function to determine if error is retryable. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"Check error.isRetryable property"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/retry.ts#L55",children:"packages/middleware/src/retry.ts:55"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"onretry"})," ",(0,n.jsx)(r.code,{children:"onRetry?"})]}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:"error"}),": ",(0,n.jsx)(r.code,{children:"unknown"}),", ",(0,n.jsx)(r.code,{children:"attempt"}),": ",(0,n.jsx)(r.code,{children:"number"}),", ",(0,n.jsx)(r.code,{children:"delay"}),": ",(0,n.jsx)(r.code,{children:"number"}),") => ",(0,n.jsx)(r.code,{children:"void"})]}),(0,n.jsx)(r.td,{children:"Callback invoked before each retry."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/retry.ts#L60",children:"packages/middleware/src/retry.ts:60"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"securityconfig",children:"SecurityConfig"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/security.ts#L14",children:"packages/middleware/src/security.ts:14"})]}),"\n",(0,n.jsx)(r.p,{children:"Security headers configuration"}),"\n",(0,n.jsx)(r.h4,{id:"properties-10",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"contentsecuritypolicy"})," ",(0,n.jsx)(r.code,{children:"contentSecurityPolicy?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"string"})," | ",(0,n.jsx)(r.code,{children:"false"})]}),(0,n.jsxs)(r.td,{children:["Content Security Policy ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"\"default-src 'self'\""})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/security.ts#L19",children:"packages/middleware/src/security.ts:19"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"contenttypeoptions"})," ",(0,n.jsx)(r.code,{children:"contentTypeOptions?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"string"})," | ",(0,n.jsx)(r.code,{children:"false"})]}),(0,n.jsxs)(r.td,{children:["X-Content-Type-Options header ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:'"nosniff"'})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/security.ts#L25",children:"packages/middleware/src/security.ts:25"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"frameoptions"})," ",(0,n.jsx)(r.code,{children:"frameOptions?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"false"})," | ",(0,n.jsx)(r.code,{children:'"DENY"'})," | ",(0,n.jsx)(r.code,{children:'"SAMEORIGIN"'})]}),(0,n.jsxs)(r.td,{children:["X-Frame-Options header ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:'"DENY"'})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/security.ts#L31",children:"packages/middleware/src/security.ts:31"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"xssprotection"})," ",(0,n.jsx)(r.code,{children:"xssProtection?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"string"})," | ",(0,n.jsx)(r.code,{children:"false"})]}),(0,n.jsxs)(r.td,{children:["X-XSS-Protection header ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:'"1; mode=block"'})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/security.ts#L37",children:"packages/middleware/src/security.ts:37"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"hsts"})," ",(0,n.jsx)(r.code,{children:"hsts?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"string"})," | ",(0,n.jsx)(r.code,{children:"false"})]}),(0,n.jsxs)(r.td,{children:["Strict-Transport-Security header ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:'"max-age=31536000; includeSubDomains"'})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/security.ts#L43",children:"packages/middleware/src/security.ts:43"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"referrerpolicy"})," ",(0,n.jsx)(r.code,{children:"referrerPolicy?"})]}),(0,n.jsxs)(r.td,{children:["| ",(0,n.jsx)(r.code,{children:"false"})," | ",(0,n.jsx)(r.code,{children:'"origin"'})," | ",(0,n.jsx)(r.code,{children:'"no-referrer"'})," | ",(0,n.jsx)(r.code,{children:'"no-referrer-when-downgrade"'})," | ",(0,n.jsx)(r.code,{children:'"origin-when-cross-origin"'})," | ",(0,n.jsx)(r.code,{children:'"same-origin"'})," | ",(0,n.jsx)(r.code,{children:'"strict-origin"'})," | ",(0,n.jsx)(r.code,{children:'"strict-origin-when-cross-origin"'})," | ",(0,n.jsx)(r.code,{children:'"unsafe-url"'})]}),(0,n.jsxs)(r.td,{children:["Referrer-Policy header ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:'"strict-origin-when-cross-origin"'})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/security.ts#L49",children:"packages/middleware/src/security.ts:49"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"permissionspolicy"})," ",(0,n.jsx)(r.code,{children:"permissionsPolicy?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"string"})," | ",(0,n.jsx)(r.code,{children:"false"})]}),(0,n.jsxs)(r.td,{children:["Permissions-Policy header ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:'"geolocation=(), microphone=(), camera=()"'})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/security.ts#L64",children:"packages/middleware/src/security.ts:64"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"poweredby"})," ",(0,n.jsx)(r.code,{children:"poweredBy?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"string"})," | ",(0,n.jsx)(r.code,{children:"false"})]}),(0,n.jsxs)(r.td,{children:["X-Powered-By header (should be removed for security) ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"false (header removed)"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/security.ts#L70",children:"packages/middleware/src/security.ts:70"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"customheaders"})," ",(0,n.jsx)(r.code,{children:"customHeaders?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"string"}),">"]}),(0,n.jsx)(r.td,{children:"Additional custom headers"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/security.ts#L75",children:"packages/middleware/src/security.ts:75"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"telemetryconfig",children:"TelemetryConfig"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L19",children:"packages/middleware/src/telemetry.ts:19"})]}),"\n",(0,n.jsx)(r.p,{children:"Configuration for telemetry middleware."}),"\n",(0,n.jsx)(r.h4,{id:"properties-11",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"sink"})," ",(0,n.jsx)(r.code,{children:"sink"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#telemetrysink",children:(0,n.jsx)(r.code,{children:"TelemetrySink"})})}),(0,n.jsx)(r.td,{children:"Telemetry sink for sending metrics."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L23",children:"packages/middleware/src/telemetry.ts:23"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"trackcounts"})," ",(0,n.jsx)(r.code,{children:"trackCounts?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Whether to track request counts. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L29",children:"packages/middleware/src/telemetry.ts:29"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"tracklatencies"})," ",(0,n.jsx)(r.code,{children:"trackLatencies?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Whether to track latencies. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L35",children:"packages/middleware/src/telemetry.ts:35"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"trackerrors"})," ",(0,n.jsx)(r.code,{children:"trackErrors?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Whether to track errors. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L41",children:"packages/middleware/src/telemetry.ts:41"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"tracktokens"})," ",(0,n.jsx)(r.code,{children:"trackTokens?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Whether to track token usage. ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L47",children:"packages/middleware/src/telemetry.ts:47"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"tags"})," ",(0,n.jsx)(r.code,{children:"tags?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"string"}),">"]}),(0,n.jsx)(r.td,{children:"Custom tags to add to all metrics."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L52",children:"packages/middleware/src/telemetry.ts:52"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"samplerate"})," ",(0,n.jsx)(r.code,{children:"sampleRate?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Sample rate (0.0 to 1.0). ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"1.0 (100%)"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L58",children:"packages/middleware/src/telemetry.ts:58"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"transformconfig",children:"TransformConfig"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L36",children:"packages/middleware/src/transform.ts:36"})]}),"\n",(0,n.jsx)(r.p,{children:"Configuration for transform middleware."}),"\n",(0,n.jsx)(r.h4,{id:"properties-12",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"transformrequest"})," ",(0,n.jsx)(r.code,{children:"transformRequest?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#requesttransformer",children:(0,n.jsx)(r.code,{children:"RequestTransformer"})})}),(0,n.jsx)(r.td,{children:"Transform function to apply to requests."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L40",children:"packages/middleware/src/transform.ts:40"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"transformresponse"})," ",(0,n.jsx)(r.code,{children:"transformResponse?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#responsetransformer",children:(0,n.jsx)(r.code,{children:"ResponseTransformer"})})}),(0,n.jsx)(r.td,{children:"Transform function to apply to responses."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L45",children:"packages/middleware/src/transform.ts:45"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"transformmessages"})," ",(0,n.jsx)(r.code,{children:"transformMessages?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#messagetransformer",children:(0,n.jsx)(r.code,{children:"MessageTransformer"})})}),(0,n.jsx)(r.td,{children:"Transform function to apply to each message in request."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L50",children:"packages/middleware/src/transform.ts:50"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"validationresult",children:"ValidationResult"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L57",children:"packages/middleware/src/validation.ts:57"})]}),"\n",(0,n.jsx)(r.p,{children:"Validation result"}),"\n",(0,n.jsx)(r.h4,{id:"properties-13",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"valid"})," ",(0,n.jsx)(r.code,{children:"valid"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsx)(r.td,{children:"Whether validation passed"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L61",children:"packages/middleware/src/validation.ts:61"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"errors"})," ",(0,n.jsx)(r.code,{children:"errors"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#validationerror",children:(0,n.jsx)(r.code,{children:"ValidationError"})}),"[]"]}),(0,n.jsx)(r.td,{children:"Validation errors"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L66",children:"packages/middleware/src/validation.ts:66"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"warnings"})," ",(0,n.jsx)(r.code,{children:"warnings"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"string"}),"[]"]}),(0,n.jsx)(r.td,{children:"Warnings (non-blocking)"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L71",children:"packages/middleware/src/validation.ts:71"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"piidetectionresult",children:"PIIDetectionResult"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L77",children:"packages/middleware/src/validation.ts:77"})]}),"\n",(0,n.jsx)(r.p,{children:"PII detection result"}),"\n",(0,n.jsx)(r.h4,{id:"properties-14",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"detected"})," ",(0,n.jsx)(r.code,{children:"detected"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsx)(r.td,{children:"Whether PII was detected"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L81",children:"packages/middleware/src/validation.ts:81"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"types"})," ",(0,n.jsx)(r.code,{children:"types"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"string"}),"[]"]}),(0,n.jsx)(r.td,{children:"Types of PII found"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L86",children:"packages/middleware/src/validation.ts:86"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"matches"})," ",(0,n.jsx)(r.code,{children:"matches"})]}),(0,n.jsxs)(r.td,{children:["{ ",(0,n.jsx)(r.code,{children:"type"}),": ",(0,n.jsx)(r.code,{children:"string"}),"; ",(0,n.jsx)(r.code,{children:"value"}),": ",(0,n.jsx)(r.code,{children:"string"}),"; }[]"]}),(0,n.jsx)(r.td,{children:"Matched patterns (for debugging)"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L91",children:"packages/middleware/src/validation.ts:91"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"moderationresult",children:"ModerationResult"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L97",children:"packages/middleware/src/validation.ts:97"})]}),"\n",(0,n.jsx)(r.p,{children:"Content moderation result"}),"\n",(0,n.jsx)(r.h4,{id:"properties-15",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"flagged"})," ",(0,n.jsx)(r.code,{children:"flagged"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsx)(r.td,{children:"Whether content is flagged"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L101",children:"packages/middleware/src/validation.ts:101"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"categories"})," ",(0,n.jsx)(r.code,{children:"categories"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"string"}),"[]"]}),(0,n.jsx)(r.td,{children:"Categories flagged"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L106",children:"packages/middleware/src/validation.ts:106"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"scores"})," ",(0,n.jsx)(r.code,{children:"scores?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"number"}),">"]}),(0,n.jsx)(r.td,{children:"Confidence scores"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L111",children:"packages/middleware/src/validation.ts:111"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"validationconfig",children:"ValidationConfig"}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L117",children:"packages/middleware/src/validation.ts:117"})]}),"\n",(0,n.jsx)(r.p,{children:"Validation configuration"}),"\n",(0,n.jsx)(r.h4,{id:"properties-16",children:"Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"maxmessages"})," ",(0,n.jsx)(r.code,{children:"maxMessages?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Maximum number of messages in conversation ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"undefined (no limit)"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L122",children:"packages/middleware/src/validation.ts:122"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"maxtotaltokens"})," ",(0,n.jsx)(r.code,{children:"maxTotalTokens?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Maximum total tokens across all messages ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"undefined (no limit)"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L128",children:"packages/middleware/src/validation.ts:128"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"maxtokenspermessage"})," ",(0,n.jsx)(r.code,{children:"maxTokensPerMessage?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Maximum tokens per message ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"undefined (no limit)"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L134",children:"packages/middleware/src/validation.ts:134"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"maxmessagelength"})," ",(0,n.jsx)(r.code,{children:"maxMessageLength?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Maximum message content length (characters) ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"undefined (no limit)"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L140",children:"packages/middleware/src/validation.ts:140"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"maxsystemlength"})," ",(0,n.jsx)(r.code,{children:"maxSystemLength?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"number"})}),(0,n.jsxs)(r.td,{children:["Maximum system message length (characters) ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"undefined (no limit)"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L146",children:"packages/middleware/src/validation.ts:146"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"allowedroles"})," ",(0,n.jsx)(r.code,{children:"allowedRoles?"})]}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:'"system"'})," | ",(0,n.jsx)(r.code,{children:'"user"'})," | ",(0,n.jsx)(r.code,{children:'"assistant"'}),")[]"]}),(0,n.jsxs)(r.td,{children:["Allowed message roles ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"['user', 'assistant', 'system']"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L152",children:"packages/middleware/src/validation.ts:152"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"blockemptymessages"})," ",(0,n.jsx)(r.code,{children:"blockEmptyMessages?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Block requests with empty messages ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L158",children:"packages/middleware/src/validation.ts:158"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"detectpii"})," ",(0,n.jsx)(r.code,{children:"detectPII?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Detect and handle PII (Personally Identifiable Information) ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"false"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L164",children:"packages/middleware/src/validation.ts:164"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"piiaction"})," ",(0,n.jsx)(r.code,{children:"piiAction?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:'"warn"'})," | ",(0,n.jsx)(r.code,{children:'"log"'})," | ",(0,n.jsx)(r.code,{children:'"block"'})," | ",(0,n.jsx)(r.code,{children:'"redact"'})]}),(0,n.jsxs)(r.td,{children:["Action when PII is detected ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"'warn'"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L170",children:"packages/middleware/src/validation.ts:170"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"piipatterns"})," ",(0,n.jsx)(r.code,{children:"piiPatterns?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"Record"}),"<",(0,n.jsx)(r.code,{children:"string"}),", ",(0,n.jsx)(r.code,{children:"RegExp"}),">"]}),(0,n.jsx)(r.td,{children:"PII patterns to detect (regex patterns)"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L175",children:"packages/middleware/src/validation.ts:175"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"piidetector"})," ",(0,n.jsx)(r.code,{children:"piiDetector?"})]}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:"text"}),": ",(0,n.jsx)(r.code,{children:"string"}),") => | ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#piidetectionresult",children:(0,n.jsx)(r.code,{children:"PIIDetectionResult"})})," | ",(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#piidetectionresult",children:(0,n.jsx)(r.code,{children:"PIIDetectionResult"})}),">"]}),(0,n.jsx)(r.td,{children:"Custom PII detector function"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L180",children:"packages/middleware/src/validation.ts:180"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"moderationcallback"})," ",(0,n.jsx)(r.code,{children:"moderationCallback?"})]}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:"content"}),": ",(0,n.jsx)(r.code,{children:"string"}),") => | ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#moderationresult",children:(0,n.jsx)(r.code,{children:"ModerationResult"})})," | ",(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/#moderationresult",children:(0,n.jsx)(r.code,{children:"ModerationResult"})}),">"]}),(0,n.jsx)(r.td,{children:"Content moderation callback Return true to block, false to allow"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L186",children:"packages/middleware/src/validation.ts:186"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"blockflaggedcontent"})," ",(0,n.jsx)(r.code,{children:"blockFlaggedContent?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Block content flagged by moderation ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"false"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L192",children:"packages/middleware/src/validation.ts:192"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"preventpromptinjection"})," ",(0,n.jsx)(r.code,{children:"preventPromptInjection?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Prevent prompt injection attempts ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L198",children:"packages/middleware/src/validation.ts:198"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"injectionpatterns"})," ",(0,n.jsx)(r.code,{children:"injectionPatterns?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"RegExp"}),"[]"]}),(0,n.jsx)(r.td,{children:"Prompt injection patterns to detect"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L203",children:"packages/middleware/src/validation.ts:203"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"sanitizemessages"})," ",(0,n.jsx)(r.code,{children:"sanitizeMessages?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Sanitize messages before processing ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L209",children:"packages/middleware/src/validation.ts:209"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"sanitizer"})," ",(0,n.jsx)(r.code,{children:"sanitizer?"})]}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:"text"}),": ",(0,n.jsx)(r.code,{children:"string"}),") => ",(0,n.jsx)(r.code,{children:"string"})]}),(0,n.jsx)(r.td,{children:"Custom sanitization function"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L214",children:"packages/middleware/src/validation.ts:214"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"validatemodel"})," ",(0,n.jsx)(r.code,{children:"validateModel?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Validate model parameter ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"false"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L220",children:"packages/middleware/src/validation.ts:220"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"allowedmodels"})," ",(0,n.jsx)(r.code,{children:"allowedModels?"})]}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"string"}),"[]"]}),(0,n.jsx)(r.td,{children:"Allowed models (if validateModel is true)"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L225",children:"packages/middleware/src/validation.ts:225"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"validateirformat"})," ",(0,n.jsx)(r.code,{children:"validateIRFormat?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Perform IR format validation before security validation Uses ai.matey.utils/validation.ts for structural correctness ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"false"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L232",children:"packages/middleware/src/validation.ts:232"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"validatetemperature"})," ",(0,n.jsx)(r.del,{children:(0,n.jsx)(r.code,{children:"validateTemperature?"})})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Validate temperature parameter using ai.matey.utils ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"false"})," ",(0,n.jsx)(r.strong,{children:"Deprecated"})," Use validateIRFormat instead for comprehensive parameter validation"]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L239",children:"packages/middleware/src/validation.ts:239"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"temperaturerange"})," ",(0,n.jsx)(r.del,{children:(0,n.jsx)(r.code,{children:"temperatureRange?"})})]}),(0,n.jsxs)(r.td,{children:["[",(0,n.jsx)(r.code,{children:"number"}),", ",(0,n.jsx)(r.code,{children:"number"}),"]"]}),(0,n.jsxs)(r.td,{children:["Temperature range (only used if validateTemperature is true) ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"[0, 2]"})," ",(0,n.jsx)(r.strong,{children:"Deprecated"})," Temperature validation now uses ai.matey.utils range (0-2)"]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L246",children:"packages/middleware/src/validation.ts:246"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"customvalidator"})," ",(0,n.jsx)(r.code,{children:"customValidator?"})]}),(0,n.jsxs)(r.td,{children:["(",(0,n.jsx)(r.code,{children:"request"}),": ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irchatrequest",children:(0,n.jsx)(r.code,{children:"IRChatRequest"})}),") => | ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#validationerror",children:(0,n.jsx)(r.code,{children:"ValidationError"})}),"[] | ",(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-#validationerror",children:(0,n.jsx)(r.code,{children:"ValidationError"})}),"[]>"]}),(0,n.jsx)(r.td,{children:"Custom validation function Return errors to block, empty array to allow"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L252",children:"packages/middleware/src/validation.ts:252"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"throwonerror"})," ",(0,n.jsx)(r.code,{children:"throwOnError?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Throw errors on validation failure ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L258",children:"packages/middleware/src/validation.ts:258"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"logwarnings"})," ",(0,n.jsx)(r.code,{children:"logWarnings?"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsxs)(r.td,{children:["Log validation warnings ",(0,n.jsx)(r.strong,{children:"Default"})," ",(0,n.jsx)(r.code,{children:"true"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L264",children:"packages/middleware/src/validation.ts:264"})})]})]})]}),"\n",(0,n.jsx)(r.h2,{id:"type-aliases",children:"Type Aliases"}),"\n",(0,n.jsx)(r.h3,{id:"loglevel",children:"LogLevel"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:'type LogLevel = "debug" | "info" | "warn" | "error";\n'})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/logging.ts#L19",children:"packages/middleware/src/logging.ts:19"})]}),"\n",(0,n.jsx)(r.p,{children:"Log level."}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"requesttransformer",children:"RequestTransformer()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"type RequestTransformer = (request: IRChatRequest) => \n  | IRChatRequest\n| Promise<IRChatRequest>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L19",children:"packages/middleware/src/transform.ts:19"})]}),"\n",(0,n.jsx)(r.p,{children:"Request transformer function."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-62",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"request"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irchatrequest",children:(0,n.jsx)(r.code,{children:"IRChatRequest"})})})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-86",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:["| ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irchatrequest",children:(0,n.jsx)(r.code,{children:"IRChatRequest"})}),"\n| ",(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irchatrequest",children:(0,n.jsx)(r.code,{children:"IRChatRequest"})}),">"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"responsetransformer",children:"ResponseTransformer()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"type ResponseTransformer = (response: IRChatResponse) => \n  | IRChatResponse\n| Promise<IRChatResponse>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L24",children:"packages/middleware/src/transform.ts:24"})]}),"\n",(0,n.jsx)(r.p,{children:"Response transformer function."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-63",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"response"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irchatresponse",children:(0,n.jsx)(r.code,{children:"IRChatResponse"})})})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-87",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:["| ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irchatresponse",children:(0,n.jsx)(r.code,{children:"IRChatResponse"})}),"\n| ",(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irchatresponse",children:(0,n.jsx)(r.code,{children:"IRChatResponse"})}),">"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"messagetransformer",children:"MessageTransformer()"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"type MessageTransformer = (message: IRMessage) => \n  | IRMessage\n| Promise<IRMessage>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/transform.ts#L31",children:"packages/middleware/src/transform.ts:31"})]}),"\n",(0,n.jsx)(r.p,{children:"Message transformer function."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-64",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Type"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"message"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irmessage",children:(0,n.jsx)(r.code,{children:"IRMessage"})})})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"returns-88",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:["| ",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irmessage",children:(0,n.jsx)(r.code,{children:"IRMessage"})}),"\n| ",(0,n.jsx)(r.code,{children:"Promise"}),"<",(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.core/src/-internal-#irmessage",children:(0,n.jsx)(r.code,{children:"IRMessage"})}),">"]}),"\n",(0,n.jsx)(r.h2,{id:"variables",children:"Variables"}),"\n",(0,n.jsx)(r.h3,{id:"default_pricing",children:"DEFAULT_PRICING"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"const DEFAULT_PRICING: Record<string, ProviderPricing>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/cost-tracking.ts#L262",children:"packages/middleware/src/cost-tracking.ts:262"})]}),"\n",(0,n.jsx)(r.p,{children:"Default pricing for common providers (as of 2024)\nPrices in USD per 1M tokens"}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"opentelemetryattributes",children:"OpenTelemetryAttributes"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:'const OpenTelemetryAttributes: {\n  REQUEST_ID: "ai.request.id";\n  REQUEST_MODEL: "ai.request.model";\n  REQUEST_STREAM: "ai.request.stream";\n  REQUEST_MESSAGE_COUNT: "ai.request.message_count";\n  REQUEST_MAX_TOKENS: "ai.request.max_tokens";\n  RESPONSE_BACKEND: "ai.response.backend";\n  RESPONSE_FINISH_REASON: "ai.response.finish_reason";\n  RESPONSE_MODEL: "ai.response.model";\n  TOKENS_PROMPT: "ai.tokens.prompt";\n  TOKENS_COMPLETION: "ai.tokens.completion";\n  TOKENS_TOTAL: "ai.tokens.total";\n  FRONTEND: "ai.frontend";\n  BACKEND: "ai.backend";\n  DURATION_MS: "ai.duration.ms";\n};\n'})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L171",children:"packages/middleware/src/opentelemetry.ts:171"})]}),"\n",(0,n.jsx)(r.p,{children:"OpenTelemetry span attribute names."}),"\n",(0,n.jsx)(r.h4,{id:"type-declaration",children:"Type Declaration"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Name"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"request_id"})," ",(0,n.jsx)(r.code,{children:"REQUEST_ID"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.request.id"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.request.id'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L173",children:"packages/middleware/src/opentelemetry.ts:173"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"request_model"})," ",(0,n.jsx)(r.code,{children:"REQUEST_MODEL"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.request.model"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.request.model'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L174",children:"packages/middleware/src/opentelemetry.ts:174"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"request_stream"})," ",(0,n.jsx)(r.code,{children:"REQUEST_STREAM"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.request.stream"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.request.stream'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L175",children:"packages/middleware/src/opentelemetry.ts:175"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"request_message_count"})," ",(0,n.jsx)(r.code,{children:"REQUEST_MESSAGE_COUNT"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.request.message_count"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.request.message_count'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L176",children:"packages/middleware/src/opentelemetry.ts:176"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"request_max_tokens"})," ",(0,n.jsx)(r.code,{children:"REQUEST_MAX_TOKENS"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.request.max_tokens"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.request.max_tokens'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L177",children:"packages/middleware/src/opentelemetry.ts:177"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"response_backend"})," ",(0,n.jsx)(r.code,{children:"RESPONSE_BACKEND"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.response.backend"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.response.backend'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L180",children:"packages/middleware/src/opentelemetry.ts:180"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"response_finish_reason"})," ",(0,n.jsx)(r.code,{children:"RESPONSE_FINISH_REASON"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.response.finish_reason"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.response.finish_reason'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L181",children:"packages/middleware/src/opentelemetry.ts:181"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"response_model"})," ",(0,n.jsx)(r.code,{children:"RESPONSE_MODEL"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.response.model"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.response.model'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L182",children:"packages/middleware/src/opentelemetry.ts:182"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"tokens_prompt"})," ",(0,n.jsx)(r.code,{children:"TOKENS_PROMPT"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.tokens.prompt"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.tokens.prompt'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L185",children:"packages/middleware/src/opentelemetry.ts:185"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"tokens_completion"})," ",(0,n.jsx)(r.code,{children:"TOKENS_COMPLETION"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.tokens.completion"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.tokens.completion'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L186",children:"packages/middleware/src/opentelemetry.ts:186"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"tokens_total"})," ",(0,n.jsx)(r.code,{children:"TOKENS_TOTAL"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.tokens.total"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.tokens.total'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L187",children:"packages/middleware/src/opentelemetry.ts:187"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"frontend"})," ",(0,n.jsx)(r.code,{children:"FRONTEND"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.frontend"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.frontend'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L190",children:"packages/middleware/src/opentelemetry.ts:190"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"backend"})," ",(0,n.jsx)(r.code,{children:"BACKEND"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.backend"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.backend'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L191",children:"packages/middleware/src/opentelemetry.ts:191"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"duration_ms"})," ",(0,n.jsx)(r.code,{children:"DURATION_MS"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.duration.ms"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.duration.ms'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/opentelemetry.ts#L194",children:"packages/middleware/src/opentelemetry.ts:194"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"default_security_config",children:"DEFAULT_SECURITY_CONFIG"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:'const DEFAULT_SECURITY_CONFIG: Required<Omit<SecurityConfig, "customHeaders">>;\n'})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/security.ts#L81",children:"packages/middleware/src/security.ts:81"})]}),"\n",(0,n.jsx)(r.p,{children:"Default security configuration"}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"metricnames",children:"MetricNames"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:'const MetricNames: {\n  REQUEST_COUNT: "ai.adapter.request.count";\n  REQUEST_DURATION: "ai.adapter.request.duration";\n  REQUEST_ERROR: "ai.adapter.request.error";\n  TOKEN_PROMPT: "ai.adapter.tokens.prompt";\n  TOKEN_COMPLETION: "ai.adapter.tokens.completion";\n  TOKEN_TOTAL: "ai.adapter.tokens.total";\n};\n'})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L64",children:"packages/middleware/src/telemetry.ts:64"})]}),"\n",(0,n.jsx)(r.p,{children:"Metric names."}),"\n",(0,n.jsx)(r.h4,{id:"type-declaration-1",children:"Type Declaration"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Name"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"request_count"})," ",(0,n.jsx)(r.code,{children:"REQUEST_COUNT"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.adapter.request.count"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.adapter.request.count'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L65",children:"packages/middleware/src/telemetry.ts:65"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"request_duration"})," ",(0,n.jsx)(r.code,{children:"REQUEST_DURATION"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.adapter.request.duration"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.adapter.request.duration'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L66",children:"packages/middleware/src/telemetry.ts:66"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"request_error"})," ",(0,n.jsx)(r.code,{children:"REQUEST_ERROR"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.adapter.request.error"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.adapter.request.error'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L67",children:"packages/middleware/src/telemetry.ts:67"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"token_prompt"})," ",(0,n.jsx)(r.code,{children:"TOKEN_PROMPT"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.adapter.tokens.prompt"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.adapter.tokens.prompt'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L68",children:"packages/middleware/src/telemetry.ts:68"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"token_completion"})," ",(0,n.jsx)(r.code,{children:"TOKEN_COMPLETION"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.adapter.tokens.completion"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.adapter.tokens.completion'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L69",children:"packages/middleware/src/telemetry.ts:69"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"token_total"})," ",(0,n.jsx)(r.code,{children:"TOKEN_TOTAL"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.adapter.tokens.total"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.adapter.tokens.total'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L70",children:"packages/middleware/src/telemetry.ts:70"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"eventnames",children:"EventNames"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:'const EventNames: {\n  REQUEST_START: "ai.adapter.request.start";\n  REQUEST_COMPLETE: "ai.adapter.request.complete";\n  REQUEST_ERROR: "ai.adapter.request.error";\n};\n'})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L76",children:"packages/middleware/src/telemetry.ts:76"})]}),"\n",(0,n.jsx)(r.p,{children:"Event names."}),"\n",(0,n.jsx)(r.h4,{id:"type-declaration-2",children:"Type Declaration"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Name"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Defined in"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"request_start"})," ",(0,n.jsx)(r.code,{children:"REQUEST_START"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.adapter.request.start"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.adapter.request.start'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L77",children:"packages/middleware/src/telemetry.ts:77"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"request_complete"})," ",(0,n.jsx)(r.code,{children:"REQUEST_COMPLETE"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.adapter.request.complete"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.adapter.request.complete'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L78",children:"packages/middleware/src/telemetry.ts:78"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)("a",{id:"request_error-1"})," ",(0,n.jsx)(r.code,{children:"REQUEST_ERROR"})]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:'"ai.adapter.request.error"'})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'ai.adapter.request.error'"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/telemetry.ts#L79",children:"packages/middleware/src/telemetry.ts:79"})})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"default_pii_patterns",children:"DEFAULT_PII_PATTERNS"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"const DEFAULT_PII_PATTERNS: Record<string, RegExp>;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L270",children:"packages/middleware/src/validation.ts:270"})]}),"\n",(0,n.jsx)(r.p,{children:"Default PII patterns"}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"default_injection_patterns",children:"DEFAULT_INJECTION_PATTERNS"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"const DEFAULT_INJECTION_PATTERNS: RegExp[];\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Defined in: ",(0,n.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/blob/d9ca4d9212b1ccb7a41852dee9699a398cbcc024/packages/middleware/src/validation.ts#L293",children:"packages/middleware/src/validation.ts:293"})]}),"\n",(0,n.jsx)(r.p,{children:"Default prompt injection patterns"}),"\n",(0,n.jsx)(r.h2,{id:"modules",children:"Modules"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Module"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"/ai.matey/api/generated/ai.matey.middleware/-internal-",children:"<internal>"})}),(0,n.jsx)(r.td,{children:"-"})]})})]})]})}function o(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}}}]);