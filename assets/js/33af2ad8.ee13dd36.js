"use strict";(globalThis.webpackChunkai_matey_docs=globalThis.webpackChunkai_matey_docs||[]).push([[7139],{1184:(e,r,n)=>{n.d(r,{R:()=>c,x:()=>t});var i=n(4041);const s={},a=i.createContext(s);function c(e){const r=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(a.Provider,{value:r},e.children)}},8177:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"api/packages/http.core","title":"ai.matey.http.core","description":"Framework-agnostic HTTP core utilities for AI Matey","source":"@site/docs/api/packages/http.core.md","sourceDirName":"api/packages","slug":"/api/packages/http.core","permalink":"/ai.matey/api/packages/http.core","draft":false,"unlisted":false,"editUrl":"https://github.com/johnhenry/ai.matey/tree/main/packages/ai.matey.docs/docs/api/packages/http.core.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11},"sidebar":"docs","previous":{"title":"ai.matey.http","permalink":"/ai.matey/api/packages/http"},"next":{"title":"ai.matey.react.core","permalink":"/ai.matey/api/packages/react-core"}}');var s=n(1085),a=n(1184);const c={sidebar_position:11},t="ai.matey.http.core",d={},l=[{value:"Overview",id:"overview",level:2},{value:"Exports",id:"exports",level:2},{value:"Values",id:"values",level:3},{value:"<code>CoreHTTPHandler</code>",id:"corehttphandler",level:4},{value:"<code>parseRequest</code>",id:"parserequest",level:4},{value:"<code>extractBearerToken</code>",id:"extractbearertoken",level:4},{value:"<code>getClientIP</code>",id:"getclientip",level:4},{value:"<code>sendJSON</code>",id:"sendjson",level:4},{value:"<code>sendError</code>",id:"senderror",level:4},{value:"<code>sendSSEHeaders</code>",id:"sendsseheaders",level:4},{value:"<code>sendSSEChunk</code>",id:"sendssechunk",level:4},{value:"<code>sendSSEEvent</code>",id:"sendsseevent",level:4},{value:"<code>sendSSEDone</code>",id:"sendssedone",level:4},{value:"<code>sendSSEError</code>",id:"sendsseerror",level:4},{value:"<code>sendText</code>",id:"sendtext",level:4},{value:"<code>sendNoContent</code>",id:"sendnocontent",level:4},{value:"<code>detectProviderFormat</code>",id:"detectproviderformat",level:4},{value:"<code>normalizeCORSOptions</code>",id:"normalizecorsoptions",level:4},{value:"<code>handleCORS</code>",id:"handlecors",level:4},{value:"<code>handlePreflight</code>",id:"handlepreflight",level:4},{value:"<code>isPreflight</code>",id:"ispreflight",level:4},{value:"<code>defaultAuthValidator</code>",id:"defaultauthvalidator",level:4},{value:"<code>createBearerTokenValidator</code>",id:"createbearertokenvalidator",level:4},{value:"<code>createAPIKeyValidator</code>",id:"createapikeyvalidator",level:4},{value:"<code>createBasicAuthValidator</code>",id:"createbasicauthvalidator",level:4},{value:"<code>combineAuthValidators</code>",id:"combineauthvalidators",level:4},{value:"<code>requireAllAuth</code>",id:"requireallauth",level:4},{value:"<code>skipAuthForPaths</code>",id:"skipauthforpaths",level:4},{value:"<code>RateLimiter</code>",id:"ratelimiter",level:4},{value:"<code>userIDKeyGenerator</code>",id:"useridkeygenerator",level:4},{value:"<code>tokenKeyGenerator</code>",id:"tokenkeygenerator",level:4},{value:"<code>combineKeyGenerators</code>",id:"combinekeygenerators",level:4},{value:"<code>defaultErrorHandler</code>",id:"defaulterrorhandler",level:4},{value:"<code>createLoggingErrorHandler</code>",id:"createloggingerrorhandler",level:4},{value:"<code>createReportingErrorHandler</code>",id:"createreportingerrorhandler",level:4},{value:"<code>wrapErrorHandler</code>",id:"wraperrorhandler",level:4},{value:"<code>isRetryableError</code>",id:"isretryableerror",level:4},{value:"<code>isClientError</code>",id:"isclienterror",level:4},{value:"<code>isServerError</code>",id:"isservererror",level:4},{value:"<code>handleStreamingRequest</code>",id:"handlestreamingrequest",level:4},{value:"<code>SSEKeepAlive</code>",id:"ssekeepalive",level:4},{value:"<code>onClientDisconnect</code>",id:"onclientdisconnect",level:4},{value:"<code>supportsStreaming</code>",id:"supportsstreaming",level:4},{value:"<code>createAbortController</code>",id:"createabortcontroller",level:4},{value:"<code>RouteMatcher</code>",id:"routematcher",level:4},{value:"<code>createDefaultRoutes</code>",id:"createdefaultroutes",level:4},{value:"<code>normalizePath</code>",id:"normalizepath",level:4},{value:"<code>applyPathPrefix</code>",id:"applypathprefix",level:4},{value:"<code>HealthCheck</code>",id:"healthcheck",level:4},{value:"<code>createHealthCheck</code>",id:"createhealthcheck",level:4},{value:"<code>createHealthCheckMiddleware</code>",id:"createhealthcheckmiddleware",level:4},{value:"<code>createReadinessCheck</code>",id:"createreadinesscheck",level:4},{value:"<code>createLivenessCheck</code>",id:"createlivenesscheck",level:4},{value:"Types",id:"types",level:3},{value:"<code>HTTPRequestHandler</code>",id:"httprequesthandler",level:4},{value:"<code>HTTPListenerOptions</code>",id:"httplisteneroptions",level:4},{value:"<code>CORSOptions</code>",id:"corsoptions",level:4},{value:"<code>RateLimitOptions</code>",id:"ratelimitoptions",level:4},{value:"<code>RouteConfig</code>",id:"routeconfig",level:4},{value:"<code>AuthValidator</code>",id:"authvalidator",level:4},{value:"<code>ErrorHandler</code>",id:"errorhandler",level:4},{value:"<code>RateLimitKeyGenerator</code>",id:"ratelimitkeygenerator",level:4},{value:"<code>RateLimitHandler</code>",id:"ratelimithandler",level:4},{value:"<code>ParsedRequest</code>",id:"parsedrequest",level:4},{value:"<code>RateLimitState</code>",id:"ratelimitstate",level:4},{value:"<code>MatchedRoute</code>",id:"matchedroute",level:4},{value:"<code>GenericRequest</code>",id:"genericrequest",level:4},{value:"<code>GenericResponse</code>",id:"genericresponse",level:4},{value:"<code>GenericAuthValidator</code>",id:"genericauthvalidator",level:4},{value:"<code>GenericErrorHandler</code>",id:"genericerrorhandler",level:4},{value:"<code>GenericRateLimitKeyGenerator</code>",id:"genericratelimitkeygenerator",level:4},{value:"<code>GenericRateLimitHandler</code>",id:"genericratelimithandler",level:4},{value:"<code>GenericRateLimitOptions</code>",id:"genericratelimitoptions",level:4},{value:"<code>CoreHandlerOptions</code>",id:"corehandleroptions",level:4},{value:"<code>ParsedGenericRequest</code>",id:"parsedgenericrequest",level:4},{value:"<code>HealthCheckConfig</code>",id:"healthcheckconfig",level:4},{value:"<code>HealthCheckResult</code>",id:"healthcheckresult",level:4},{value:"<code>HealthStatus</code>",id:"healthstatus",level:4},{value:"<code>ComponentHealth</code>",id:"componenthealth",level:4},{value:"Usage",id:"usage",level:2},{value:"Source Code",id:"source-code",level:2},{value:"Quick Links",id:"quick-links",level:2}];function o(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"aimateyhttpcore",children:"ai.matey.http.core"})}),"\n",(0,s.jsx)(r.p,{children:"Framework-agnostic HTTP core utilities for AI Matey"}),"\n",(0,s.jsx)(r.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(r.p,{children:"This package is part of the ai.matey ecosystem."}),"\n",(0,s.jsx)(r.h2,{id:"exports",children:"Exports"}),"\n",(0,s.jsx)(r.h3,{id:"values",children:"Values"}),"\n",(0,s.jsx)(r.h4,{id:"corehttphandler",children:(0,s.jsx)(r.code,{children:"CoreHTTPHandler"})}),"\n",(0,s.jsx)(r.p,{children:"Core HTTP request handler (framework-agnostic)"}),"\n",(0,s.jsx)(r.h4,{id:"parserequest",children:(0,s.jsx)(r.code,{children:"parseRequest"})}),"\n",(0,s.jsx)(r.h4,{id:"extractbearertoken",children:(0,s.jsx)(r.code,{children:"extractBearerToken"})}),"\n",(0,s.jsx)(r.p,{children:"Extract bearer token from Authorization header"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"extractBearerToken(req: IncomingMessage): string | null\n"})}),"\n",(0,s.jsx)(r.h4,{id:"getclientip",children:(0,s.jsx)(r.code,{children:"getClientIP"})}),"\n",(0,s.jsx)(r.p,{children:"Get client IP address from request"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"getClientIP(req: IncomingMessage): string\n"})}),"\n",(0,s.jsx)(r.h4,{id:"sendjson",children:(0,s.jsx)(r.code,{children:"sendJSON"})}),"\n",(0,s.jsx)(r.p,{children:"Send JSON response"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"sendJSON(res: ServerResponse, data: any, statusCode: number = 200, headers: Record<string, string> = {}): void\n"})}),"\n",(0,s.jsx)(r.h4,{id:"senderror",children:(0,s.jsx)(r.code,{children:"sendError"})}),"\n",(0,s.jsx)(r.p,{children:"Send error response"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"sendError(res: ServerResponse, error: Error, statusCode: number = 500, format: 'openai' | 'anthropic' | 'generic' = 'generic'): void\n"})}),"\n",(0,s.jsx)(r.h4,{id:"sendsseheaders",children:(0,s.jsx)(r.code,{children:"sendSSEHeaders"})}),"\n",(0,s.jsx)(r.p,{children:"Send Server-Sent Events (SSE) headers"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"sendSSEHeaders(res: ServerResponse, headers: Record<string, string> = {}): void\n"})}),"\n",(0,s.jsx)(r.h4,{id:"sendssechunk",children:(0,s.jsx)(r.code,{children:"sendSSEChunk"})}),"\n",(0,s.jsx)(r.p,{children:"Send SSE data chunk"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"sendSSEChunk(res: ServerResponse, data: any): void\n"})}),"\n",(0,s.jsx)(r.h4,{id:"sendsseevent",children:(0,s.jsx)(r.code,{children:"sendSSEEvent"})}),"\n",(0,s.jsx)(r.p,{children:"Send SSE event with custom event type"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"sendSSEEvent(res: ServerResponse, event: string, data: any): void\n"})}),"\n",(0,s.jsx)(r.h4,{id:"sendssedone",children:(0,s.jsx)(r.code,{children:"sendSSEDone"})}),"\n",(0,s.jsx)(r.p,{children:"Send SSE done marker"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"sendSSEDone(res: ServerResponse): void\n"})}),"\n",(0,s.jsx)(r.h4,{id:"sendsseerror",children:(0,s.jsx)(r.code,{children:"sendSSEError"})}),"\n",(0,s.jsx)(r.p,{children:"Send SSE error"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"sendSSEError(res: ServerResponse, error: Error, format: 'openai' | 'anthropic' | 'generic' = 'generic'): void\n"})}),"\n",(0,s.jsx)(r.h4,{id:"sendtext",children:(0,s.jsx)(r.code,{children:"sendText"})}),"\n",(0,s.jsx)(r.p,{children:"Send plain text response"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"sendText(res: ServerResponse, text: string, statusCode: number = 200, headers: Record<string, string> = {}): void\n"})}),"\n",(0,s.jsx)(r.h4,{id:"sendnocontent",children:(0,s.jsx)(r.code,{children:"sendNoContent"})}),"\n",(0,s.jsx)(r.p,{children:"Send 204 No Content response"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"sendNoContent(res: ServerResponse): void\n"})}),"\n",(0,s.jsx)(r.h4,{id:"detectproviderformat",children:(0,s.jsx)(r.code,{children:"detectProviderFormat"})}),"\n",(0,s.jsx)(r.p,{children:"Detect provider format from request path or headers"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"detectProviderFormat(path: string): 'openai' | 'anthropic' | 'generic'\n"})}),"\n",(0,s.jsx)(r.h4,{id:"normalizecorsoptions",children:(0,s.jsx)(r.code,{children:"normalizeCORSOptions"})}),"\n",(0,s.jsx)(r.p,{children:"Normalize CORS options"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"normalizeCORSOptions(options: boolean | CORSOptions | undefined): Required<CORSOptions> | null\n"})}),"\n",(0,s.jsx)(r.h4,{id:"handlecors",children:(0,s.jsx)(r.code,{children:"handleCORS"})}),"\n",(0,s.jsx)(r.p,{children:"Handle CORS headers"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"handleCORS(req: IncomingMessage, res: ServerResponse, options: Required<CORSOptions>): boolean\n"})}),"\n",(0,s.jsx)(r.h4,{id:"handlepreflight",children:(0,s.jsx)(r.code,{children:"handlePreflight"})}),"\n",(0,s.jsx)(r.p,{children:"Handle CORS preflight (OPTIONS) request"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"handlePreflight(req: IncomingMessage, res: ServerResponse, options: Required<CORSOptions>): void\n"})}),"\n",(0,s.jsx)(r.h4,{id:"ispreflight",children:(0,s.jsx)(r.code,{children:"isPreflight"})}),"\n",(0,s.jsx)(r.p,{children:"Check if request is a CORS preflight request"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"isPreflight(req: IncomingMessage): boolean\n"})}),"\n",(0,s.jsx)(r.h4,{id:"defaultauthvalidator",children:(0,s.jsx)(r.code,{children:"defaultAuthValidator"})}),"\n",(0,s.jsx)(r.p,{children:"Default auth validator (always allows)"}),"\n",(0,s.jsx)(r.h4,{id:"createbearertokenvalidator",children:(0,s.jsx)(r.code,{children:"createBearerTokenValidator"})}),"\n",(0,s.jsx)(r.p,{children:"Create bearer token validator"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createBearerTokenValidator(validTokens: string[] | Set<string> | ((token: string)\n"})}),"\n",(0,s.jsx)(r.h4,{id:"createapikeyvalidator",children:(0,s.jsx)(r.code,{children:"createAPIKeyValidator"})}),"\n",(0,s.jsx)(r.p,{children:"Create API key validator (checks x-api-key header)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createAPIKeyValidator(validKeys: string[] | Set<string> | ((key: string)\n"})}),"\n",(0,s.jsx)(r.h4,{id:"createbasicauthvalidator",children:(0,s.jsx)(r.code,{children:"createBasicAuthValidator"})}),"\n",(0,s.jsx)(r.p,{children:"Create basic auth validator"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createBasicAuthValidator(credentials: | Map<string, string> | ((username: string, password: string)\n"})}),"\n",(0,s.jsx)(r.h4,{id:"combineauthvalidators",children:(0,s.jsx)(r.code,{children:"combineAuthValidators"})}),"\n",(0,s.jsx)(r.p,{children:"Combine multiple auth validators (OR logic)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"combineAuthValidators(...validators: AuthValidator[]): AuthValidator\n"})}),"\n",(0,s.jsx)(r.h4,{id:"requireallauth",children:(0,s.jsx)(r.code,{children:"requireAllAuth"})}),"\n",(0,s.jsx)(r.p,{children:"Require all auth validators to pass (AND logic)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"requireAllAuth(...validators: AuthValidator[]): AuthValidator\n"})}),"\n",(0,s.jsx)(r.h4,{id:"skipauthforpaths",children:(0,s.jsx)(r.code,{children:"skipAuthForPaths"})}),"\n",(0,s.jsx)(r.p,{children:"Skip auth for certain paths"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"skipAuthForPaths(validator: AuthValidator, paths: string[] | ((path: string)\n"})}),"\n",(0,s.jsx)(r.h4,{id:"ratelimiter",children:(0,s.jsx)(r.code,{children:"RateLimiter"})}),"\n",(0,s.jsx)(r.p,{children:"Rate limiter class"}),"\n",(0,s.jsx)(r.h4,{id:"useridkeygenerator",children:(0,s.jsx)(r.code,{children:"userIDKeyGenerator"})}),"\n",(0,s.jsx)(r.p,{children:"Create key generator from user ID in request body"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"userIDKeyGenerator(req: IncomingMessage): string\n"})}),"\n",(0,s.jsx)(r.h4,{id:"tokenkeygenerator",children:(0,s.jsx)(r.code,{children:"tokenKeyGenerator"})}),"\n",(0,s.jsx)(r.p,{children:"Create key generator from authorization token"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"tokenKeyGenerator(req: IncomingMessage): string\n"})}),"\n",(0,s.jsx)(r.h4,{id:"combinekeygenerators",children:(0,s.jsx)(r.code,{children:"combineKeyGenerators"})}),"\n",(0,s.jsx)(r.p,{children:"Create key generator that combines multiple factors"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"combineKeyGenerators(...generators: ((req: IncomingMessage)\n"})}),"\n",(0,s.jsx)(r.h4,{id:"defaulterrorhandler",children:(0,s.jsx)(r.code,{children:"defaultErrorHandler"})}),"\n",(0,s.jsx)(r.p,{children:"Default error handler"}),"\n",(0,s.jsx)(r.h4,{id:"createloggingerrorhandler",children:(0,s.jsx)(r.code,{children:"createLoggingErrorHandler"})}),"\n",(0,s.jsx)(r.p,{children:"Create error handler that logs to a custom logger"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createLoggingErrorHandler(log: (message: string, error: Error)\n"})}),"\n",(0,s.jsx)(r.h4,{id:"createreportingerrorhandler",children:(0,s.jsx)(r.code,{children:"createReportingErrorHandler"})}),"\n",(0,s.jsx)(r.p,{children:"Create error handler that reports errors to an external service"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createReportingErrorHandler(reporter: (error: Error, req: IncomingMessage)\n"})}),"\n",(0,s.jsx)(r.h4,{id:"wraperrorhandler",children:(0,s.jsx)(r.code,{children:"wrapErrorHandler"})}),"\n",(0,s.jsx)(r.p,{children:"Wrap error handler with custom logic"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"wrapErrorHandler(baseHandler: ErrorHandler, wrapper: ( error: Error, req: IncomingMessage, res: ServerResponse, next: ()\n"})}),"\n",(0,s.jsx)(r.h4,{id:"isretryableerror",children:(0,s.jsx)(r.code,{children:"isRetryableError"})}),"\n",(0,s.jsx)(r.p,{children:"Check if error should be retried"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"isRetryableError(error: Error): boolean\n"})}),"\n",(0,s.jsx)(r.h4,{id:"isclienterror",children:(0,s.jsx)(r.code,{children:"isClientError"})}),"\n",(0,s.jsx)(r.p,{children:"Check if error is a client error (4xx)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"isClientError(error: Error): boolean\n"})}),"\n",(0,s.jsx)(r.h4,{id:"isservererror",children:(0,s.jsx)(r.code,{children:"isServerError"})}),"\n",(0,s.jsx)(r.p,{children:"Check if error is a server error (5xx)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"isServerError(error: Error): boolean\n"})}),"\n",(0,s.jsx)(r.h4,{id:"handlestreamingrequest",children:(0,s.jsx)(r.code,{children:"handleStreamingRequest"})}),"\n",(0,s.jsx)(r.h4,{id:"ssekeepalive",children:(0,s.jsx)(r.code,{children:"SSEKeepAlive"})}),"\n",(0,s.jsx)(r.p,{children:"Create SSE keep-alive mechanism"}),"\n",(0,s.jsx)(r.h4,{id:"onclientdisconnect",children:(0,s.jsx)(r.code,{children:"onClientDisconnect"})}),"\n",(0,s.jsx)(r.p,{children:"Handle client disconnect"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"onClientDisconnect(res: ServerResponse, callback: ()\n"})}),"\n",(0,s.jsx)(r.h4,{id:"supportsstreaming",children:(0,s.jsx)(r.code,{children:"supportsStreaming"})}),"\n",(0,s.jsx)(r.p,{children:"Check if response supports streaming"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"supportsStreaming(res: ServerResponse): boolean\n"})}),"\n",(0,s.jsx)(r.h4,{id:"createabortcontroller",children:(0,s.jsx)(r.code,{children:"createAbortController"})}),"\n",(0,s.jsx)(r.p,{children:"Create streaming abort controller from response"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createAbortController(res: ServerResponse): AbortController\n"})}),"\n",(0,s.jsx)(r.h4,{id:"routematcher",children:(0,s.jsx)(r.code,{children:"RouteMatcher"})}),"\n",(0,s.jsx)(r.p,{children:"Route matcher class"}),"\n",(0,s.jsx)(r.h4,{id:"createdefaultroutes",children:(0,s.jsx)(r.code,{children:"createDefaultRoutes"})}),"\n",(0,s.jsx)(r.p,{children:"Create default routes for common provider endpoints"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createDefaultRoutes(frontendAdapters: Map<string, any>): RouteConfig[]\n"})}),"\n",(0,s.jsx)(r.h4,{id:"normalizepath",children:(0,s.jsx)(r.code,{children:"normalizePath"})}),"\n",(0,s.jsx)(r.p,{children:"Normalize path by removing trailing slashes and adding leading slash"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"normalizePath(path: string): string\n"})}),"\n",(0,s.jsx)(r.h4,{id:"applypathprefix",children:(0,s.jsx)(r.code,{children:"applyPathPrefix"})}),"\n",(0,s.jsx)(r.p,{children:"Apply path prefix to route paths"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"applyPathPrefix(routes: RouteConfig[], prefix: string): RouteConfig[]\n"})}),"\n",(0,s.jsx)(r.h4,{id:"healthcheck",children:(0,s.jsx)(r.code,{children:"HealthCheck"})}),"\n",(0,s.jsx)(r.p,{children:"Health check handler"}),"\n",(0,s.jsx)(r.h4,{id:"createhealthcheck",children:(0,s.jsx)(r.code,{children:"createHealthCheck"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createHealthCheck(bridgeOrRouter: Bridge | Router, config?: HealthCheckConfig): HealthCheck\n"})}),"\n",(0,s.jsx)(r.h4,{id:"createhealthcheckmiddleware",children:(0,s.jsx)(r.code,{children:"createHealthCheckMiddleware"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createHealthCheckMiddleware(bridgeOrRouter: Bridge | Router, path: string = '/health', config?: HealthCheckConfig): (req: GenericRequest, res: GenericResponse)\n"})}),"\n",(0,s.jsx)(r.h4,{id:"createreadinesscheck",children:(0,s.jsx)(r.code,{children:"createReadinessCheck"})}),"\n",(0,s.jsx)(r.p,{children:"Readiness check (for Kubernetes)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createReadinessCheck(bridgeOrRouter: Bridge | Router): (req: GenericRequest, res: GenericResponse)\n"})}),"\n",(0,s.jsx)(r.h4,{id:"createlivenesscheck",children:(0,s.jsx)(r.code,{children:"createLivenessCheck"})}),"\n",(0,s.jsx)(r.p,{children:"Liveness check (for Kubernetes)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createLivenessCheck(): (req: GenericRequest, res: GenericResponse)\n"})}),"\n",(0,s.jsx)(r.h3,{id:"types",children:"Types"}),"\n",(0,s.jsx)(r.h4,{id:"httprequesthandler",children:(0,s.jsx)(r.code,{children:"HTTPRequestHandler"})}),"\n",(0,s.jsx)(r.p,{children:"HTTP request handler compatible with Node.js http.createServer"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"HTTPRequestHandler  = (req: IncomingMessage, res: ServerResponse) => Promise<void>\n"})}),"\n",(0,s.jsx)(r.h4,{id:"httplisteneroptions",children:(0,s.jsx)(r.code,{children:"HTTPListenerOptions"})}),"\n",(0,s.jsx)(r.p,{children:"HTTP listener configuration options"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"HTTPListenerOptions\n"})}),"\n",(0,s.jsx)(r.h4,{id:"corsoptions",children:(0,s.jsx)(r.code,{children:"CORSOptions"})}),"\n",(0,s.jsx)(r.p,{children:"CORS configuration options"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"CORSOptions\n"})}),"\n",(0,s.jsx)(r.h4,{id:"ratelimitoptions",children:(0,s.jsx)(r.code,{children:"RateLimitOptions"})}),"\n",(0,s.jsx)(r.p,{children:"Rate limiting configuration (Node.js-specific)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"RateLimitOptions\n"})}),"\n",(0,s.jsx)(r.h4,{id:"routeconfig",children:(0,s.jsx)(r.code,{children:"RouteConfig"})}),"\n",(0,s.jsx)(r.p,{children:"Route matching configuration"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"RouteConfig\n"})}),"\n",(0,s.jsx)(r.h4,{id:"authvalidator",children:(0,s.jsx)(r.code,{children:"AuthValidator"})}),"\n",(0,s.jsx)(r.p,{children:"Auth validator function (Node.js-specific)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"AuthValidator  = (req: IncomingMessage) => boolean | Promise<boolean>\n"})}),"\n",(0,s.jsx)(r.h4,{id:"errorhandler",children:(0,s.jsx)(r.code,{children:"ErrorHandler"})}),"\n",(0,s.jsx)(r.p,{children:"Error handler function (Node.js-specific)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"ErrorHandler  = ( error: Error, req: IncomingMessage, res: ServerResponse ) => void | Promise<void>\n"})}),"\n",(0,s.jsx)(r.h4,{id:"ratelimitkeygenerator",children:(0,s.jsx)(r.code,{children:"RateLimitKeyGenerator"})}),"\n",(0,s.jsx)(r.p,{children:"Rate limit key generator (Node.js-specific)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"RateLimitKeyGenerator  = (req: IncomingMessage) => string\n"})}),"\n",(0,s.jsx)(r.h4,{id:"ratelimithandler",children:(0,s.jsx)(r.code,{children:"RateLimitHandler"})}),"\n",(0,s.jsx)(r.p,{children:"Rate limit handler (called when limit exceeded) (Node.js-specific)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"RateLimitHandler  = ( req: IncomingMessage, res: ServerResponse, retryAfter: number ) => void | Promise<void>\n"})}),"\n",(0,s.jsx)(r.h4,{id:"parsedrequest",children:(0,s.jsx)(r.code,{children:"ParsedRequest"})}),"\n",(0,s.jsx)(r.p,{children:"Parsed HTTP request"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"ParsedRequest\n"})}),"\n",(0,s.jsx)(r.h4,{id:"ratelimitstate",children:(0,s.jsx)(r.code,{children:"RateLimitState"})}),"\n",(0,s.jsx)(r.p,{children:"Rate limit state"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"RateLimitState\n"})}),"\n",(0,s.jsx)(r.h4,{id:"matchedroute",children:(0,s.jsx)(r.code,{children:"MatchedRoute"})}),"\n",(0,s.jsx)(r.p,{children:"Matched route information"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"MatchedRoute\n"})}),"\n",(0,s.jsx)(r.h4,{id:"genericrequest",children:(0,s.jsx)(r.code,{children:"GenericRequest"})}),"\n",(0,s.jsx)(r.p,{children:"Generic HTTP request interface (framework-agnostic)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"GenericRequest\n"})}),"\n",(0,s.jsx)(r.h4,{id:"genericresponse",children:(0,s.jsx)(r.code,{children:"GenericResponse"})}),"\n",(0,s.jsx)(r.p,{children:"Generic HTTP response interface (framework-agnostic)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"GenericResponse\n"})}),"\n",(0,s.jsx)(r.h4,{id:"genericauthvalidator",children:(0,s.jsx)(r.code,{children:"GenericAuthValidator"})}),"\n",(0,s.jsx)(r.p,{children:"Auth validator for generic requests"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"GenericAuthValidator  = (req: GenericRequest) => boolean | Promise<boolean>\n"})}),"\n",(0,s.jsx)(r.h4,{id:"genericerrorhandler",children:(0,s.jsx)(r.code,{children:"GenericErrorHandler"})}),"\n",(0,s.jsx)(r.p,{children:"Error handler for generic requests/responses"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"GenericErrorHandler  = ( error: Error, req: GenericRequest, res: GenericResponse ) => void | Promise<void>\n"})}),"\n",(0,s.jsx)(r.h4,{id:"genericratelimitkeygenerator",children:(0,s.jsx)(r.code,{children:"GenericRateLimitKeyGenerator"})}),"\n",(0,s.jsx)(r.p,{children:"Rate limit key generator for generic requests"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"GenericRateLimitKeyGenerator  = (req: GenericRequest) => string\n"})}),"\n",(0,s.jsx)(r.h4,{id:"genericratelimithandler",children:(0,s.jsx)(r.code,{children:"GenericRateLimitHandler"})}),"\n",(0,s.jsx)(r.p,{children:"Rate limit handler for generic requests/responses"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"GenericRateLimitHandler  = ( req: GenericRequest, res: GenericResponse, retryAfter: number ) => void | Promise<void>\n"})}),"\n",(0,s.jsx)(r.h4,{id:"genericratelimitoptions",children:(0,s.jsx)(r.code,{children:"GenericRateLimitOptions"})}),"\n",(0,s.jsx)(r.p,{children:"Generic rate limit options"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"GenericRateLimitOptions\n"})}),"\n",(0,s.jsx)(r.h4,{id:"corehandleroptions",children:(0,s.jsx)(r.code,{children:"CoreHandlerOptions"})}),"\n",(0,s.jsx)(r.p,{children:"Core handler options"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"CoreHandlerOptions\n"})}),"\n",(0,s.jsx)(r.h4,{id:"parsedgenericrequest",children:(0,s.jsx)(r.code,{children:"ParsedGenericRequest"})}),"\n",(0,s.jsx)(r.p,{children:"Parsed HTTP request (after body parsing)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"ParsedGenericRequest extends GenericRequest\n"})}),"\n",(0,s.jsx)(r.h4,{id:"healthcheckconfig",children:(0,s.jsx)(r.code,{children:"HealthCheckConfig"})}),"\n",(0,s.jsx)(r.p,{children:"Health check configuration"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"HealthCheckConfig\n"})}),"\n",(0,s.jsx)(r.h4,{id:"healthcheckresult",children:(0,s.jsx)(r.code,{children:"HealthCheckResult"})}),"\n",(0,s.jsx)(r.p,{children:"Health check result"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"HealthCheckResult\n"})}),"\n",(0,s.jsx)(r.h4,{id:"healthstatus",children:(0,s.jsx)(r.code,{children:"HealthStatus"})}),"\n",(0,s.jsx)(r.p,{children:"Health status levels"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"HealthStatus  = 'healthy' | 'degraded' | 'unhealthy'\n"})}),"\n",(0,s.jsx)(r.h4,{id:"componenthealth",children:(0,s.jsx)(r.code,{children:"ComponentHealth"})}),"\n",(0,s.jsx)(r.p,{children:"Component health status"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"ComponentHealth\n"})}),"\n",(0,s.jsx)(r.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import {\n  CoreHTTPHandler,\n  parseRequest,\n  extractBearerToken,\n  getClientIP,\n  sendJSON,\n  sendError,\n  sendSSEHeaders,\n  sendSSEChunk,\n  sendSSEEvent,\n  sendSSEDone,\n  sendSSEError,\n  sendText,\n  sendNoContent,\n  detectProviderFormat,\n  normalizeCORSOptions,\n  handleCORS,\n  handlePreflight,\n  isPreflight,\n  defaultAuthValidator,\n  createBearerTokenValidator,\n  createAPIKeyValidator,\n  createBasicAuthValidator,\n  combineAuthValidators,\n  requireAllAuth,\n  skipAuthForPaths,\n  RateLimiter,\n  userIDKeyGenerator,\n  tokenKeyGenerator,\n  combineKeyGenerators,\n  defaultErrorHandler,\n  createLoggingErrorHandler,\n  createReportingErrorHandler,\n  wrapErrorHandler,\n  isRetryableError,\n  isClientError,\n  isServerError,\n  handleStreamingRequest,\n  SSEKeepAlive,\n  onClientDisconnect,\n  supportsStreaming,\n  createAbortController,\n  RouteMatcher,\n  createDefaultRoutes,\n  normalizePath,\n  applyPathPrefix,\n  HealthCheck,\n  createHealthCheck,\n  createHealthCheckMiddleware,\n  createReadinessCheck,\n  createLivenessCheck\n} from 'ai.matey.http.core';\n\nimport type {\n  HTTPRequestHandler,\n  HTTPListenerOptions,\n  CORSOptions,\n  RateLimitOptions,\n  RouteConfig,\n  AuthValidator,\n  ErrorHandler,\n  RateLimitKeyGenerator,\n  RateLimitHandler,\n  ParsedRequest,\n  RateLimitState,\n  MatchedRoute,\n  GenericRequest,\n  GenericResponse,\n  GenericAuthValidator,\n  GenericErrorHandler,\n  GenericRateLimitKeyGenerator,\n  GenericRateLimitHandler,\n  GenericRateLimitOptions,\n  CoreHandlerOptions,\n  ParsedGenericRequest,\n  HealthCheckConfig,\n  HealthCheckResult,\n  HealthStatus,\n  ComponentHealth\n} from 'ai.matey.http.core';\n"})}),"\n",(0,s.jsx)(r.h2,{id:"source-code",children:"Source Code"}),"\n",(0,s.jsx)(r.p,{children:"View the complete source code and implementation details:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/tree/main/packages/http.core",children:"Package Source Code"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/tree/main/packages/http.core/src",children:"View on GitHub"})}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"quick-links",children:"Quick Links"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/tree/main/packages/ai.matey.docs/examples",children:"Examples"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/getting-started/installation",children:"Main Documentation"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/all-packages",children:"All Packages"})}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["See the ",(0,s.jsx)(r.a,{href:"https://github.com/johnhenry/ai.matey/tree/main/packages/http.core",children:"package source"})," for complete API documentation and examples."]})]})}function h(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);