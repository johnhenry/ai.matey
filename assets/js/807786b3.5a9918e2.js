"use strict";(globalThis.webpackChunkai_matey_docs=globalThis.webpackChunkai_matey_docs||[]).push([[8918],{1184:(r,e,n)=>{n.d(e,{R:()=>t,x:()=>s});var o=n(4041);const a={},i=o.createContext(a);function t(r){const e=o.useContext(i);return o.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function s(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(a):r.components||a:t(r.components),o.createElement(i.Provider,{value:e},r.children)}},3103:(r,e,n)=>{n.r(e),n.d(e,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"api/errors","title":"Errors API","description":"Complete error handling reference for ai.matey.","source":"@site/docs/api/errors.md","sourceDirName":"api","slug":"/api/errors","permalink":"/ai.matey/api/errors","draft":false,"unlisted":false,"editUrl":"https://github.com/johnhenry/ai.matey/tree/main/packages/ai.matey.docs/docs/api/errors.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docs","previous":{"title":"Types API","permalink":"/ai.matey/api/types"},"next":{"title":"API Reference","permalink":"/ai.matey/api/"}}');var a=n(1085),i=n(1184);const t={sidebar_position:5},s="Errors API",d={},c=[{value:"Error Hierarchy",id:"error-hierarchy",level:2},{value:"Base Error",id:"base-error",level:2},{value:"<code>AIMateyError</code>",id:"aimateyerror",level:3},{value:"Backend Errors",id:"backend-errors",level:2},{value:"<code>BackendError</code>",id:"backenderror",level:3},{value:"<code>RateLimitError</code>",id:"ratelimiterror",level:3},{value:"<code>AuthenticationError</code>",id:"authenticationerror",level:3},{value:"<code>InvalidRequestError</code>",id:"invalidrequesterror",level:3},{value:"<code>TimeoutError</code>",id:"timeouterror",level:3},{value:"<code>ServiceUnavailableError</code>",id:"serviceunavailableerror",level:3},{value:"Validation Errors",id:"validation-errors",level:2},{value:"<code>ValidationError</code>",id:"validationerror",level:3},{value:"Adapter Errors",id:"adapter-errors",level:2},{value:"<code>AdapterError</code>",id:"adaptererror",level:3},{value:"Middleware Errors",id:"middleware-errors",level:2},{value:"<code>MiddlewareError</code>",id:"middlewareerror",level:3},{value:"Routing Errors",id:"routing-errors",level:2},{value:"<code>RoutingError</code>",id:"routingerror",level:3},{value:"<code>AllBackendsFailedError</code>",id:"allbackendsfailederror",level:3},{value:"Configuration Errors",id:"configuration-errors",level:2},{value:"<code>ConfigurationError</code>",id:"configurationerror",level:3},{value:"Error Handling Patterns",id:"error-handling-patterns",level:2},{value:"Try-Catch",id:"try-catch",level:3},{value:"Error Handler Middleware",id:"error-handler-middleware",level:3},{value:"Bridge Error Events",id:"bridge-error-events",level:3},{value:"Router Failover",id:"router-failover",level:3},{value:"Retry Logic",id:"retry-logic",level:3},{value:"Error Logging",id:"error-logging",level:3},{value:"Error Codes Reference",id:"error-codes-reference",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Always Handle Errors",id:"1-always-handle-errors",level:3},{value:"2. Use Specific Error Types",id:"2-use-specific-error-types",level:3},{value:"3. Log Error Context",id:"3-log-error-context",level:3},{value:"4. Implement Graceful Degradation",id:"4-implement-graceful-degradation",level:3},{value:"See Also",id:"see-also",level:2}];function l(r){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...r.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"errors-api",children:"Errors API"})}),"\n",(0,a.jsx)(e.p,{children:"Complete error handling reference for ai.matey."}),"\n",(0,a.jsx)(e.h2,{id:"error-hierarchy",children:"Error Hierarchy"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"Error\n\u2514\u2500\u2500 AIMateyError (base)\n    \u251c\u2500\u2500 BackendError\n    \u2502   \u251c\u2500\u2500 RateLimitError\n    \u2502   \u251c\u2500\u2500 AuthenticationError\n    \u2502   \u251c\u2500\u2500 InvalidRequestError\n    \u2502   \u251c\u2500\u2500 TimeoutError\n    \u2502   \u2514\u2500\u2500 ServiceUnavailableError\n    \u251c\u2500\u2500 ValidationError\n    \u251c\u2500\u2500 AdapterError\n    \u251c\u2500\u2500 MiddlewareError\n    \u251c\u2500\u2500 RoutingError\n    \u2514\u2500\u2500 ConfigurationError\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"base-error",children:"Base Error"}),"\n",(0,a.jsx)(e.h3,{id:"aimateyerror",children:(0,a.jsx)(e.code,{children:"AIMateyError"})}),"\n",(0,a.jsx)(e.p,{children:"Base class for all ai.matey errors."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"class AIMateyError extends Error {\n  /** Error name */\n  name: string;\n\n  /** Error message */\n  message: string;\n\n  /** Error code */\n  code: string;\n\n  /** Original error (if wrapped) */\n  cause?: Error;\n\n  /** Additional context */\n  context?: Record<string, any>;\n\n  /** Stack trace */\n  stack?: string;\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"try {\n  await bridge.chat({ ... });\n} catch (error) {\n  if (error instanceof AIMateyError) {\n    console.log('AI Matey error:', error.code);\n    console.log('Context:', error.context);\n  }\n}\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"backend-errors",children:"Backend Errors"}),"\n",(0,a.jsx)(e.h3,{id:"backenderror",children:(0,a.jsx)(e.code,{children:"BackendError"})}),"\n",(0,a.jsx)(e.p,{children:"Base class for backend-related errors."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"class BackendError extends AIMateyError {\n  /** Backend adapter name */\n  backend: string;\n\n  /** HTTP status code (if applicable) */\n  statusCode?: number;\n\n  /** Response body */\n  responseBody?: any;\n\n  /** Request that caused the error */\n  request?: IRChatCompletionRequest;\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"try {\n  await bridge.chat({ ... });\n} catch (error) {\n  if (error instanceof BackendError) {\n    console.log('Backend:', error.backend);\n    console.log('Status:', error.statusCode);\n    console.log('Response:', error.responseBody);\n  }\n}\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"ratelimiterror",children:(0,a.jsx)(e.code,{children:"RateLimitError"})}),"\n",(0,a.jsx)(e.p,{children:"Thrown when rate limit is exceeded."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"class RateLimitError extends BackendError {\n  code = 'RATE_LIMIT_EXCEEDED';\n\n  /** Retry after (seconds) */\n  retryAfter?: number;\n\n  /** Limit details */\n  limit?: {\n    requests: number;\n    period: string;\n    remaining: number;\n  };\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"try {\n  await bridge.chat({ ... });\n} catch (error) {\n  if (error instanceof RateLimitError) {\n    console.log(`Rate limit exceeded. Retry after ${error.retryAfter}s`);\n    console.log(`Limit: ${error.limit.requests} requests per ${error.limit.period}`);\n\n    // Wait and retry\n    await new Promise(resolve => setTimeout(resolve, error.retryAfter * 1000));\n    await bridge.chat({ ... });\n  }\n}\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"authenticationerror",children:(0,a.jsx)(e.code,{children:"AuthenticationError"})}),"\n",(0,a.jsx)(e.p,{children:"Thrown when API key is invalid or missing."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"class AuthenticationError extends BackendError {\n  code = 'AUTHENTICATION_FAILED';\n\n  /** Authentication type */\n  authType: 'api_key' | 'bearer_token' | 'oauth';\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"try {\n  await bridge.chat({ ... });\n} catch (error) {\n  if (error instanceof AuthenticationError) {\n    console.error('Invalid API key for:', error.backend);\n    console.error('Auth type:', error.authType);\n\n    // Prompt for new API key\n    const newKey = await promptForApiKey();\n    bridge.setBackend(new AnthropicBackendAdapter({ apiKey: newKey }));\n  }\n}\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"invalidrequesterror",children:(0,a.jsx)(e.code,{children:"InvalidRequestError"})}),"\n",(0,a.jsx)(e.p,{children:"Thrown when request is malformed or invalid."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"class InvalidRequestError extends BackendError {\n  code = 'INVALID_REQUEST';\n\n  /** Validation errors */\n  errors?: Array<{\n    field: string;\n    message: string;\n    code: string;\n  }>;\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"try {\n  await bridge.chat({ model: null }); // Invalid\n} catch (error) {\n  if (error instanceof InvalidRequestError) {\n    console.error('Invalid request:', error.message);\n    error.errors?.forEach(err => {\n      console.error(`  ${err.field}: ${err.message}`);\n    });\n  }\n}\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"timeouterror",children:(0,a.jsx)(e.code,{children:"TimeoutError"})}),"\n",(0,a.jsx)(e.p,{children:"Thrown when request exceeds timeout."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"class TimeoutError extends BackendError {\n  code = 'TIMEOUT';\n\n  /** Timeout duration (ms) */\n  timeout: number;\n\n  /** Elapsed time (ms) */\n  elapsed: number;\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"const bridge = new Bridge(frontend, backend, { timeout: 5000 });\n\ntry {\n  await bridge.chat({ ... });\n} catch (error) {\n  if (error instanceof TimeoutError) {\n    console.error(`Request timed out after ${error.timeout}ms`);\n\n    // Retry with longer timeout\n    bridge.options.timeout = 10000;\n    await bridge.chat({ ... });\n  }\n}\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"serviceunavailableerror",children:(0,a.jsx)(e.code,{children:"ServiceUnavailableError"})}),"\n",(0,a.jsx)(e.p,{children:"Thrown when backend service is down or unavailable."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"class ServiceUnavailableError extends BackendError {\n  code = 'SERVICE_UNAVAILABLE';\n\n  /** Expected recovery time */\n  retryAfter?: number;\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"try {\n  await bridge.chat({ ... });\n} catch (error) {\n  if (error instanceof ServiceUnavailableError) {\n    console.error(`${error.backend} is unavailable`);\n\n    // Try fallback backend\n    bridge.setBackend(fallbackBackend);\n    await bridge.chat({ ... });\n  }\n}\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"validation-errors",children:"Validation Errors"}),"\n",(0,a.jsx)(e.h3,{id:"validationerror",children:(0,a.jsx)(e.code,{children:"ValidationError"})}),"\n",(0,a.jsx)(e.p,{children:"Thrown when request or response validation fails."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"class ValidationError extends AIMateyError {\n  code = 'VALIDATION_FAILED';\n\n  /** Field that failed validation */\n  field?: string;\n\n  /** Validation errors */\n  errors: Array<{\n    path: string;\n    message: string;\n    value?: any;\n  }>;\n\n  /** Schema that failed */\n  schema?: any;\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"try {\n  await bridge.chat({\n    model: 'gpt-4',\n    messages: [] // Empty messages - invalid\n  });\n} catch (error) {\n  if (error instanceof ValidationError) {\n    console.error('Validation failed:');\n    error.errors.forEach(err => {\n      console.error(`  ${err.path}: ${err.message}`);\n    });\n  }\n}\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"adapter-errors",children:"Adapter Errors"}),"\n",(0,a.jsx)(e.h3,{id:"adaptererror",children:(0,a.jsx)(e.code,{children:"AdapterError"})}),"\n",(0,a.jsx)(e.p,{children:"Thrown when adapter encounters an error."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"class AdapterError extends AIMateyError {\n  code = 'ADAPTER_ERROR';\n\n  /** Adapter name */\n  adapter: string;\n\n  /** Adapter type */\n  adapterType: 'frontend' | 'backend';\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:'try {\n  await bridge.chat({ ... });\n} catch (error) {\n  if (error instanceof AdapterError) {\n    console.error(`${error.adapterType} adapter "${error.adapter}" failed`);\n  }\n}\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"middleware-errors",children:"Middleware Errors"}),"\n",(0,a.jsx)(e.h3,{id:"middlewareerror",children:(0,a.jsx)(e.code,{children:"MiddlewareError"})}),"\n",(0,a.jsx)(e.p,{children:"Thrown when middleware encounters an error."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"class MiddlewareError extends AIMateyError {\n  code = 'MIDDLEWARE_ERROR';\n\n  /** Middleware name */\n  middleware: string;\n\n  /** Phase where error occurred */\n  phase: 'onRequest' | 'onResponse' | 'onError' | 'onStreamChunk';\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:'try {\n  await bridge.chat({ ... });\n} catch (error) {\n  if (error instanceof MiddlewareError) {\n    console.error(`Middleware "${error.middleware}" failed in ${error.phase}`);\n  }\n}\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"routing-errors",children:"Routing Errors"}),"\n",(0,a.jsx)(e.h3,{id:"routingerror",children:(0,a.jsx)(e.code,{children:"RoutingError"})}),"\n",(0,a.jsx)(e.p,{children:"Thrown when router encounters an error."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"class RoutingError extends AIMateyError {\n  code = 'ROUTING_ERROR';\n\n  /** Current strategy */\n  strategy: string;\n\n  /** Available backends */\n  backends: string[];\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"try {\n  await router.chat({ ... });\n} catch (error) {\n  if (error instanceof RoutingError) {\n    console.error(`Routing failed with strategy: ${error.strategy}`);\n    console.error(`Available backends: ${error.backends.join(', ')}`);\n  }\n}\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"allbackendsfailederror",children:(0,a.jsx)(e.code,{children:"AllBackendsFailedError"})}),"\n",(0,a.jsx)(e.p,{children:"Thrown when all backends fail."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"class AllBackendsFailedError extends RoutingError {\n  code = 'ALL_BACKENDS_FAILED';\n\n  /** Individual backend failures */\n  failures: Array<{\n    backend: string;\n    error: Error;\n  }>;\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"try {\n  await router.chat({ ... });\n} catch (error) {\n  if (error instanceof AllBackendsFailedError) {\n    console.error('All backends failed:');\n    error.failures.forEach(({ backend, error }) => {\n      console.error(`  ${backend}: ${error.message}`);\n    });\n  }\n}\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"configuration-errors",children:"Configuration Errors"}),"\n",(0,a.jsx)(e.h3,{id:"configurationerror",children:(0,a.jsx)(e.code,{children:"ConfigurationError"})}),"\n",(0,a.jsx)(e.p,{children:"Thrown when configuration is invalid."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"class ConfigurationError extends AIMateyError {\n  code = 'INVALID_CONFIGURATION';\n\n  /** Configuration field */\n  field?: string;\n\n  /** Expected value/type */\n  expected?: string;\n\n  /** Actual value */\n  actual?: any;\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"try {\n  const bridge = new Bridge(null, backend); // Invalid\n} catch (error) {\n  if (error instanceof ConfigurationError) {\n    console.error(`Invalid config: ${error.field}`);\n    console.error(`Expected: ${error.expected}`);\n    console.error(`Got: ${error.actual}`);\n  }\n}\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"error-handling-patterns",children:"Error Handling Patterns"}),"\n",(0,a.jsx)(e.h3,{id:"try-catch",children:"Try-Catch"}),"\n",(0,a.jsx)(e.p,{children:"Basic error handling:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"try {\n  const response = await bridge.chat({ ... });\n} catch (error) {\n  if (error instanceof RateLimitError) {\n    // Handle rate limit\n    await sleep(error.retryAfter * 1000);\n  } else if (error instanceof AuthenticationError) {\n    // Handle auth error\n    console.error('Invalid API key');\n  } else {\n    // Handle other errors\n    console.error('Unexpected error:', error);\n  }\n}\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"error-handler-middleware",children:"Error Handler Middleware"}),"\n",(0,a.jsx)(e.p,{children:"Global error handling:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"function createErrorHandlerMiddleware() {\n  return {\n    name: 'error-handler',\n\n    async onError(error: Error) {\n      if (error instanceof RateLimitError) {\n        console.log('Rate limit exceeded, waiting...');\n        await sleep(error.retryAfter * 1000);\n        return; // Retry\n      }\n\n      if (error instanceof AuthenticationError) {\n        console.error('Auth failed:', error.backend);\n        // Send alert\n        await sendAlert('Authentication failed');\n      }\n\n      // Re-throw to propagate\n      return error;\n    }\n  };\n}\n\nbridge.use(createErrorHandlerMiddleware());\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"bridge-error-events",children:"Bridge Error Events"}),"\n",(0,a.jsx)(e.p,{children:"Listen to error events:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"bridge.on('error', (error) => {\n  if (error instanceof BackendError) {\n    console.error(`Backend ${error.backend} failed`);\n    console.error(`Status: ${error.statusCode}`);\n\n    // Log to monitoring service\n    logToSentry(error);\n  }\n});\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"router-failover",children:"Router Failover"}),"\n",(0,a.jsx)(e.p,{children:"Automatic failover on errors:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"const router = new Router(frontend, {\n  backends: [primaryBackend, fallbackBackend],\n  strategy: 'priority',\n  fallbackOnError: true\n});\n\nrouter.on('backend:failed', ({ backend, error }) => {\n  console.error(`\u274c ${backend} failed: ${error.message}`);\n});\n\nrouter.on('backend:switch', ({ from, to, reason }) => {\n  console.log(`\ud83d\udd04 Switched from ${from} to ${to}: ${reason}`);\n});\n\n// Automatically uses fallback on error\nconst response = await router.chat({ ... });\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"retry-logic",children:"Retry Logic"}),"\n",(0,a.jsx)(e.p,{children:"Retry on specific errors:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"import { createRetryMiddleware } from 'ai.matey.middleware';\n\nbridge.use(createRetryMiddleware({\n  maxAttempts: 3,\n  initialDelay: 1000,\n  shouldRetry: (error, attempt) => {\n    // Retry on rate limits and timeouts\n    if (error instanceof RateLimitError) return true;\n    if (error instanceof TimeoutError) return true;\n\n    // Don't retry on auth errors\n    if (error instanceof AuthenticationError) return false;\n\n    // Retry up to 2 times for other errors\n    return attempt < 2;\n  }\n}));\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"error-logging",children:"Error Logging"}),"\n",(0,a.jsx)(e.p,{children:"Comprehensive error logging:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"function logError(error: Error) {\n  const logData = {\n    timestamp: new Date().toISOString(),\n    name: error.name,\n    message: error.message,\n    stack: error.stack\n  };\n\n  if (error instanceof AIMateyError) {\n    logData.code = error.code;\n    logData.context = error.context;\n  }\n\n  if (error instanceof BackendError) {\n    logData.backend = error.backend;\n    logData.statusCode = error.statusCode;\n  }\n\n  console.error(JSON.stringify(logData, null, 2));\n\n  // Send to logging service\n  sendToLogService(logData);\n}\n\ntry {\n  await bridge.chat({ ... });\n} catch (error) {\n  logError(error);\n}\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"error-codes-reference",children:"Error Codes Reference"}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"Code"}),(0,a.jsx)(e.th,{children:"Error Class"}),(0,a.jsx)(e.th,{children:"Description"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"RATE_LIMIT_EXCEEDED"})}),(0,a.jsx)(e.td,{children:"RateLimitError"}),(0,a.jsx)(e.td,{children:"API rate limit exceeded"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"AUTHENTICATION_FAILED"})}),(0,a.jsx)(e.td,{children:"AuthenticationError"}),(0,a.jsx)(e.td,{children:"Invalid API key or token"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"INVALID_REQUEST"})}),(0,a.jsx)(e.td,{children:"InvalidRequestError"}),(0,a.jsx)(e.td,{children:"Malformed request"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"TIMEOUT"})}),(0,a.jsx)(e.td,{children:"TimeoutError"}),(0,a.jsx)(e.td,{children:"Request timeout"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"SERVICE_UNAVAILABLE"})}),(0,a.jsx)(e.td,{children:"ServiceUnavailableError"}),(0,a.jsx)(e.td,{children:"Backend unavailable"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"VALIDATION_FAILED"})}),(0,a.jsx)(e.td,{children:"ValidationError"}),(0,a.jsx)(e.td,{children:"Request/response validation failed"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"ADAPTER_ERROR"})}),(0,a.jsx)(e.td,{children:"AdapterError"}),(0,a.jsx)(e.td,{children:"Adapter failure"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"MIDDLEWARE_ERROR"})}),(0,a.jsx)(e.td,{children:"MiddlewareError"}),(0,a.jsx)(e.td,{children:"Middleware failure"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"ROUTING_ERROR"})}),(0,a.jsx)(e.td,{children:"RoutingError"}),(0,a.jsx)(e.td,{children:"Routing failure"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"ALL_BACKENDS_FAILED"})}),(0,a.jsx)(e.td,{children:"AllBackendsFailedError"}),(0,a.jsx)(e.td,{children:"All backends failed"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"INVALID_CONFIGURATION"})}),(0,a.jsx)(e.td,{children:"ConfigurationError"}),(0,a.jsx)(e.td,{children:"Invalid configuration"})]})]})]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsx)(e.h3,{id:"1-always-handle-errors",children:"1. Always Handle Errors"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"// \u2705 Good\ntry {\n  const response = await bridge.chat({ ... });\n} catch (error) {\n  console.error('Error:', error);\n}\n\n// \u274c Bad\nconst response = await bridge.chat({ ... }); // Unhandled errors\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"2-use-specific-error-types",children:"2. Use Specific Error Types"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"// \u2705 Good\ncatch (error) {\n  if (error instanceof RateLimitError) {\n    // Handle rate limit specifically\n  } else if (error instanceof AuthenticationError) {\n    // Handle auth error specifically\n  }\n}\n\n// \u274c Bad\ncatch (error) {\n  console.log('Something went wrong'); // Too generic\n}\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"3-log-error-context",children:"3. Log Error Context"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"// \u2705 Good\ncatch (error) {\n  if (error instanceof BackendError) {\n    console.log('Backend:', error.backend);\n    console.log('Status:', error.statusCode);\n    console.log('Request:', error.request);\n  }\n}\n\n// \u274c Bad\ncatch (error) {\n  console.log(error.message); // Missing context\n}\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"4-implement-graceful-degradation",children:"4. Implement Graceful Degradation"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"// \u2705 Good\ntry {\n  return await primaryService.chat({ ... });\n} catch (error) {\n  if (error instanceof ServiceUnavailableError) {\n    return await fallbackService.chat({ ... });\n  }\n  throw error;\n}\n\n// \u274c Bad\ntry {\n  return await primaryService.chat({ ... });\n} catch (error) {\n  throw error; // No fallback\n}\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"see-also",children:"See Also"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.a,{href:"/api/bridge",children:"Bridge API"})," - Bridge error handling"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.a,{href:"/api/router",children:"Router API"})," - Router error handling"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.a,{href:"/api/middleware",children:"Middleware API"})," - Middleware error handling"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.a,{href:"/guides/testing",children:"Testing Guide"})," - Testing error scenarios"]}),"\n"]})]})}function h(r={}){const{wrapper:e}={...(0,i.R)(),...r.components};return e?(0,a.jsx)(e,{...r,children:(0,a.jsx)(l,{...r})}):l(r)}}}]);