"use strict";(globalThis.webpackChunkai_matey_docs=globalThis.webpackChunkai_matey_docs||[]).push([[735],{1184:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var t=r(4041);const i={},s=t.createContext(i);function a(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(s.Provider,{value:n},e.children)}},9467:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"tutorials/beginner/simple-bridge","title":"Tutorial 01: Simple Bridge","description":"Learn the core concept of ai.matey by building your first Bridge.","source":"@site/docs/tutorials/beginner/01-simple-bridge.md","sourceDirName":"tutorials/beginner","slug":"/tutorials/beginner/simple-bridge","permalink":"/ai.matey/tutorials/beginner/simple-bridge","draft":false,"unlisted":false,"editUrl":"https://github.com/johnhenry/ai.matey/tree/main/packages/ai.matey.docs/docs/tutorials/beginner/01-simple-bridge.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docs","previous":{"title":"Tutorials","permalink":"/ai.matey/tutorials/"},"next":{"title":"Tutorial 02: Using Middleware","permalink":"/ai.matey/tutorials/beginner/using-middleware"}}');var i=r(1085),s=r(1184);const a={sidebar_position:1},o="Tutorial 01: Simple Bridge",d={},l=[{value:"What You&#39;ll Build",id:"what-youll-build",level:2},{value:"Time Required",id:"time-required",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"What is a Bridge?",id:"what-is-a-bridge",level:2},{value:"Step 1: Install Packages",id:"step-1-install-packages",level:2},{value:"Step 2: Create Your First Bridge",id:"step-2-create-your-first-bridge",level:2},{value:"Step 3: Set Your API Key",id:"step-3-set-your-api-key",level:2},{value:"Step 4: Run It",id:"step-4-run-it",level:2},{value:"Understanding What Happened",id:"understanding-what-happened",level:2},{value:"Why Is This Useful?",id:"why-is-this-useful",level:2},{value:"1. Provider Independence",id:"1-provider-independence",level:3},{value:"2. Format Independence",id:"2-format-independence",level:3},{value:"3. Testing &amp; Development",id:"3-testing--development",level:3},{value:"Streaming Support",id:"streaming-support",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Environment-Based Provider Selection",id:"environment-based-provider-selection",level:3},{value:"Reusable Bridge Instance",id:"reusable-bridge-instance",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"&quot;API key not found&quot;",id:"api-key-not-found",level:3},{value:"&quot;Module not found&quot;",id:"module-not-found",level:3},{value:"&quot;Cannot use import statement&quot;",id:"cannot-use-import-statement",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"Full Example Code",id:"full-example-code",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"tutorial-01-simple-bridge",children:"Tutorial 01: Simple Bridge"})}),"\n",(0,i.jsx)(n.p,{children:"Learn the core concept of ai.matey by building your first Bridge."}),"\n",(0,i.jsx)(n.h2,{id:"what-youll-build",children:"What You'll Build"}),"\n",(0,i.jsx)(n.p,{children:"A simple Bridge that lets you write code in OpenAI's format but execute it using Anthropic's Claude API."}),"\n",(0,i.jsx)(n.h2,{id:"time-required",children:"Time Required"}),"\n",(0,i.jsxs)(n.p,{children:["\u23f1\ufe0f ",(0,i.jsx)(n.strong,{children:"10 minutes"})]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Node.js 18+ installed"}),"\n",(0,i.jsxs)(n.li,{children:["One of these API keys:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"OpenAI API key, OR"}),"\n",(0,i.jsx)(n.li,{children:"Anthropic API key"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"what-is-a-bridge",children:"What is a Bridge?"}),"\n",(0,i.jsxs)(n.p,{children:["A ",(0,i.jsx)(n.strong,{children:"Bridge"})," is the core concept of ai.matey. It connects a ",(0,i.jsx)(n.strong,{children:"frontend adapter"})," (your input format) with a ",(0,i.jsx)(n.strong,{children:"backend adapter"})," (the AI provider)."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Your Code (OpenAI format)\n        \u2193\nFrontend Adapter (OpenAI)\n        \u2193\nIntermediate Representation\n        \u2193\nBackend Adapter (Anthropic)\n        \u2193\nClaude API\n"})}),"\n",(0,i.jsx)(n.p,{children:"This lets you write code once and switch providers without changing your application code."}),"\n",(0,i.jsx)(n.h2,{id:"step-1-install-packages",children:"Step 1: Install Packages"}),"\n",(0,i.jsx)(n.p,{children:"Create a new project and install the required packages:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir my-first-bridge\ncd my-first-bridge\nnpm init -y\nnpm install ai.matey.core ai.matey.frontend ai.matey.backend\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-2-create-your-first-bridge",children:"Step 2: Create Your First Bridge"}),"\n",(0,i.jsxs)(n.p,{children:["Create a file called ",(0,i.jsx)(n.code,{children:"index.js"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { Bridge } from 'ai.matey.core';\nimport { OpenAIFrontendAdapter } from 'ai.matey.frontend/openai';\nimport { AnthropicBackendAdapter } from 'ai.matey.backend/anthropic';\n\n// Create the bridge\nconst bridge = new Bridge(\n  new OpenAIFrontendAdapter(),  // Input format: OpenAI\n  new AnthropicBackendAdapter({ // Output provider: Anthropic\n    apiKey: process.env.ANTHROPIC_API_KEY\n  })\n);\n\n// Make a request using OpenAI format\nconst response = await bridge.chat({\n  model: 'gpt-4',  // Any model name - will be mapped to Claude\n  messages: [\n    { role: 'user', content: 'What is ai.matey?' }\n  ]\n});\n\nconsole.log(response.choices[0].message.content);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-3-set-your-api-key",children:"Step 3: Set Your API Key"}),"\n",(0,i.jsxs)(n.p,{children:["Create a ",(0,i.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ANTHROPIC_API_KEY=your_api_key_here\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-4-run-it",children:"Step 4: Run It"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"node index.js\n"})}),"\n",(0,i.jsx)(n.p,{children:"You should see Claude's response in OpenAI format!"}),"\n",(0,i.jsx)(n.h2,{id:"understanding-what-happened",children:"Understanding What Happened"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"You wrote code"})," using OpenAI's API format (familiar to most developers)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Frontend Adapter"})," converted your request to the Intermediate Representation (IR)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Backend Adapter"})," converted the IR to Anthropic's Claude API format"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Claude responded"}),", and the backend adapter converted it back to IR"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Frontend Adapter"})," converted IR back to OpenAI format"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"You received"})," an OpenAI-formatted response, even though Claude processed it"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"why-is-this-useful",children:"Why Is This Useful?"}),"\n",(0,i.jsx)(n.h3,{id:"1-provider-independence",children:"1. Provider Independence"}),"\n",(0,i.jsx)(n.p,{children:"Change providers by only changing the backend:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Switch to OpenAI\nconst bridge = new Bridge(\n  new OpenAIFrontendAdapter(),\n  new OpenAIBackendAdapter({ apiKey: process.env.OPENAI_API_KEY })\n);\n\n// Or switch to Google Gemini\nconst bridge = new Bridge(\n  new OpenAIFrontendAdapter(),\n  new GeminiBackendAdapter({ apiKey: process.env.GEMINI_API_KEY })\n);\n"})}),"\n",(0,i.jsx)(n.p,{children:"Your application code stays exactly the same!"}),"\n",(0,i.jsx)(n.h3,{id:"2-format-independence",children:"2. Format Independence"}),"\n",(0,i.jsx)(n.p,{children:"You can also change the input format:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Use Anthropic's format as input\nconst bridge = new Bridge(\n  new AnthropicFrontendAdapter(),\n  new OpenAIBackendAdapter({ apiKey: process.env.OPENAI_API_KEY })\n);\n\n// Write in Anthropic format, execute on OpenAI\nconst response = await bridge.chat({\n  model: 'claude-3-5-sonnet-20241022',\n  max_tokens: 100,\n  messages: [\n    { role: 'user', content: 'Hello!' }\n  ]\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-testing--development",children:"3. Testing & Development"}),"\n",(0,i.jsx)(n.p,{children:"Use local models for development:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { OllamaBackendAdapter } from 'ai.matey.backend/ollama';\n\nconst devBridge = new Bridge(\n  new OpenAIFrontendAdapter(),\n  new OllamaBackendAdapter({\n    baseURL: 'http://localhost:11434'\n  })\n);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"streaming-support",children:"Streaming Support"}),"\n",(0,i.jsx)(n.p,{children:"The Bridge also supports streaming responses:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const stream = await bridge.chatStream({\n  model: 'gpt-4',\n  messages: [\n    { role: 'user', content: 'Count to 10' }\n  ],\n  stream: true\n});\n\nfor await (const chunk of stream) {\n  const content = chunk.choices?.[0]?.delta?.content;\n  if (content) {\n    process.stdout.write(content);\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsx)(n.p,{children:"Always wrap your Bridge calls in try-catch:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"try {\n  const response = await bridge.chat({\n    model: 'gpt-4',\n    messages: [{ role: 'user', content: 'Hello!' }]\n  });\n  console.log(response.choices[0].message.content);\n} catch (error) {\n  console.error('Error:', error.message);\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"environment-based-provider-selection",children:"Environment-Based Provider Selection"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const backendAdapter = process.env.NODE_ENV === 'production'\n  ? new AnthropicBackendAdapter({ apiKey: process.env.ANTHROPIC_API_KEY })\n  : new OllamaBackendAdapter({ baseURL: 'http://localhost:11434' });\n\nconst bridge = new Bridge(\n  new OpenAIFrontendAdapter(),\n  backendAdapter\n);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"reusable-bridge-instance",children:"Reusable Bridge Instance"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Create once\nconst bridge = new Bridge(\n  new OpenAIFrontendAdapter(),\n  new AnthropicBackendAdapter({ apiKey: process.env.ANTHROPIC_API_KEY })\n);\n\n// Reuse many times\nasync function chat(userMessage) {\n  return await bridge.chat({\n    model: 'gpt-4',\n    messages: [{ role: 'user', content: userMessage }]\n  });\n}\n\nconst response1 = await chat('What is AI?');\nconst response2 = await chat('Explain bridges');\n"})}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"api-key-not-found",children:'"API key not found"'}),"\n",(0,i.jsxs)(n.p,{children:["Make sure your ",(0,i.jsx)(n.code,{children:".env"})," file has the correct API key and you're using ",(0,i.jsx)(n.code,{children:"dotenv"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install dotenv\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import 'dotenv/config';\nimport { Bridge } from 'ai.matey.core';\n// ... rest of code\n"})}),"\n",(0,i.jsx)(n.h3,{id:"module-not-found",children:'"Module not found"'}),"\n",(0,i.jsx)(n.p,{children:"Make sure you installed all packages:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install ai.matey.core ai.matey.frontend ai.matey.backend\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cannot-use-import-statement",children:'"Cannot use import statement"'}),"\n",(0,i.jsxs)(n.p,{children:["Add ",(0,i.jsx)(n.code,{children:'"type": "module"'})," to your ",(0,i.jsx)(n.code,{children:"package.json"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "my-first-bridge",\n  "type": "module",\n  "dependencies": {\n    "ai.matey.core": "latest",\n    "ai.matey.frontend": "latest",\n    "ai.matey.backend": "latest"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(n.p,{children:"Congratulations! You've built your first Bridge."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Continue learning:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/tutorials/beginner/using-middleware",children:"Tutorial 02: Using Middleware"})," - Add logging, caching, and retry"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/johnhenry/ai.matey/tree/main/packages/ai.matey.docs/examples/01-basics",children:"Examples on GitHub"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/getting-started/core-concepts",children:"Core Concepts"})," - Deep dive into architecture"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"full-example-code",children:"Full Example Code"}),"\n",(0,i.jsx)(n.p,{children:"Here's the complete working example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// index.js\nimport 'dotenv/config';\nimport { Bridge } from 'ai.matey.core';\nimport { OpenAIFrontendAdapter } from 'ai.matey.frontend/openai';\nimport { AnthropicBackendAdapter } from 'ai.matey.backend/anthropic';\n\nasync function main() {\n  // Create bridge\n  const bridge = new Bridge(\n    new OpenAIFrontendAdapter(),\n    new AnthropicBackendAdapter({\n      apiKey: process.env.ANTHROPIC_API_KEY\n    })\n  );\n\n  try {\n    // Non-streaming example\n    console.log('Non-streaming response:');\n    const response = await bridge.chat({\n      model: 'gpt-4',\n      messages: [\n        { role: 'user', content: 'Explain ai.matey in one sentence' }\n      ]\n    });\n    console.log(response.choices[0].message.content);\n\n    // Streaming example\n    console.log('\\n\\nStreaming response:');\n    const stream = await bridge.chatStream({\n      model: 'gpt-4',\n      messages: [\n        { role: 'user', content: 'Count to 5' }\n      ],\n      stream: true\n    });\n\n    for await (const chunk of stream) {\n      const content = chunk.choices?.[0]?.delta?.content;\n      if (content) {\n        process.stdout.write(content);\n      }\n    }\n    console.log('\\n');\n  } catch (error) {\n    console.error('Error:', error.message);\n  }\n}\n\nmain();\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# .env\nANTHROPIC_API_KEY=sk-ant-...\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "my-first-bridge",\n  "version": "1.0.0",\n  "type": "module",\n  "dependencies": {\n    "ai.matey.core": "latest",\n    "ai.matey.frontend": "latest",\n    "ai.matey.backend": "latest",\n    "dotenv": "^16.0.0"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Run it:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install\nnode index.js\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Ready for the next tutorial?"})," Learn about ",(0,i.jsx)(n.a,{href:"/tutorials/beginner/using-middleware",children:"Using Middleware"})]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);